if (self.CavalryLogger) { CavalryLogger.start_js(["dgC8Q"]); }

__d("CallToActionLinkFormats",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={VIDEO_LEAD:"VIDEO_LEAD",VIDEO_LPP:"VIDEO_LPP",VIDEO_NEKO:"VIDEO_NEKO",VIDEO_NON_LINK:"VIDEO_NON_LINK",VIDEO_SHOP:"VIDEO_SHOP"};}),null);
__d("ComposerPerfEvent",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CLIENT_BOOTSTRAPPED:"client_bootstrapped",CLIENT_BOOTLOADED:"client_bootloaded",CLIENT_POST_SUCCEEDED:"client_post_succeeded",CLIENT_POST_FAILED:"client_post_failed"};}),null);
__d("FacerecWaterfallEvent",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={RECOGNITION_RECEIVED_BY_CLIENT:"recognition_received_by_client",CLIENT_RECOGNITION_POLLER_TIMEOUT:"client_recognition_poller_timeout",CLIENT_RECOGNITION_POLLER_GIVE_UP:"client_recognition_poller_give_up",SERVER_PHOTO_PUBLISHED:"server_photo_published",SERVER_PHOTO_TAG_ADDED:"sever_photo_tag_added",SERVER_RECOGNITION_OF_PHOTO_POLLED:"server_recognition_of_photo_polled",SERVER_RECOGNITION_OF_FACE_BOX_RETURNED:"server_recognition_of_face_box_returned",CLIENT_PHOTO_PUBLISHED:"client_photo_published"};}),null);
__d("ImageExtensions",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={GIF:"gif",JPG:"jpg",PNG:"png",ICO:"ico",BMP:"bmp",WEBP:"webp",BEST:"best",PNG2JPG:"png2jpg"};}),null);
__d("PagesComposerCarouselPostChildAttachmentAttributes",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={PICTURE:"picture",NAME:"name",DESCRIPTION:"description",LINK:"link",SELECTED:"selected",SCRAPED:"scraped",IMAGE_FBID:"image_fbid",IMAGE_SOURCE:"image_source",ORIGINAL_DIMENSION_HEIGHT:"original_dimensions_height",ORIGINAL_DIMENSION_WIDTH:"original_dimensions_width",CROPPING_START_POINT_X:"cropping_startPoint_x",CROPPING_START_POINT_Y:"cropping_startPoint_y",CROPPING_SOURCE_DIMENSION_HEIGHT:"cropping_source_dimension_height",CROPPING_SOURCE_DIMENSION_WIDTH:"cropping_source_dimension_width",VIDEO_ID:"video_id",CTA_TYPE:"cta_type"};}),null);
__d("PagesComposerCarouselPostLogAttributes",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={USE_CAROUSEL_COMPOSER:"use_carousel_composer",CAROUSEL_INCOMPATIBLE:"carousel_incompatible",CAROUSEL_INCOMPATIBLE_TYPE:"carousel_incompatible_type",SCRAPED_IMAGE_NUM_OLD:"scraped_image_num_old",SCRAPED_URL:"scraped_url",SCRAPED_TIME:"scraped_time",COMPOSER_LOCATION:"composer_location",HIDE_END_CARD:"hide_end_card",SOURCE_ATTACHMENT:"source_attachment",PREFILL_SCRAPE_URL:"prefill_scrape_url"};}),null);
__d("PUWApplications",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={WEB_SIMPLE:"web_simple",WEB_FLASH:"web_flash",WEB_HTML5:"web_html5",WEB_COMPOSER:"web_composer",WEB_ARCHIVE:"web_archive",WEB_MESSENGER:"web_messenger",WEB_OMNIPICKER:"web_omnipicker",WEB_MUSE_OMNIPICKER:"web_muse_omnipicker",WEB_SAY_THANKS:"web_say_thanks",WEB_GOODWILL_CAMPAIGN_OMNIPICKER:"web_goodwill_campaign_omnipicker",WEB_PRODUCT_PHOTO_OMNIPICKER:"web_product_photo_omnipicker",WEB_PAGES_MESSENGER:"web_pages_messenger",WEB_M_ZERO:"web_m_zero",WEB_M_BASIC:"web_m_basic",WEB_M_TOUCH:"web_m_touch",WEB_REACT_COMPOSER:"web_react_composer",MOBILE_FB4IOS:"mobile_fb4ios",MOBILE_FB4IOS_SNAP:"mobile_fb4ios_snap",MOBILE_FB4A:"mobile_fb4a",MOBILE_PMA_ANDROID:"mobile_pma_android",MOBILE_PMA_IOS:"mobile_pma_ios",THIRD_PARTY:"third_party"};}),null);
__d("PUWMethods",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={DRAGDROP:"dragdrop",FILE_SELECTOR:"file_selector",VAULT:"vault",RECENT_PHOTOS:"recent_photos",PHOTOS_OF_YOU:"photos_of_you",METHOD_EDITOR:"editor",SUGGESTIONS:"suggestions",CAMERA:"camera",COPYPASTE:"copypaste",DISABLE_SPHERICAL:"disable_spherical"};}),null);
__d("PUWSteps",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CLIENT_FLOW_BEGIN:"client_flow_begin",CLIENT_SELECT_BEGIN:"client_select_begin",CLIENT_SELECT_SUCCESS:"client_select_success",CLIENT_SELECT_CANCEL:"client_select_cancel",CLIENT_SELECT_FAIL:"client_select_fail",CLIENT_FLOW_POST:"client_flow_post",CLIENT_TRANSFER_BATCH_BEGIN:"client_transfer_batch_begin",CLIENT_UPLOAD_BEGIN:"client_upload_begin",CLIENT_ATTACH_PHOTO:"client_attach_photo",CLIENT_PROCESS_BEGIN:"client_process_begin",CLIENT_PROCESS_SUCCESS:"client_process_success",CLIENT_PROCESS_CANCEL:"client_process_cancel",CLIENT_PROCESS_SKIP:"client_process_skip",CLIENT_PROCESS_FAIL:"client_process_fail",CLIENT_PROCESS_UNAVAILABLE:"client_process_unavailable",CLIENT_TRANSFER_ENQUEUE:"client_transfer_enqueue",CLIENT_TRANSFER_BEGIN:"client_transfer_begin",CLIENT_TRANSFER_SUCCESS:"client_transfer_success",CLIENT_TRANSFER_CANCEL:"client_transfer_cancel",CLIENT_TRANSFER_FAIL:"client_transfer_fail",CLIENT_TRANSFER_MANUAL_RETRY:"client_transfer_manual_retry",CLIENT_UPLOAD_SUCCESS:"client_upload_success",CLIENT_UPLOAD_FAIL:"client_upload_fail",CLIENT_UPLOAD_CANCEL:"client_upload_cancel",CLIENT_UPLOAD_REMOVE:"client_upload_remove",CLIENT_FACEREC_BEGIN:"client_facerec_begin",CLIENT_FACEREC_SUCCESS:"client_facerec_success",CLIENT_FACEREC_FAIL:"client_facerec_fail",CLIENT_PHOTO_PREVIEW_OPEN:"client_photo_preview_open",CLIENT_PHOTO_PREVIEW_CLOSE:"client_photo_preview_close",CLIENT_TRANSFER_BATCH_SUCCESS:"client_transfer_batch_success",CLIENT_TRANSFER_BATCH_CANCEL:"client_transfer_batch_cancel",CLIENT_TRANSFER_BATCH_FAIL:"client_transfer_batch_fail",CLIENT_PUBLISH_ENQUEUE:"client_publish_enqueue",CLIENT_PUBLISH_BEGIN:"client_publish_begin",CLIENT_PUBLISH_SUCCESS:"client_publish_success",CLIENT_PUBLISH_FAIL:"client_publish_fail",CLIENT_ATTEMPT_FAIL:"client_attempt_fail",CLIENT_FLOW_SUCCESS:"client_flow_success",CLIENT_FLOW_FATAL:"client_flow_fatal",CLIENT_FLOW_GIVEUP:"client_flow_giveup",CLIENT_FLOW_CANCEL:"client_flow_cancel",CLIENT_FLOW_FAIL:"client_flow_fail",CLIENT_FLOW_INCOMPLETE:"client_flow_incomplete",CLIENT_ATTEMPT_INCOMPLETE:"client_attempt_incomplete",CLIENT_FLOW_RETRY:"client_flow_retry",CLIENT_ATTEMPT_RETRY:"client_attempt_retry",CLIENT_DIAGNOSTIC:"client_diagnostic",CLIENT_QUALITY_SWITCH:"client_quality_switch",CLIENT_CANCEL_SURVEY:"client_cancel_survey",CLIENT_PHOTO_EDIT_BEGIN:"client_photo_edit_begin",CLIENT_PHOTO_EDIT_SUCCESS:"client_photo_edit_success",SERVER_UPLOAD_BEGIN:"server_upload_begin",SERVER_UPLOAD_SUCCESS:"server_upload_success",SERVER_UPLOAD_FAIL:"server_upload_fail",SERVER_PUBLISH_BEGIN:"server_publish_begin",SERVER_PUBLISH_SUCCESS:"server_publish_success",SERVER_PUBLISH_FAIL:"server_publish_fail",SERVER_RECEIVER_BEGIN:"server_receiver_begin",SERVER_RECEIVER_PUBLISH_BEGIN:"server_receiver_publish_begin",SERVER_SENTRY_RESTRICTION:"server_sentry_restriction"};}),null);
__d("ReactComposerSproutType",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ACTIVITY:"ACTIVITY",ALBUM:" ALBUM",LOCATION:"LOCATION",MEDIA:"MEDIA",PEOPLE:"PEOPLE",NOTE:"NOTE",LIVE_VIDEO:"LIVE_VIDEO",MARKDOWN:"MARKDOWN"};}),null);
__d("ReactComposerTaggerType",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CAMERA:"CAMERA",PEOPLE:"PEOPLE",OG:"OG",LOCATION:"LOCATION",ACTIVITY:"ACTIVITY",BACKDATE:"BACKDATE",TARGETING:"TARGETING",SPONSOR:"SPONSOR",VAULTPHOTO:"VAULTPHOTO",MARKDOWN:"MARKDOWN",CONTENT_WARNINGS:"CONTENT_WARNINGS",PRODUCT:"PRODUCT"};}),null);
__d("VideoCreatorProductType",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LEGACY:0,UNSPECIFIED:1,CORE_VIDEOS:2,LOOPS:3,ANIMATED_GIFS:4,SLIDESHOW:5,PROFILE_VIDEO:6,SPHERICAL:7,LIVE_PHOTO:8,BIRTHDAY_VIDEO:9,STORYLINE:10,FRIENDS_DAY_2016:11,FRIENDVERSARY:12,STORYLINE_WITH_EXTERNAL_MUSIC:13,GOODWILL_VIDEO_BIRTHDAY:14,GOODWILL_VIDEO_ANNIVERSARY:15};}),null);
__d("XAYMTPanelSaveSettingsController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ads\/growth\/aymt\/homepage_panel\/save_settings\/",{time_range:{type:"Enum",enumType:1},ad_account_id:{type:"Int"},promoted_object:{type:"Int"},collapsed:{type:"Int"},dismiss_nux:{type:"Bool",defaultValue:false},flash_insights_dismiss_nux:{type:"Bool",defaultValue:false},refresh_panel:{type:"Bool",defaultValue:false}});}),null);
__d('AdvertiserHomePagelet',['AsyncRequest','DOM','URI','XAYMTPanelSaveSettingsController','$'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={init:function i(j,k){var l=c('XAYMTPanelSaveSettingsController').getURIBuilder().setBool('refresh_panel',true).getURI();l.addQueryData(c('URI').getRequestURI().getQueryData());new (c('AsyncRequest'))().setURI(l).setStatusElement(k).setErrorHandler(function(m){c('DOM').setContent(c('$')('pagelet_advertiser_panel_content'),'');}).send();}};f.exports=h;}),null);
__d('Bandicoot',[],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=5*1000,i=10*60*1000,j=14*24*60*60*1000,k='Bandicoot:',l={ACTIVE:'ACTIVE',INACTIVE:'INACTIVE',CLOSED:'CLOSED'};function m(){try{var q=window.localStorage;if(q){var r='__test'+Date.now();q.setItem(r,'');q.removeItem(r);}return q;}catch(p){}}var n=m();function o(p){this.$Bandicoot5=k+p;this.$Bandicoot4={};this.$Bandicoot1=this.$Bandicoot7.bind(this);this.sessionID=null;this.sessionStartTime=null;this.storage=n;}o.prototype.getCrashTimeData=function(){var p=window.performance&&window.performance.memory||{},q=this.sessionStartTime;return {duration:q?Date.now()-q:0,tabs:Object.keys(this.$Bandicoot8()).length,jsHeapSizeLimit:p.jsHeapSizeLimit,totalJSHeapSize:p.totalJSHeapSize,usedJSHeapSize:p.usedJSHeapSize,elementsInDOM:document.getElementsByTagName('*').length,uri:window.location.href};};o.prototype.getLogTimeData=function(){return {userAgent:window.navigator.userAgent};};o.prototype.logCrash=function(p,q,r){var s=Object.assign({sessionID:p},q,r);};o.prototype.logBrowserUnsupported=function(){};o.prototype.logTrackingError=function(){};o.prototype.startSession=function(){if(!this.storage){this.logBrowserUnsupported();return;}if(this.$Bandicoot2)return;if(!this.sessionID)this.sessionID=Math.random().toString(36).slice(2,9);if(!this.sessionStartTime)this.sessionStartTime=Date.now();this.$Bandicoot2=setInterval(this.$Bandicoot9.bind(this),h);this.$Bandicoot9();if(document.addEventListener)document.addEventListener('visibilitychange',this.$Bandicoot1);this.$Bandicoot10();};o.prototype.endSession=function(){if(!this.storage)return;if(!this.$Bandicoot2)return;clearInterval(this.$Bandicoot2);this.$Bandicoot2=null;if(!this.$Bandicoot3)this.$Bandicoot11({status:l.CLOSED});this.sessionID=null;this.sessionStartTime=null;if(document.removeEventListener)document.removeEventListener('visibilitychange',this.$Bandicoot1);};o.prototype.logKnownCrashes=function(){if(!this.storage)return;if(!this.$Bandicoot2)this.$Bandicoot9();};o.prototype.$Bandicoot9=function(){var p=this.$Bandicoot8(),q={};if(this.$Bandicoot2){if(!p[this.sessionID])p[this.sessionID]={};Object.assign(p[this.sessionID],this.getCrashTimeData(),{lastUpdated:Date.now(),status:this.$Bandicoot12()});}Object.keys(p).forEach(function(r){var s=p[r];if(s.status===l.CLOSED)return;if(this.$Bandicoot4[r])return;if(!s.lastUpdated)return;var t=Date.now()-s.lastUpdated;if(s.status===l.INACTIVE&&t>i)return;if(s.status===l.ACTIVE&&t>i){if(!s.loggerTabForPotentialCrash&&this.$Bandicoot2){s.loggerTabForPotentialCrash=this.sessionID;q[r]=s;}else if(s.loggerTabForPotentialCrash&&s.loggerTabForPotentialCrash!==this.sessionID){if(t>j)return;q[r]=s;}else{this.logCrash(r,s,this.getLogTimeData());this.$Bandicoot4[r]=true;}}else{delete s.loggerTabForPotentialCrash;q[r]=s;}}.bind(this));this.$Bandicoot13(q);};o.prototype.$Bandicoot8=function(p){p=p||this.$Bandicoot5;var q=this.storage.getItem(p)||'{}';try{q=JSON.parse(q);}catch(r){q={};this.storage.removeItem(p);}return q;};o.prototype.$Bandicoot11=function(p){p.lastUpdated=Date.now();var q=this.$Bandicoot8();if(!q[this.sessionID])q[this.sessionID]={};Object.assign(q[this.sessionID],p);this.$Bandicoot13(q);};o.prototype.$Bandicoot13=function(p){var q=JSON.stringify(p);try{this.storage.setItem(this.$Bandicoot5,q);}catch(r){var s=this.$Bandicoot6,t=Date.now();if(!s||t>s+h){this.logTrackingError();this.$Bandicoot6=t;}try{this.storage.removeItem(this.$Bandicoot5);}catch(u){this.$Bandicoot3=true;this.endSession();}}};o.prototype.$Bandicoot10=function(){for(var p=0;p<this.storage.length;++p){var q=this.storage.key(p);if(q.indexOf(k)===0&&q!==this.$Bandicoot5){var r=this.$Bandicoot8(q),s=Object.keys(r).every(function(t){var u=r[t];return (!u.lastUpdated||Date.now()-u.lastUpdated>j);});if(s)this.storage.removeItem(q);}}};o.prototype.$Bandicoot7=function(){this.$Bandicoot11({status:this.$Bandicoot12()});};o.prototype.$Bandicoot12=function(){return document.hidden?l.INACTIVE:l.ACTIVE;};f.exports=o;}),null);
__d('DOMClone',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={shallowClone:function j(k){return i(k,false);},deepClone:function j(k){return i(k,true);}};function i(j,k){var l=j.cloneNode(k);if(typeof l.__FB_TOKEN!=='undefined')delete l.__FB_TOKEN;return l;}f.exports=h;}),null);
__d('FileInput',['cx','ArbiterMixin','DOM','DOMClone','Event','Focus','Keys','UserAgent_DEPRECATED','mixin'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('UserAgent_DEPRECATED').ie();i=babelHelpers.inherits(l,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function l(m,n,o){'use strict';j.constructor.call(this);this.container=m;this.control=n;var p=c('DOM').scry(this.container,'a')[0];p&&p.removeAttribute('href');var q=c('DOM').create('div',{className:"_3jk"},o);c('DOM').appendContent(this.control,q);this._boundHandleChange=this._handleChange.bind(this);if(k)this._boundHandleIEKeyDown=this._handleIEKeyDown.bind(this);this._setInputElement(o);}l.prototype.getValue=function(){'use strict';return this.input.value;};l.prototype.getInput=function(){'use strict';return this.input;};l.prototype.getContainer=function(){'use strict';return this.container;};l.prototype.getControl=function(){'use strict';return this.control;};l.prototype.clear=function(){'use strict';this.input.value='';if(this.input.value!==''){var m=c('DOMClone').deepClone(this.input);c('DOM').replace(this.input,m);this._setInputElement(m);}};l.prototype.destroy=function(){'use strict';this._focus.remove();this._focus=null;this._listener.remove();this._listener=null;if(k){this._IEKeyDownListener.remove();this._IEKeyDownListener=null;}this.container=null;this.control=null;this.input=null;};l.prototype._setInputElement=function(m){'use strict';this.input=m;this._focus&&this._focus.remove();this._focus=c('Focus').relocate(m,this.control);this._listener&&this._listener.remove();this._listener=c('Event').listen(m,'change',this._boundHandleChange);if(k){this._IEKeyDownListener&&this._IEKeyDownListener.remove();this._IEKeyDownListener=c('Event').listen(m,'keydown',this._boundHandleIEKeyDown);}};l.prototype._handleChange=function(event){'use strict';this.inform('change',event);if(this.input){var m=this.input.form;if(m&&k<9)c('Event').fire(m,'change',event);}};l.prototype._handleIEKeyDown=function(event){'use strict';if(event.keyCode===c('Keys').RETURN){event.preventDefault();var m=document.createEvent('MouseEvents');m.initEvent('click',true,true);this.input.dispatchEvent(m);}};f.exports=l;}),null);
__d('FileInput.react',['cx','invariant','FileInput','InlineBlock.react','React','ReactDOM','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return n=(o=k.constructor).call.apply(o,[this].concat(q)),this.getFileInput=function(){return this.$FileInput1;}.bind(this),this.focus=function(){var s=c('ReactDOM').findDOMNode(this.refs.fileInput);if(!s.disabled)s.focus();}.bind(this),n;}m.prototype.render=function(){'use strict';var n=c('joinClasses')("_m",this.props.containerClassName),o='container',p=c('React').createElement('input',babelHelpers['extends']({},this.props,{type:'file',className:c('joinClasses')(this.props.className,"_n"),ref:'fileInput'}),undefined);if(this.props.display==='inline-block')return c('React').createElement(c('InlineBlock.react'),{className:n,ref:o},this.props.children,p);return c('React').createElement('span',{className:n,ref:o},this.props.children,p);};m.prototype.componentDidMount=function(){'use strict';var n=c('ReactDOM').findDOMNode(this.refs.fileInput),o=c('ReactDOM').findDOMNode(this.refs.container),p=o.firstChild;!(p.nodeName==='A')?i(0):void 0;p.setAttribute('rel','ignore');this.$FileInput1=new (c('FileInput'))(o,p,n);};m.prototype.componentWillUnmount=function(){'use strict';this.$FileInput1.destroy();this.$FileInput1=null;};m.propTypes={containerClassName:l.string,display:l.oneOf(['inline-block','inline'])};m.defaultProps={display:'inline-block'};f.exports=m;}),null);
__d('FileHasher',['WebWorker','fileSliceName','emptyFunction','FileHashWorkerResource'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();h.isSupported=function(){'use strict';return c('WebWorker').isSupported();};function h(){'use strict';var i=c('FileHashWorkerResource');c('WebWorker').prepareResource(i);this.$FileHasher1=new (c('WebWorker'))(i).setMessageHandler(function(j){this.$FileHasher2(j);}.bind(this)).execute();}h.prototype.hash=function(i,j){'use strict';this.$FileHasher2=j;this.$FileHasher1.postMessage({file:i,fileSliceName:c('fileSliceName')});return this;};h.prototype.destroy=function(){'use strict';this.$FileHasher2=c('emptyFunction');this.$FileHasher1.terminate();};f.exports=h;}),null);
__d('LitestandComposer',['Arbiter','Bootloader','ReactComposerIDGenerator','Run','SubscriptionsHandler'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=600;function i(k,l){c('Bootloader').loadModules(["Animation","ComposerXController","ComposerXMarauderLogger","DOM","LitestandStream"],function(m,n,o,p,q){if(!c('ReactComposerIDGenerator').isComposerID(k))n.reset(k);if(!q||!l)return;p.prependContent(q.getStreamRoot(),l);new m(l).from('opacity',0).to('opacity',1).duration(h).go();o.logCompleted(k);},'LitestandComposer');}var j={initComposer:function k(l){var m=new (c('SubscriptionsHandler'))();m.addSubscriptions(c('Arbiter').subscribe('LitestandComposer/publish',function(n,o){if(o.composer_id===l)i(l,o.markup);}.bind(this)));c('Run').onLeave(function(){m.release();});}};f.exports=j;}),null);
__d('PhotoUploadFacerecWaterfallTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:PhotoUploadFacerecWaterfallLoggerConfig',this.$PhotoUploadFacerecWaterfallTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:PhotoUploadFacerecWaterfallLoggerConfig',this.$PhotoUploadFacerecWaterfallTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$PhotoUploadFacerecWaterfallTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$PhotoUploadFacerecWaterfallTypedLogger1=babelHelpers['extends']({},this.$PhotoUploadFacerecWaterfallTypedLogger1,j);return this;};h.prototype.setEvent=function(j){this.$PhotoUploadFacerecWaterfallTypedLogger1.event=j;return this;};h.prototype.setFaceBoxID=function(j){this.$PhotoUploadFacerecWaterfallTypedLogger1.face_box_id=j;return this;};h.prototype.setPhotoFbid=function(j){this.$PhotoUploadFacerecWaterfallTypedLogger1.photo_fbid=j;return this;};h.prototype.setRecognizedUser=function(j){this.$PhotoUploadFacerecWaterfallTypedLogger1.recognized_user=j;return this;};h.prototype.setTaggedUser=function(j){this.$PhotoUploadFacerecWaterfallTypedLogger1.tagged_user=j;return this;};h.prototype.setVC=function(j){this.$PhotoUploadFacerecWaterfallTypedLogger1.vc=j;return this;};var i={event:true,face_box_id:true,photo_fbid:true,recognized_user:true,tagged_user:true,vc:true};f.exports=h;}),null);
__d("PhotosUploadID",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=1024,i={getNewID:function j(){return (h++).toString();}};f.exports=i;}),null);
__d('PhotoEditorSaveStates',['requireWeak','Map'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h;c('requireWeak')('PhotoEditorGraphic',function(l){h=l.Sticker;});var i=new (c('Map'))(),j=new (c('Map'))(),k={setState:function l(m,n){i.set(m,n);},getState:function l(m){return i.get(m);},setLoggingData:function l(m,n){j.set(m,n);},getLoggingData:function l(m){return j.get(m);},getTotalNumOfStickersOnPhoto:function l(m){if(i.get(m))return i.get(m).graphics.filter(function(n){return h&&n.type===h;}).length;return 0;}};f.exports=k;}),null);
__d('FeedComposerIDStore',['ReactComposerEvents','Arbiter','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={_composerID:null,_subscriptions:c('SubscriptionsHandler'),set:function i(j){this._subscriptions=new (c('SubscriptionsHandler'))();this._composerID=j;this._subscribeComposerResetEvent();},get:function i(){if(!this._composerID)throw new Error('ID Store has not yet been initialized via set()');return this._composerID;},_subscribeComposerResetEvent:function i(){if(!this._composerID)throw new Error('Composer ID cannot be null');var j=c('Arbiter').subscribeOnce(c('ReactComposerEvents').COMPOSER_RESET+this._composerID,function(k,l){if(l&&l.newComposerID){this._composerID=l.newComposerID;this._subscribeComposerResetEvent();}}.bind(this));this._subscriptions.addSubscriptions(j);}};f.exports=h;}),null);
__d('ReactComposerAlbumActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({CREATE_ALBUM_CLICKED:null},'ReactComposerAlbumActionType');}),null);
__d('ReactComposerMediaFilePickerController.react',['cx','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerContextMixin','ComposerTargetData','Bootloader','DOM','DOMContainer.react','Event','FileInput.react','FileInput','ReactComponentWithPureRenderMixin','React','ReactDOM','SubscriptionsHandler','joinClasses'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerMediaFilePickerController',_prefillFileInput:null,_subscriptions:null,mixins:[c('ReactComposerContextMixin'),c('ReactComponentWithPureRenderMixin')],propTypes:{disableFaceRecognition:i.bool.isRequired,mediaAcceptParam:i.shape({photos:i.string,both:i.string}).isRequired,photoLimit:i.number.isRequired,targetData:i.instanceOf(c('ComposerTargetData')).isRequired,mediaConfig:i.object.isRequired,containerClassName:i.string,fileInputDOM:i.any,onClick:i.func,onFilesSelected:i.func,display:c('FileInput.react').propTypes.display},getDefaultProps:function k(){return {disableFaceRecognition:false,display:'inline'};},componentDidMount:function k(){if(this.props.fileInputDOM){var l=c('DOM').find(c('ReactDOM').findDOMNode(this),'input[type="file"]');if(l.files&&l.files.length>0)this._uploadExistingFiles(l.files);this._prefillFileInput=new (c('FileInput'))(c('ReactDOM').findDOMNode(this.refs.prefillContainer),c('ReactDOM').findDOMNode(this.refs.prefillSelector),l);this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('Event').listen(l,'change',this._onFilesSelected));}},componentWillUnmount:function k(){this._subscriptions&&this._subscriptions.release();},render:function k(){var l=this.props.fileInputDOM;if(l){var m=c('React').cloneElement(c('React').Children.only(this.props.children),{ref:'prefillSelector'});return (c('React').createElement('span',{className:c('joinClasses')(this.props.containerClassName,"_m"),onClick:this._onFileInputClick,ref:'prefillContainer'},m,c('React').createElement(c('DOMContainer.react'),null,l)));}return (c('React').createElement(c('FileInput.react'),{accept:this.props.mediaAcceptParam.both,containerClassName:this.props.containerClassName,multiple:this.props.targetData.targetSupportsMultiplePhotos,name:'composer_photo[]',display:this.props.display,onChange:this._onFilesSelected,onClick:this._onFileInputClick,ref:'fileInput',role:'button',tabIndex:'0'},this.props.children));},_uploadExistingFiles:function k(l){c('Bootloader').loadModules(["ReactComposerMediaUtils","ReactComposerPhotoUploader"],function(m,n){return (m.uploadPhotosOrVideo(this.context.composerID,Array.prototype.slice.call(l),new n(this.context,this.props.photoLimit,{disableFaceRecognition:this.props.disableFaceRecognition}),this.props.targetData.targetSupportsMultiplePhotos,this.props.targetData.targetSupportsMultiMedia));}.bind(this),'ReactComposerMediaFilePickerController.react');},_onFileInputClick:function k(event){c('ReactComposerAttachmentActions').initializeAttachment(this.context.composerID,c('ReactComposerAttachmentType').MEDIA);c('Bootloader').loadModules(["ReactComposerLoggingActions"],function(l){l.mediaUploadInputClicked(this.context.composerID);}.bind(this),'ReactComposerMediaFilePickerController.react');this.props.onClick&&this.props.onClick(event);},_onFilesSelected:function k(event){event.persist&&event.persist();this.props.onFilesSelected&&this.props.onFilesSelected();var l=this._prefillFileInput||this.refs.fileInput.getFileInput();c('Bootloader').loadModules(["ReactComposerPhotoUploader","ReactComposerMediaUtils"],function(m,n){var o=n.handleSpecialMediaUpload(event,l,this.props.mediaConfig,this.context);if(!o){var p=new m(this.context,this.props.photoLimit,{disableFaceRecognition:this.props.disableFaceRecognition});c('ReactComposerAttachmentActions').selectAttachment(this.context.composerID,c('ReactComposerAttachmentType').MEDIA,true);n.uploadPhotosOrVideoFromTarget(this.context.composerID,event.target,p,this.props.targetData.targetSupportsMultiplePhotos,this.props.targetData.targetSupportsMultiMedia);}n.clearInput(l);}.bind(this),'ReactComposerMediaFilePickerController.react');}});f.exports=j;}),null);
__d('ReactComposerMediaUploadActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({PHOTO_UPLOAD_ENQUEUED:null,PHOTO_UPLOAD_RESIZE_STARTED:null,PHOTO_UPLOAD_RESIZE_PROGRESS:null,PHOTO_UPLOAD_RESIZE_DONE:null,PHOTO_UPLOAD_RESIZE_FAILED:null,PHOTO_UPLOAD_RESIZER_UNAVAILABLE:null,PHOTO_UPLOAD_UPLOADING:null,PHOTO_UPLOAD_IS_SPHERICAL:null,PHOTO_UPLOAD_DONE:null,PHOTO_UPLOAD_FAILED:null,PHOTO_UPLOAD_RETRY:null,PHOTO_UPLOAD_EXTRA_DONE:null,PHOTOS_SELECT:null,VIDEO_UPLOAD_ENQUEUED:null,VIDEO_UPLOAD_UPLOADING:null,VIDEO_UPLOAD_DONE:null,VIDEO_UPLOAD_FAILED:null,VIDEO_UPLOAD_RETRY:null,VIDEO_SET_THUMBNAIL:null,VIDEO_SET_UPLOADER:null,MEDIA_UPLOAD_MOVED:null,MEDIA_UPLOAD_REMOVE:null,MEDIA_UPLOAD_PROGRESS:null,MEDIA_UPLOAD_INPUT_CLICKED:null,PREFILL_MEDIAS:null,REORDER_MEDIAS:null},'ReactComposerMediaUploadActionType');}),null);
__d('ReactComposerMediaPrefillConfig',['React'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes;f.exports=h.shape({photoID:h.string,uploadID:h.string,thumbSrc:h.string,fileURL:h.string,filename:h.string,cubestripURI:h.string,mediaType:h.string});}),null);
__d('ReactComposerMediaUploadType',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={PHOTO:'PHOTO',VIDEO:'VIDEO'};}),null);
__d('ReactComposerPhotoActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({PHOTO_RECOGNITION_STARTED:null,PHOTO_RECOGNITION_FINISHED:null,PHOTO_RECOGNITION_ALL_FINISHED:null,PHOTO_ADD_FACEBOX:null,PHOTO_TAG_FACEBOX:null,PHOTO_TAG_XY:null,PHOTO_TAG_XY_PRODUCT:null,PHOTO_UNTAG_FACEBOX:null,PHOTO_REMOVE:null,PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS:null,PHOTO_EDIT_STARTED:null,PHOTO_EDIT_FINISHED:null,PHOTO_SET_BEING_TAGGED:null,PHOTO_LOADING_EDIT_FINISHED:null,PHOTO_UNTAG_ALL:null},'ReactComposerPhotoActionType');}),null);
__d('ReactComposerPhotoStore',['ReactComposerPhotoActionType','ReactComposerMediaUploadActionType','ReactComposerStoreBase','immutable','SphericalPhotoConfig'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('immutable').Record({cubestripURI:null,faceboxes:c('immutable').Map(),height:null,id:null,imageSrc:null,isLoadingPhotoEdit:false,isRecognizingFaceboxes:false,thumbSrc:null,uploadID:null,width:null,xyTags:c('immutable').Map()}),k=c('immutable').Record({id:null,photoID:null,x:null,y:null,top:null,left:null,width:null,height:null,croppedURI:null,taggedSubjectID:null,taggedValue:null,isMagicTag:false,recognizedSubjectID:null}),l=c('immutable').Record({from_facebox:false,name:null,photoID:null,source:null,subject:null,x:null,y:null,is_product_tag:false});h=babelHelpers.inherits(m,c('ReactComposerStoreBase'));i=h&&h.prototype;function m(){'use strict';var n;i.constructor.call(this,function(){return {photos:c('immutable').Map(),photoBeingTagged:null};},function(o){switch(o.type){case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_DONE:n&&n.$ReactComposerPhotoStore1(o);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_EXTRA_DONE:n&&n.$ReactComposerPhotoStore2(o);break;case c('ReactComposerPhotoActionType').PHOTO_RECOGNITION_STARTED:n&&n.$ReactComposerPhotoStore3(o);break;case c('ReactComposerPhotoActionType').PHOTO_RECOGNITION_FINISHED:n&&n.$ReactComposerPhotoStore4(o);break;case c('ReactComposerPhotoActionType').PHOTO_RECOGNITION_ALL_FINISHED:n&&n.$ReactComposerPhotoStore5(o);break;case c('ReactComposerPhotoActionType').PHOTO_ADD_FACEBOX:n&&n.$ReactComposerPhotoStore6(o);break;case c('ReactComposerPhotoActionType').PHOTO_TAG_XY_PRODUCT:n&&n.$ReactComposerPhotoStore7(o);break;case c('ReactComposerPhotoActionType').PHOTO_TAG_XY:n&&n.$ReactComposerPhotoStore8(o);break;case c('ReactComposerPhotoActionType').PHOTO_TAG_FACEBOX:n&&n.$ReactComposerPhotoStore9(o);break;case c('ReactComposerPhotoActionType').PHOTO_UNTAG_FACEBOX:n&&n.$ReactComposerPhotoStore10(o);break;case c('ReactComposerPhotoActionType').PHOTO_REMOVE:n&&n.$ReactComposerPhotoStore11(o);break;case c('ReactComposerPhotoActionType').PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS:n&&n.$ReactComposerPhotoStore12(o);break;case c('ReactComposerPhotoActionType').PHOTO_SET_BEING_TAGGED:n&&n.$ReactComposerPhotoStore13(o);break;case c('ReactComposerMediaUploadActionType').PREFILL_MEDIAS:n&&n.$ReactComposerPhotoStore14(o);break;case c('ReactComposerPhotoActionType').PHOTO_EDIT_STARTED:n&&n.$ReactComposerPhotoStore15(o);break;case c('ReactComposerPhotoActionType').PHOTO_LOADING_EDIT_FINISHED:n&&n.$ReactComposerPhotoStore16(o);break;case c('ReactComposerPhotoActionType').PHOTO_UNTAG_ALL:n&&n.$ReactComposerPhotoStore17(o);break;default:}});n=this;}m.prototype.getPhotos=function(n){'use strict';return this.getComposerData(n).photos;};m.prototype.isLimitExceeded=function(n,o){'use strict';return this.getPhotos(n).size>o;};m.prototype.getPhoto=function(n,o){'use strict';return this.getComposerData(n).photos.get(o);};m.prototype.isRecognizing=function(n){'use strict';return this.getComposerData(n).photos.some(function(o){return o.isRecognizingFaceboxes;});};m.prototype.getIsSubjectTagged=function(n,o){'use strict';var p=this.getComposerData(n).photos;return p.some(function(q){return this.getIsSubjectTaggedInPhoto(n,q.id,o);}.bind(this));};m.prototype.getIsSubjectTaggedInPhoto=function(n,o,p){'use strict';var q=this.getPhoto(n,o),r=q.faceboxes.some(function(t){return t.taggedSubjectID===p;}),s=q.xyTags.some(function(t){return (t.subject===p);});return r||s;};m.prototype.hasTagsInPhoto=function(n,o){'use strict';var p=this.getPhoto(n,o);if(!p)return false;var q=p.faceboxes.some(function(s){return s.taggedSubjectID!==null;}),r=p.xyTags.size>0;return q||r;};m.prototype.getAllTaggedFaceboxes=function(n){'use strict';var o=this.getPhotos(n),p=[];o.forEach(function(q){p=p.concat(q.faceboxes.toArray());});return p.filter(function(q){return !!q.get('taggedSubjectID');});};m.prototype.getTaggedFaceboxes=function(n,o){'use strict';var p=this.getPhoto(n,o);return !p?null:p.faceboxes.filter(function(q){return !!q.get('taggedSubjectID');}).map(function(q){return q.toObject();}).toArray();};m.prototype.getXYTags=function(n,o){'use strict';var p=this.getPhoto(n,o);return !p?null:p.xyTags.map(function(q){return q.toObject();}).toArray();};m.prototype.getAllXYTags=function(n){'use strict';var o=this.getPhotos(n),p=[];o.forEach(function(q){p=p.concat(q.xyTags.toArray());});return p;};m.prototype.getPhotoBeingTagged=function(n){'use strict';return this.getComposerData(n).photoBeingTagged;};m.prototype.$ReactComposerPhotoStore1=function(n){'use strict';var o=this.validateAction(n,['composerID','uploadID','photoID','thumbSrc','cubestripURI','imageSrc','width','height']),p=o[0],q=o[1],r=o[2],s=o[3],t=o[4],u=o[5],v=o[6],w=o[7];if(t){var x=this.getComposerData(p);if(!c('SphericalPhotoConfig').www_spherical_photo_mmp&&x.photos.size>0){t=null;x.photos=x.photos.map(function(y){return y.set('cubestripURI',null);});}}this.$ReactComposerPhotoStore18(p,r,new j({id:r,uploadID:q,thumbSrc:s,cubestripURI:t,imageSrc:u,width:v,height:w}));this.emitChange(p);};m.prototype.$ReactComposerPhotoStore2=function(n){'use strict';this.$ReactComposerPhotoStore1(n);};m.prototype.$ReactComposerPhotoStore3=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos.update(q,function(s){return (s.set('isRecognizingFaceboxes',true));});this.emitChange(p);};m.prototype.$ReactComposerPhotoStore4=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos.update(q,function(s){return (s.set('isRecognizingFaceboxes',false));});this.emitChange(p);};m.prototype.$ReactComposerPhotoStore5=function(n){'use strict';var o=this.validateAction(n,['composerID','photos']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos.map(function(s){return q.indexOf(s.id)!==-1?s.set('isRecognizingFaceboxes',false):s;});this.emitChange(p);};m.prototype.$ReactComposerPhotoStore6=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID','facebox']),p=o[0],q=o[1],r=o[2],s=this.getComposerData(p),t=r.bestRecognition,u=null,v=null;if(t){u=t.subjectID;v=t.value;}s.photos=s.photos.update(q,function(w){return (w.update('faceboxes',function(x){return (x.set(r.id,new k({id:r.id,photoID:q,x:r.x,y:r.y,top:r.top,left:r.left,width:r.width,height:r.height,croppedURI:r.croppedURI,taggedSubjectID:u,taggedValue:v,isMagicTag:!!u,recognizedSubjectID:u})));}));});this.emitChange(p);};m.prototype.$ReactComposerPhotoStore8=function(n){'use strict';var o=this.validateAction(n,['composerID','value','photoID','source','subject','x','y']),p=o[0],q=o[1],r=o[2],s=o[3],t=o[4],u=o[5],v=o[6],w=this.getComposerData(p);w.photos=w.photos.update(r,function(z){return (z.update('xyTags',function(aa){return (aa.set(t,new l({name:q,photoID:r,source:s,subject:t,x:u,y:v})));}));});this.emitChange(p);};m.prototype.$ReactComposerPhotoStore7=function(n){'use strict';var o=this.validateAction(n,['composerID','value','photoID','source','subject','x','y']),p=o[0],q=o[1],r=o[2],s=o[3],t=o[4],u=o[5],v=o[6],w=this.getComposerData(p);w.photos=w.photos.update(r,function(z){return (z.update('xyTags',function(aa){return (aa.set(t,new l({name:q,photoID:r,source:s,subject:t,x:u,y:v,is_product_tag:true})));}));});this.emitChange(p);};m.prototype.$ReactComposerPhotoStore9=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID','faceboxID','subjectID','value']),p=o[0],q=o[1],r=o[2],s=o[3],t=o[4],u=this.getComposerData(p);u.photos=u.photos.update(q,function(v){return (v.update('faceboxes',function(w){return (w.update(r,function(x){return x.withMutations(function(y){return y.set('taggedSubjectID',s).set('taggedValue',t).set('isMagicTag',false);});}));}));});this.emitChange(p);};m.prototype.$ReactComposerPhotoStore17=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos.update(q,function(s){s=s.set('xyTags',c('immutable').Map());return s;});this.emitChange(p);};m.prototype.$ReactComposerPhotoStore10=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID','faceboxID']),p=o[0],q=o[1],r=o[2],s=this.getComposerData(p);s.photos=s.photos.update(q,function(t){return (t.update('faceboxes',function(u){return (u.update(r,function(v){return v.withMutations(function(w){return w.remove('taggedSubjectID').remove('taggedValue').set('isMagicTag',false);});}));}));});this.emitChange(p);};m.prototype.$ReactComposerPhotoStore11=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos['delete'](q);};m.prototype.$ReactComposerPhotoStore12=function(n){'use strict';var o=this.validateAction(n,['composerID','subjectID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos.map(function(s){return (s.withMutations(function(t){return t.update('faceboxes',function(u){return (u.map(function(v){if(v.taggedSubjectID!==q)return v;return v.withMutations(function(w){return w.remove('taggedSubjectID').remove('taggedValue').set('isMagicTag',false);});}));}).update('xyTags',function(u){return (u.filterNot(function(v){return v.subject===q;}));});}));});this.emitChange(p);};m.prototype.$ReactComposerPhotoStore13=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photoBeingTagged=q;this.emitChange(p);};m.prototype.$ReactComposerPhotoStore14=function(n){'use strict';var o=this.validateAction(n,['composerID','medias']),p=o[0],q=o[1];q.forEach(function(r){this.$ReactComposerPhotoStore18(p,r.photoID,new j({id:r.photoID,uploadID:r.uploadID,thumbSrc:r.thumbSrc,imageSrc:r.imageSrc,width:r.width,height:r.height,cubestripURI:r.cubestripURI}));}.bind(this));this.emitChange(p);};m.prototype.$ReactComposerPhotoStore15=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos.update(q,function(s){return (s.set('isLoadingPhotoEdit',true));});this.emitChange(p);};m.prototype.$ReactComposerPhotoStore16=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos.update(q,function(s){return (s.set('isLoadingPhotoEdit',false));});this.emitChange(p);};m.prototype.$ReactComposerPhotoStore18=function(n,o,p){'use strict';var q=this.getComposerData(n);q.photos=q.photos.set(o,p);};f.exports=new m();}),null);
__d('ReactComposerPhotoActions',['ReactComposerPhotoActionType','ReactComposerDispatcher','ReactComposerPhotoStore'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('ReactComposerPhotoStore');var h={startRecognizing:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,photoID:k,type:c('ReactComposerPhotoActionType').PHOTO_RECOGNITION_STARTED});},finishRecognizingPhoto:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoActionType').PHOTO_RECOGNITION_FINISHED,photoID:k});},finishRecognizing:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoActionType').PHOTO_RECOGNITION_ALL_FINISHED,photos:k,facerecWaterfallEvent:l});},addFacebox:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoActionType').PHOTO_ADD_FACEBOX,photoID:k,facebox:l});},tagXY:function i(j,k,l,m,n,o,p){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoActionType').PHOTO_TAG_XY,value:l,photoID:k,source:m,subject:n,x:o,y:p});},tagXYProduct:function i(j,k,l,m,n,o,p){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoActionType').PHOTO_TAG_XY_PRODUCT,value:l,photoID:k,source:m,subject:n,x:o,y:p});},tagFacebox:function i(j,k,l,m,n){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoActionType').PHOTO_TAG_FACEBOX,photoID:k,faceboxID:l,subjectID:m,value:n});},untagFacebox:function i(j,k,l,m){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoActionType').PHOTO_UNTAG_FACEBOX,photoID:k,faceboxID:l,subjectID:m});},removePhoto:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoActionType').PHOTO_REMOVE,photoID:k,uploadID:l});},untagSubjectFromAllPhotos:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoActionType').PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS,subjectID:k});},untagAllForPhoto:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoActionType').PHOTO_UNTAG_ALL,photoID:k});},startPhotoEdit:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,photoID:k,type:c('ReactComposerPhotoActionType').PHOTO_EDIT_STARTED});},finishPhotoEdit:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoActionType').PHOTO_EDIT_FINISHED});},setPhotoBeingTagged:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,photoID:k,type:c('ReactComposerPhotoActionType').PHOTO_SET_BEING_TAGGED});},finishLoadingPhotoEdit:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPhotoActionType').PHOTO_LOADING_EDIT_FINISHED,photoID:k});}};f.exports=h;}),null);
__d('ReactComposerPhotoUploadState',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={PHOTO_UPLOAD_ENQUEUED:'PHOTO_UPLOAD_ENQUEUED',PHOTO_UPLOAD_RESIZE_STARTED:'PHOTO_UPLOAD_RESIZE_STARTED',PHOTO_UPLOAD_RESIZE_DONE:'PHOTO_UPLOAD_RESIZE_DONE',PHOTO_UPLOAD_RESIZE_FAILED:'PHOTO_UPLOAD_RESIZE_FAILED',PHOTO_UPLOAD_UPLOADING:'PHOTO_UPLOAD_UPLOADING',PHOTO_UPLOAD_DONE:'PHOTO_UPLOAD_DONE',PHOTO_UPLOAD_FAILED:'PHOTO_UPLOAD_FAILED'};}),null);
__d('ReactComposerMediaUploadActions',['ReactComposerDispatcher','ReactComposerMediaUploadType','ReactComposerMediaPrefillConfig','ReactComposerPhotoActions','ReactComposerPhotoUploadState','ReactComposerMediaUploadActionType','immutable'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={enqueue:function i(j,k,l,m,n,o,p){var q=arguments.length<=7||arguments[7]===undefined?[]:arguments[7],r=arguments.length<=8||arguments[8]===undefined?false:arguments[8];c('ReactComposerDispatcher').dispatch({composerID:j,mediaType:o,uploadID:k,type:n,filename:l,fileURL:p?p:'',index:m,xyTags:q,isSpherical:r});},startResizing:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,loggingData:l,uploadID:k,type:c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_STARTED});},progressResizing:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,uploadID:k,type:c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_PROGRESS,progress:l});},doneResizing:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,loggingData:l,uploadID:k,type:c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_DONE});},failResizing:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,loggingData:l,uploadID:k,type:c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_FAILED});},startUploading:function i(j,k,l,m){c('ReactComposerDispatcher').dispatch({composerID:j,uploadID:k,type:m,fileUpload:l});},progressUploading:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,uploadID:k,type:c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_PROGRESS,progress:l});},isSpherical:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,uploadID:k,type:c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_IS_SPHERICAL,isSpherical:l});},doneUploading:function i(j,k,l,m,n,o,p,q,r,s,t,u,v){c('ReactComposerDispatcher').dispatch({composerID:j,uploadID:k,fileUpload:m,mediaLocation:r,timeToUpload:n,type:l,photoID:o,thumbSrc:p,originalPhotoID:q,cubestripURI:s,imageSrc:t,width:u,height:v});},doneUploadingExtra:function i(j,k,l,m,n,o,p,q){c('ReactComposerDispatcher').dispatch({type:c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_EXTRA_DONE,composerID:j,uploadID:k,photoID:l,thumbSrc:m,cubestripURI:n,imageSrc:o,width:p,height:q});},failUploading:function i(j,k,l,m,n,o){c('ReactComposerDispatcher').dispatch({composerID:j,uploadID:k,type:o,error:n,fileUpload:l,timeToUpload:m});},removeAllPhotoUploads:function i(j,k){k.forEach(function(l){return this.removePhotoAndPhotoUpload(j,l);}.bind(this));},removePhotoAndPhotoUpload:function i(j,k){if(k.state===c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_DONE){c('ReactComposerPhotoActions').removePhoto(j,k.photoID,k.id);}else this.removeMediaUpload(j,k.id);},removeMediaUpload:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_REMOVE,uploadID:k});},mediaMoved:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_MOVED,from:k,to:l});},resizerUnavailable:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZER_UNAVAILABLE});},photosSelect:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,method:l,numPhotos:k,type:c('ReactComposerMediaUploadActionType').PHOTOS_SELECT});},retryMediaUpload:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:k});},reorderMedias:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,mediaIDs:k,type:c('ReactComposerMediaUploadActionType').REORDER_MEDIAS});},prefillMedias:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,medias:k,type:c('ReactComposerMediaUploadActionType').PREFILL_MEDIAS});},setVideoThumbnail:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerMediaUploadActionType').VIDEO_SET_THUMBNAIL,thumbSrc:l,uploadID:k});}};f.exports=h;}),null);
__d('ReactComposerPhotoUpload',['immutable'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('immutable').Record({id:null,error:{},filename:null,fileUpload:null,fileURL:null,photoID:null,originalPhotoID:null,progress:null,state:null,xyTags:[],mediaType:null,isSpherical:false,canShowSphericalSingletonNux:false,thumbSrc:null,width:null,height:null});}),null);
__d('ReactComposerMediaUploadStore',['ReactComposerDispatcher','ReactComposerMediaUploadType','ReactComposerStoreBase','ReactComposerMediaUploadActionType','ReactComposerPhotoUploadState','ReactComposerPhotoActionType','ReactComposerPhotoStore','ReactComposerPhotoUpload','ReactComposerVideoXUploader','immutable','PhotoEditorSaveStates','SphericalPhotoConfig'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {removedIDs:c('immutable').Set(),uploads:c('immutable').List(),uploadsByID:c('immutable').Map(),videoUploader:null};},function(l){if(k&&k.$ReactComposerMediaUploadStore1(l))return;switch(l.type){case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_ENQUEUED:case c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_ENQUEUED:k&&k.$ReactComposerMediaUploadStore2(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_STARTED:k&&k.$ReactComposerMediaUploadStore3(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_PROGRESS:k&&k.$ReactComposerMediaUploadStore4(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_DONE:k&&k.$ReactComposerMediaUploadStore5(l,c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_RESIZE_DONE);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_FAILED:k&&k.$ReactComposerMediaUploadStore5(l,c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_RESIZE_FAILED);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_UPLOADING:case c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_UPLOADING:k&&k.$ReactComposerMediaUploadStore6(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_IS_SPHERICAL:k&&k.$ReactComposerMediaUploadStore7(l);break;case c('ReactComposerMediaUploadActionType').VIDEO_SET_THUMBNAIL:k&&k.$ReactComposerMediaUploadStore8(l);break;case c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_PROGRESS:k&&k.$ReactComposerMediaUploadStore4(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_DONE:case c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_DONE:c('ReactComposerDispatcher').waitFor([c('ReactComposerPhotoStore').getDispatchToken()]);k&&k.$ReactComposerMediaUploadStore9(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_EXTRA_DONE:c('ReactComposerDispatcher').waitFor([c('ReactComposerPhotoStore').getDispatchToken()]);k&&k.$ReactComposerMediaUploadStore10(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_FAILED:case c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_FAILED:k&&k.$ReactComposerMediaUploadStore11(l);break;case c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_REMOVE:case c('ReactComposerPhotoActionType').PHOTO_REMOVE:k&&k.$ReactComposerMediaUploadStore12(l);break;case c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_MOVED:k&&k.$ReactComposerMediaUploadStore13(l);break;case c('ReactComposerMediaUploadActionType').PREFILL_MEDIAS:k&&k.$ReactComposerMediaUploadStore14(l);break;case c('ReactComposerMediaUploadActionType').REORDER_MEDIAS:k&&k.$ReactComposerMediaUploadStore15(l);break;default:}});k=this;}j.prototype.getMediaUploadExists=function(k,l){'use strict';var m=this.getComposerData(k);return m.uploadsByID.get(l)!==undefined;};j.prototype.getMediaUpload=function(k,l){'use strict';return this.$ReactComposerMediaUploadStore16(this.getComposerData(k),l);};j.prototype.getUploadIndex=function(k,l){'use strict';return this.$ReactComposerMediaUploadStore17(this.getComposerData(k),l);};j.prototype.getUploads=function(k){'use strict';return this.getComposerData(k).uploads;};j.prototype.getUploadsOfType=function(k,l){'use strict';var m=this.getComposerData(k).uploads.filter(function(n){return (n.mediaType===l);});return m;};j.prototype.getUploadsCount=function(k,l){'use strict';if(!l)return this.getComposerData(k).uploads.size;return this.getComposerData(k).uploads.filter(function(m){return m.mediaType===l;}).size;};j.prototype.getSphericalPhotoCount=function(k){'use strict';return this.getUploadsOfType(k,c('ReactComposerMediaUploadType').PHOTO).filter(function(l){return (l.isSpherical);}).size;};j.prototype.getNonsphericalPhotoCount=function(k){'use strict';return this.getUploadsOfType(k,c('ReactComposerMediaUploadType').PHOTO).filter(function(l){return (!l.isSpherical);}).size;};j.prototype.getHasUploadBeenRemoved=function(k,l){'use strict';var m=this.getComposerData(k);return m.removedIDs.has(l);};j.prototype.isUploading=function(k){'use strict';return this.getComposerData(k).uploads.some(function(l){return (l.state!==c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_RESIZE_FAILED&&l.state!==c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_DONE&&l.state!==c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_FAILED);});};j.prototype.getTotalNumberOfStickersOnPhotos=function(k){'use strict';var l=0;this.getComposerData(k).uploads.forEach(function(m){var n=m.get('originalPhotoID');if(n)l+=c('PhotoEditorSaveStates').getTotalNumOfStickersOnPhoto(n);});return l;};j.prototype.getVideoUploader=function(k,l){'use strict';var m=this.getComposerData(k);if(!m.videoUploader){var n=new (c('ReactComposerVideoXUploader'))({composerID:k,uploaderParams:l});m.videoUploader=n;}return m.videoUploader;};j.prototype.$ReactComposerMediaUploadStore2=function(k){'use strict';var l=this.validateAction(k,['composerID','mediaType','uploadID','filename','fileURL','index','xyTags','isSpherical']),m=l[0],n=l[1],o=l[2],p=l[3],q=l[4],r=l[5],s=l[6],t=l[7];this.$ReactComposerMediaUploadStore18(m,r,new (c('ReactComposerPhotoUpload'))({id:o,mediaType:n,state:c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_ENQUEUED,filename:p,fileURL:q,xyTags:s,isSpherical:t}));if(!c('SphericalPhotoConfig').www_spherical_photo_mmp)this.$ReactComposerMediaUploadStore19(m);this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore19=function(k){'use strict';var l=this.getUploads(k);if(l.size>1)l.forEach(function(m){this.$ReactComposerMediaUploadStore20(this.getComposerData(k),m.id,function(n){if(n.isSpherical)n=n.set('canShowSphericalSingletonNux',true);return n.set('isSpherical',false);});}.bind(this));};j.prototype.$ReactComposerMediaUploadStore3=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID']),m=l[0],n=l[1],o=this.getComposerData(m);this.$ReactComposerMediaUploadStore20(o,n,function(p){return p.withMutations(function(q){return q.set('state',c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_RESIZE_STARTED).set('progress',0);});});this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore6=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID','fileUpload']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);this.$ReactComposerMediaUploadStore20(p,n,function(q){return q.withMutations(function(r){return r.set('state',c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_UPLOADING).set('progress',0).set('fileUpload',o);});});this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore4=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID','progress']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);this.$ReactComposerMediaUploadStore20(p,n,function(q){return q.set('progress',o);});this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore9=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID','photoID']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);this.$ReactComposerMediaUploadStore20(p,n,function(q){return q.withMutations(function(r){return r.set('state',c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_DONE).set('photoID',o).set('originalPhotoID',k.originalPhotoID||o).remove('fileUpload');});});if(!k.cubestripURI)this.$ReactComposerMediaUploadStore20(p,n,function(q){return q.set('isSpherical',false);});this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore10=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID','photoID','cubestripURI']),m=l[0],n=l[1],o=l[2],p=l[3],q=this.getUploadsCount(m);this.$ReactComposerMediaUploadStore18(m,q,new (c('ReactComposerPhotoUpload'))({id:n,photoID:o,mediaType:c('ReactComposerMediaUploadType').PHOTO,originalPhotoID:o,state:c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_DONE,isSpherical:Boolean(p)}));this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore7=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID','isSpherical']),m=l[0],n=l[1],o=l[2];this.$ReactComposerMediaUploadStore20(this.getComposerData(m),n,function(p){return p.set('isSpherical',o);});if(!c('SphericalPhotoConfig').www_spherical_photo_mmp)this.$ReactComposerMediaUploadStore19(m);};j.prototype.$ReactComposerMediaUploadStore11=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID']),m=l[0],n=l[1],o=this.getComposerData(m);this.$ReactComposerMediaUploadStore20(o,n,function(p){return p.withMutations(function(q){return q.set('state',c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_FAILED).set('error',k.error);});});this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore12=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID']),m=l[0],n=l[1],o=this.getComposerData(m),p=this.$ReactComposerMediaUploadStore17(o,n),q=o.uploads.get(p);if(q.mediaType==c('ReactComposerMediaUploadType').VIDEO)o.videoUploader.cancelUpload(n);o.uploads=o.uploads['delete'](p);o.uploadsByID=o.uploadsByID['delete'](n);for(var r=p;r<o.uploads.size;r++){var s=o.uploads.get(r).id;o.uploadsByID=o.uploadsByID.set(s,r);}o.removedIDs=o.removedIDs.add(n);this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore8=function(k){'use strict';var l=this.validateAction(k,['composerID','uploadID','thumbSrc']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);this.$ReactComposerMediaUploadStore20(p,n,function(q){return q.set('thumbSrc',o);});this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore5=function(k,l){'use strict';var m=this.validateAction(k,['composerID','uploadID']),n=m[0],o=m[1];this.$ReactComposerMediaUploadStore21(n,o,l);this.emitChange(n);};j.prototype.$ReactComposerMediaUploadStore13=function(k){'use strict';var l=this.validateAction(k,['composerID','from','to']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);p.uploads=p.uploads.splice(n,1).splice(o,0,p.uploads.get(n));p.uploadsByID=p.uploads.groupBy(function(q,r){return r;}).toMap().map(function(q){return q.first().id;}).flip();this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore15=function(k){'use strict';var l=this.validateAction(k,['composerID','mediaIDs']),m=l[0],n=l[1],o=this.getComposerData(m);o.uploads=n.map(function(p){return this.$ReactComposerMediaUploadStore16(o,p);}.bind(this));o.uploadsByID=o.uploads.groupBy(function(p,q){return q;}).toMap().map(function(p){return p.first().id;}).flip();this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore14=function(k){'use strict';var l=this.validateAction(k,['composerID','medias']),m=l[0],n=l[1];n.forEach(function(o,p){this.$ReactComposerMediaUploadStore18(m,p,new (c('ReactComposerPhotoUpload'))({id:o.uploadID,photoID:o.photoID,mediaType:o.mediaType,originalPhotoID:o.photoID,state:c('ReactComposerPhotoUploadState').PHOTO_UPLOAD_DONE,thumbSrc:o.thumbSrc,fileURL:o.fileURL,filename:o.filename,isSpherical:Boolean(o.cubestripURI)}));}.bind(this));this.emitChange(m);};j.prototype.$ReactComposerMediaUploadStore21=function(k,l,m){'use strict';var n=this.getComposerData(k);this.$ReactComposerMediaUploadStore20(n,l,function(o){return o.set('state',m);});};j.prototype.$ReactComposerMediaUploadStore20=function(k,l,m){'use strict';var n=this.$ReactComposerMediaUploadStore22(k,l),o=n[0],p=n[1];k.uploads=k.uploads.set(p,m(o,p));};j.prototype.$ReactComposerMediaUploadStore22=function(k,l){'use strict';var m=this.$ReactComposerMediaUploadStore17(k,l);return [k.uploads.get(m),m];};j.prototype.$ReactComposerMediaUploadStore17=function(k,l){'use strict';var m=k.uploadsByID.get(l);if(m===undefined)throw new Error('Upload '+l+' hasn\'t been registered');return m;};j.prototype.$ReactComposerMediaUploadStore16=function(k,l){'use strict';var m=this.$ReactComposerMediaUploadStore17(k,l);return k.uploads.get(m);};j.prototype.$ReactComposerMediaUploadStore1=function(k){'use strict';if(c('ReactComposerMediaUploadActionType')[k.type]){var l=k.composerID,m=k.uploadID;if(m==null)return false;return this.getHasUploadBeenRemoved(l,m);}return false;};j.prototype.$ReactComposerMediaUploadStore18=function(k,l,m){'use strict';var n=this.getComposerData(k);n.uploads=n.uploads.splice(l,0,m);for(var o=l;o<n.uploads.size;o++){var p=n.uploads.get(o).id;n.uploadsByID=n.uploadsByID.set(p,o);}this.$ReactComposerMediaUploadStore23(k,m);};j.prototype.$ReactComposerMediaUploadStore23=function(k,l){'use strict';if(l.mediaType==c('ReactComposerMediaUploadType').PHOTO){var m=new Image();m.onload=function(){var o=this.getComposerData(k);this.$ReactComposerMediaUploadStore20(o,l.id,function(p){return p.withMutations(function(q){return q.set('height',m.height).set('width',m.width);});});this.emitChange(k);}.bind(this);m.src=l.fileURL;}else if(l.mediaType==c('ReactComposerMediaUploadType').VIDEO){var n=document.createElement('video');n.onloadedmetadata=function(){var o=this.getComposerData(k);this.$ReactComposerMediaUploadStore20(o,l.id,function(p){return p.withMutations(function(q){return q.set('height',n.videoHeight).set('width',n.videoWidth);});});this.emitChange(k);}.bind(this);n.src=l.fileURL;}};f.exports=new j();}),null);
__d('MultimediaUploadProcessingDialog.react',['fbt','React','XUIDialog.react','XUIDialogTitle.react','XUIDialogBody.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return m=(n=j.constructor).call.apply(n,[this].concat(p)),this.state={dialogShown:true},this.$MultimediaUploadProcessingDialog1=function(){return this.props.numOfVideos===1?h._("The video in your post is being processed. We'll send you a notification when it's done and your post is ready to view."):h._("The videos in your post are being processed. We'll send you a notification when they're done and your post is ready to view.");}.bind(this),this.$MultimediaUploadProcessingDialog2=function(){return h._("Processing Videos");},m;}l.prototype.componentWillReceiveProps=function(m){if(m.show)this.setState({dialogShown:true});};l.prototype.render=function(){return (c('React').createElement(c('XUIDialog.react'),{shown:this.state.dialogShown,width:400},c('React').createElement(c('XUIDialogTitle.react'),null,this.$MultimediaUploadProcessingDialog2()),c('React').createElement(c('XUIDialogBody.react'),null,this.$MultimediaUploadProcessingDialog1())));};l.propTypes={numOfVideos:k.number.isRequired};f.exports=l;}),null);
__d('ReactComposerMediaFilterUtils',['ComposerXNativeAudioUploadsConfig','VideoUploadConfig'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={hasVideos:function i(j){return this.filterVideos(j).length>0;},hasAudioFiles:function i(j){return this.filterAudioFiles(j).length>0;},filterVideos:function i(j){return this.filterFileOfSupportedType(j,c('VideoUploadConfig').videoExtensions);},filterAudioFiles:function i(j){return this.filterFileOfSupportedType(j,c('ComposerXNativeAudioUploadsConfig').audioExtensions);},filterFileOfSupportedType:function i(j,k){return j.filter(function(l){var m=l.indexOf('.')!==-1?l.split('.').pop().toLowerCase():'';return k[m];});}};f.exports=h;}),null);
__d('VideoUploadFile',['fileSlice','ImageExtensions','VideoCreatorProductType','VideoUploadFeatureDetector'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l){'use strict';this.$VideoUploadFile1=i;this.$VideoUploadFile2=j;this.$VideoUploadFile3=k;this.$VideoUploadFile4=l;}h.fromFile=function(i){'use strict';var j=h.getExtensionFromFileName(i.name);return new this(null,i,i.size,j);};h.fromFileInput=function(i){'use strict';var j=null,k=null,l=h.getExtensionFromFileInput(i);if(c('VideoUploadFeatureDetector').supportsFileAPI()&&i.files.length){j=i.files[0];k=j.size;}return new this(i,j,k,l);};h.prototype.getFileInput=function(){'use strict';return this.$VideoUploadFile1;};h.prototype.getFile=function(){'use strict';return this.$VideoUploadFile2;};h.prototype.getSize=function(){'use strict';return this.$VideoUploadFile3;};h.prototype.getExtension=function(){'use strict';return this.$VideoUploadFile4;};h.prototype.getCreatorProduct=function(){'use strict';if(this.$VideoUploadFile4===c('ImageExtensions').GIF)return c('VideoCreatorProductType').ANIMATED_GIFS;return c('VideoCreatorProductType').CORE_VIDEOS;};h.prototype.getChunk=function(i,j){'use strict';return this.$VideoUploadFile2?c('fileSlice').call(this.$VideoUploadFile2,i,j):null;};h.getExtensionFromFileInput=function(i){'use strict';return this.getExtensionFromFileName(i.value);};h.getExtensionFromFileName=function(i){'use strict';return i.indexOf('.')!=-1?i.split('.').pop().toLowerCase():'';};f.exports=h;}),null);
__d('VideoUploadProgressBar',['cx','CSS','VideoUploadFeatureDetector'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){'use strict';this.$VideoUploadProgressBar1=j.progress_bar;this.$VideoUploadProgressBar2=j.throbber;this.$VideoUploadProgressBar3=j.uploader;this.$VideoUploadProgressBar4=j.start_margin;this.$VideoUploadProgressBar5=j.start_delay;this.$VideoUploadProgressBar6=j.end_margin;this.$VideoUploadProgressBar7=j.end_delay;this.$VideoUploadProgressBar8=j.progress_bar_label;this.$VideoUploadProgressBar9();}i.prototype.reset=function(){'use strict';this.$VideoUploadProgressBar1.setPosition(0);};i.prototype.getRoot=function(){'use strict';return this.$VideoUploadProgressBar1.getRoot();};i.computeProgress=function(j,k,l,m,n){'use strict';var o=Math.min(j+k,l);return o/l*(100-m-n)+m;};i.prototype.$VideoUploadProgressBar9=function(){'use strict';if(c('VideoUploadFeatureDetector').supportsFileAPI()){this.$VideoUploadProgressBar3.subscribe('upload-requested',this.$VideoUploadProgressBar10.bind(this));this.$VideoUploadProgressBar3.subscribe('upload-progressed',this.$VideoUploadProgressBar11.bind(this));this.$VideoUploadProgressBar3.subscribe('online',this.$VideoUploadProgressBar12.bind(this));this.$VideoUploadProgressBar3.subscribe('offline',this.$VideoUploadProgressBar13.bind(this));}else this.$VideoUploadProgressBar3.subscribe('upload-requested',this.$VideoUploadProgressBar14.bind(this));};i.prototype.$VideoUploadProgressBar10=function(event){'use strict';c('CSS').show(this.$VideoUploadProgressBar1.getRoot());c('CSS').removeClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a");this.$VideoUploadProgressBar1.setTarget(this.$VideoUploadProgressBar4,this.$VideoUploadProgressBar5);this.$VideoUploadProgressBar15(0);};i.prototype.$VideoUploadProgressBar15=function(j){'use strict';if(this.$VideoUploadProgressBar8)this.$VideoUploadProgressBar1.changeLabel(''+j.toFixed(1)+'%');};i.prototype.$VideoUploadProgressBar11=function(event,j){'use strict';c('CSS').removeClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a");var k=i.computeProgress(j.start_offset,j.sent_bytes,j.file_size,this.$VideoUploadProgressBar4,this.$VideoUploadProgressBar6);this.$VideoUploadProgressBar1.setPosition(k);this.$VideoUploadProgressBar15(k);if(k>=100-this.$VideoUploadProgressBar6){this.$VideoUploadProgressBar1.setTarget(100,this.$VideoUploadProgressBar7);this.$VideoUploadProgressBar15(100);}};i.prototype.$VideoUploadProgressBar12=function(event){'use strict';c('CSS').removeClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a");};i.prototype.$VideoUploadProgressBar13=function(event){'use strict';c('CSS').addClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a");};i.prototype.$VideoUploadProgressBar14=function(event){'use strict';c('CSS').show(this.$VideoUploadProgressBar2);};f.exports=i;}),null);
__d('VideoUploadLogger',['Banzai'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){this._source=i.source;this._waterfallID=i.waterfall_id;this._targetID=i.target_id;this._delay=i.delay;this._times=[];this._isChunkedUpload=i.is_chunked_upload;this._actorID=i.actor_id;this._composerEntryPointRef=i.composer_entry_point_ref;this._isRemoteUpload=i.is_remote_upload;}Object.assign(h,{BANZAI_GK:'videos',BANZAI_ROUTE:'video_waterfall',SOURCE_SIMPLE:'simple',SOURCE_COMPOSER:'composer',EVENT_STARTED_GENERATE_THUMBNAILS:'upload.client.started_generate_thumbnails',EVENT_FINISHED_GENERATE_THUMBNAILS:'upload.client.finished_generate_thumbnails',EVENT_SELECTED_CUSTOM_THUMBNAIL:'upload.client.selected_custom_thumbnail',EVENT_VIDEO_DIMENSIONS_UNREADABLE:'upload.client.video_dimensions_unreadable',EVENT_REPLACE_VIDEO:'upload.client.replace_video',EVENT_STARTED_FLOW:'upload.client.started_flow',EVENT_FINISHED_FLOW:'upload.client.finished_flow',EVENT_FAILED_FLOW:'upload.client.failed_flow',EVENT_CANCELED_FLOW:'upload.client.canceled_flow',EVENT_RESIGNED_FLOW:'upload.client.resigned_flow',EVENT_REQUESTED_UPLOADING:'upload.client.requested_uploading',EVENT_INVALIDATED_UPLOADING:'upload.client.invalidated_uploading',EVENT_STARTED_UPLOADING:'upload.client.started_uploading',EVENT_PROGRESS_UPLOADING_START_REQUEST:'upload.client.progress_uploading_start_request',EVENT_FINISHED_UPLOADING:'upload.client.finished_uploading',EVENT_CANCELED_UPLOADING:'upload.client.canceled_uploading',EVENT_ABANDONED_UPLOADING:'upload.client.abandoned_uploading',EVENT_FAILED_UPLOADING:'upload.client.failed_uploading',EVENT_STARTED_SENDING_BYTES:'upload.client.started_sending_bytes',EVENT_FINISHED_SENDING_BYTES:'upload.client.finished_sending_bytes',EVENT_CANCELED_SENDING_BYTES:'upload.client.canceled_sending_bytes',EVENT_FAILED_SENDING_BYTES:'upload.client.failed_sending_bytes',EVENT_STARTED_START_REQUEST:'upload.client.started_sending_start_request',EVENT_FINISHED_START_REQUEST:'upload.client.finished_sending_start_request',EVENT_FAILED_START_REQUEST:'upload.client.failed_sending_start_request',EVENT_STARTED_POST_REQUEST:'upload.client.started_sending_post_request',EVENT_FINISHED_POST_REQUEST:'upload.client.finished_sending_post_request',EVENT_FAILED_POST_REQUEST:'upload.client.failed_sending_post_request',EVENT_STARTED_SENDING_CHUNK_BYTES:'upload.client.started_sending_chunk_bytes',EVENT_FINISHED_SENDING_CHUNK_BYTES:'upload.client.finished_sending_chunk_bytes',EVENT_CANCELED_SENDING_CHUNK_BYTES:'upload.client.canceled_sending_chunk_bytes',EVENT_FAILED_SENDING_CHUNK_BYTES:'upload.client.failed_sending_chunk_bytes',EVENT_TIMEOUT_SENDING_CHUNK_BYTES:'upload.client.timeout_sending_chunk_bytes',EVENT_ENCODING_START_OBSERVED:'encode.client.encoding_start_observed',EVENT_ENCODING_SUCCESS_OBSERVED:'encode.client.encoding_success_observed',EVENT_ENCODING_FAIL_OBSERVED:'encode.client.encoding_fail_observed',EVENT_RECEIVED_RESPONSE:'upload.client.received_response'});Object.assign(h.prototype,{logEvent:function i(event,j){var k=babelHelpers['extends']({},j);if(k.elapsed_time==null)if(event.indexOf('started')!==-1){this._times[event]=Date.now();}else if(event.indexOf('finished')!==-1){k.elapsed_time=this._computeElapsedTime(event,'finished');}else if(event.indexOf('canceled')!==-1){k.elapsed_time=this._computeElapsedTime(event,'canceled');}else if(event.indexOf('failed')!==-1)k.elapsed_time=this._computeElapsedTime(event,'failed');k.event=event;k.source=this._source;k.waterfall_id=this._waterfallID;k.target_id=this._targetID;k.is_chunked_upload=this._isChunkedUpload;k.actor_id=this._actorID;k.composer_entry_point_ref=this._composerEntryPointRef;k.is_remote_upload=this._isRemoteUpload;c('Banzai').post(h.BANZAI_ROUTE,k,{delay:this._delay});},_computeElapsedTime:function i(event,j){var k=event.replace(j,'started'),l=this._times[k];return l?Date.now()-l:null;}});f.exports=h;}),null);
__d('VideoUploadCrashMonitor',['Bandicoot','VideoUploadLogger'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('Bandicoot'));i=h&&h.prototype;function j(k,l,m,n,o,p,q,r){'use strict';i.constructor.call(this,'VideoUploadSession');this.$VideoUploadCrashMonitor1={waterfallID:k,actorID:l,source:m,targetID:n,loggingDelay:o,supportsChunking:p,composerEntryPointRef:q,flowStarted:r};}j.prototype.flowStarted=function(){'use strict';this.$VideoUploadCrashMonitor1.flowStarted=true;};j.prototype.getCrashTimeData=function(){'use strict';return this.$VideoUploadCrashMonitor1;};j.prototype.logCrash=function(k,l,m){'use strict';if(!l.waterfallID)return;var n=new (c('VideoUploadLogger'))({actor_id:l.actorID,source:l.source,waterfall_id:l.waterfallID,target_id:l.targetID,delay:l.loggingDelay,is_chunked_upload:l.supportsChunking,composer_entry_point_ref:l.composerEntryPointRef}),o={error:'Crash Detected',error_description:'Detected video upload did not complete due to a crash'};n.logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,o);if(l.flowStarted)n.logEvent(c('VideoUploadLogger').EVENT_RESIGNED_FLOW,{});};f.exports=j;}),null);
__d('VideoUploadFileValidator',['fbt','errorCode','ErrorDialog','JSXDOM'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=[1363019,1363020,1363021,1363022,1363023,1363024,1363025,1363026,1363027,1363030,1363031,1363032,1363033,1363038,1363039,1363040,1363048],k=['VIDEO__INVALID_GUIDE_DATA'];function l(m){'use strict';this.$VideoUploadFileValidator1=m;}l.prototype.validate=function(m,n){'use strict';return this.$VideoUploadFileValidator2(m)&&this.$VideoUploadFileValidator3(m)&&this.$VideoUploadFileValidator4(n);};l.prototype.getValidationErrorMessage=function(m,n){'use strict';return this.$VideoUploadFileValidator5(m)||this.$VideoUploadFileValidator6(m)||this.$VideoUploadFileValidator7(n);};l.canReplaceVideoForError=function(m){'use strict';if(!m)return true;if(k.indexOf(m)>-1)return false;if(j.indexOf(m)>-1)return true;return false;};l.prototype.$VideoUploadFileValidator2=function(m){'use strict';var n=this.$VideoUploadFileValidator5(m);if(n){c('ErrorDialog').show(n.summary,n.description);return false;}else return true;};l.prototype.$VideoUploadFileValidator5=function(m){'use strict';if(this.$VideoUploadFileValidator1.extensions[m.getExtension()])return;var n="http://www.facebook.com/help/"+"?faq=218673814818907#What-formats-of-video-files-can-I-upload?",o=c('JSXDOM').a({href:n},h._("recommended formats"));return {summary:h._("Unsupported File Format"),description:h._("Sorry, the file you selected is in a format that we don't support. Please use one of our {link} for video files.",[h.param('link',o)])};};l.prototype.$VideoUploadFileValidator3=function(m){'use strict';var n=this.$VideoUploadFileValidator6(m);if(n){c('ErrorDialog').show(n.summary,n.description);return false;}else return true;};l.prototype.$VideoUploadFileValidator6=function(m){'use strict';var n;if(m.getSize()===null)return;if(m.getSize()<this.$VideoUploadFileValidator1.minSize)n=this.$VideoUploadFileValidator8();if(m.getSize()>this.$VideoUploadFileValidator1.maxSize)n=this.$VideoUploadFileValidator9();return n;};l.prototype.$VideoUploadFileValidator8=function(){'use strict';var m=Math.round(this.$VideoUploadFileValidator1.minSize/1024);return {summary:h._("Video File Too Small"),description:h._("The video file you tried to upload is too small. The minimum size for a video file is {min-size} KB. Please try again with a larger file.",[h.param('min-size',m)])};};l.prototype.$VideoUploadFileValidator9=function(){'use strict';var m=this.$VideoUploadFileValidator1.maxSize/1024/1024;return {summary:h._("Video File Too Large"),description:h._("The video file you tried to upload is too large. The maximum size for a video file is {max-size} MB. Please try again with a smaller file.",[h.param('max-size',m)])};};l.prototype.$VideoUploadFileValidator4=function(m){'use strict';var n=this.$VideoUploadFileValidator7(m);if(n){c('ErrorDialog').show(n.summary,n.description);return false;}else return true;};l.prototype.$VideoUploadFileValidator7=function(m){'use strict';var n;if(!m)return;var o=m.format.duration;if(o>this.$VideoUploadFileValidator1.maxLength)n=this.$VideoUploadFileValidator10();if(o<this.$VideoUploadFileValidator1.minLength)n=this.$VideoUploadFileValidator11();if(!m.streams.primaryVideo&&m.streams.primaryAudio)n=this.$VideoUploadFileValidator12();if(m.streams.primaryVideo.width<this.$VideoUploadFileValidator1.minWidth)n=this.$VideoUploadFileValidator13();if(m.streams.primaryVideo.height<this.$VideoUploadFileValidator1.minHeight)n=this.$VideoUploadFileValidator14();return n;};l.prototype.$VideoUploadFileValidator10=function(){'use strict';if(this.$VideoUploadFileValidator1.source==='profile_video'){return {summary:h._("Profile Video Duration Too Long"),description:h._("The maximum length is {max-length} seconds. Please upload a shorter video.",[h.param('max-length',this.$VideoUploadFileValidator1.maxLength)])};}else return {summary:h._("Video Duration Too Long"),description:h._("The duration of the video you tried to upload is too long. The maximum duration for a video is {max-length} minutes. Please upload a shorter video.",[h.param('max-length',Math.round(this.$VideoUploadFileValidator1.maxLength/60))])};};l.prototype.$VideoUploadFileValidator11=function(){'use strict';return {summary:h._("Video File Too Short"),description:h._({"second":"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} second. Please upload a longer video.","seconds":"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} seconds. Please upload a longer video."},[h.param('min-length',this.$VideoUploadFileValidator1.minLength),h['enum'](this.$VideoUploadFileValidator1.minLength===1?'second':'seconds',{second:'second',seconds:'seconds'})])};};l.prototype.$VideoUploadFileValidator12=function(){'use strict';var m="http://www.facebook.com/help/"+"?faq=218673814818907#What-formats-of-video-files-can-I-upload?",n=c('JSXDOM').a({href:m},h._("supported video format"));return {summary:h._("No Video Detected"),description:h._("It looks like you're trying to upload a file that isn't a video. Please try uploading a {supported-video-format link}",[h.param('supported-video-format link',n)])};};l.prototype.$VideoUploadFileValidator13=function(){'use strict';return {summary:h._("Video Width Too Narrow"),description:h._("The width of the video you tried to upload is too short. The minimum width for a video is {min-width}. Please upload a wider video.",[h.param('min-width',this.$VideoUploadFileValidator1.minWidth)])};};l.prototype.$VideoUploadFileValidator14=function(){'use strict';return {summary:h._("Video Height Too Short"),description:h._("The height of the video you tried to upload is too short. The minimum height for a video is {min-height}. Please upload a taller video.",[h.param('min-height',this.$VideoUploadFileValidator1.minHeight)])};};f.exports=l;}),null);
__d('VideoUploadSphericalLogger',['Banzai','throttle'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){'use strict';this.$VideoUploadSphericalLogger1={};this.log=c('throttle')(this.log,3000,this);}h.prototype.log=function(){'use strict';c('Banzai').post('spherical_video_composer_upload',babelHelpers['extends']({},this.$VideoUploadSphericalLogger1));};h.prototype.setDirectorsCutEnabled=function(i){'use strict';this.$VideoUploadSphericalLogger1.directors_cut_enabled=i;return this;};h.prototype.setFieldOfView=function(i){'use strict';this.$VideoUploadSphericalLogger1.field_of_view=i;return this;};h.prototype.setFileExtension=function(i){'use strict';this.$VideoUploadSphericalLogger1.file_extension=i;return this;};h.prototype.setHasSphericalMetadata=function(i){'use strict';this.$VideoUploadSphericalLogger1.has_spherical_metadata=i;return this;};h.prototype.setPitchDegrees=function(i){'use strict';this.$VideoUploadSphericalLogger1.pitch_degrees=i;return this;};h.prototype.setTargetID=function(i){'use strict';this.$VideoUploadSphericalLogger1.target_id=i;return this;};h.prototype.setVideoID=function(i){'use strict';this.$VideoUploadSphericalLogger1.video_id=i;return this;};h.prototype.setUserAction=function(i){'use strict';this.$VideoUploadSphericalLogger1.user_action=i;return this;};h.prototype.setVideoPreviewPosition=function(i){'use strict';this.$VideoUploadSphericalLogger1.video_preview_position=i;return this;};h.prototype.setYawDegrees=function(i){'use strict';this.$VideoUploadSphericalLogger1.yaw_degrees=i;return this;};f.exports=new h();}),null);
__d('VideoUploadMetadataParser',['VideoUploadFeatureDetector','VideoUploadSphericalLogger','fileSlice'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=4,i=4,j=5242880,k=24,l=88,m=20,n=16,o=4,p=84,q=[255,204,130,99,248,85,74,147,136,20,88,122,2,82,31,221];function r(s,t){'use strict';this.$VideoUploadMetadataParser1=s;this.$VideoUploadMetadataParser2=t;}r.prototype.getHandler=function(){'use strict';return this.$VideoUploadMetadataParser2;};r.prototype.parse=function(){'use strict';if(!c('VideoUploadFeatureDetector').supportsFileReading()){this.$VideoUploadMetadataParser2(null);return;}switch(this.$VideoUploadMetadataParser1.getExtension()){case 'mp4':case 'mov':case 'm4v':case '3gp':case '3g2':c('VideoUploadSphericalLogger').setFileExtension(this.$VideoUploadMetadataParser1.getExtension());break;default:this.$VideoUploadMetadataParser2(null);return;}this.$VideoUploadMetadataParser3(0,Math.min(j,this.$VideoUploadMetadataParser1.getSize()),null);};r.prototype.$VideoUploadMetadataParser3=function(s,t,u){'use strict';var v=new FileReader();v.onload=function(event){try{var y=this.$VideoUploadMetadataParser4(new DataView(v.result),0,t-s,s,u);if(y.completed){y=this.$VideoUploadMetadataParser5(y);this.$VideoUploadMetadataParser2(y);}else this.$VideoUploadMetadataParser3(s+y.nextOffset,Math.min(this.$VideoUploadMetadataParser1.getSize(),s+y.nextOffset+j),y);}catch(x){this.$VideoUploadMetadataParser2(null);}}.bind(this);var w=this.$VideoUploadMetadataParser1.getFile();v.readAsArrayBuffer(c('fileSlice').call(w,s,t));};r.prototype.$VideoUploadMetadataParser6=function(s,t,u){'use strict';var v=[];for(var w=0;w<u;w++)v.push(String.fromCharCode(s.getUint8(t+w)));return v.join('');};r.prototype.$VideoUploadMetadataParser7=function(s,t,u){'use strict';try{var w=i+h;if(w+q.length<u&&this.$VideoUploadMetadataParser8(s,t+w)){w+=q.length;if(w<u){var x=this.$VideoUploadMetadataParser6(s,t+w,u-w),y;if(window.DOMParser){var z=new DOMParser();y=z.parseFromString(x,'text/xml');}else{y=new window.ActiveXObject('Microsoft.XMLDOM');y.async='false';y.loadXML(x);}var aa=y.getElementsByTagNameNS('*','Spherical')[0].childNodes[0].nodeValue;return aa.toLowerCase()==='true';}}}catch(v){}return false;};r.prototype.$VideoUploadMetadataParser8=function(s,t){'use strict';for(var u=0;u<q.length;u++)if(s.getUint8(t+u)!==q[u])return false;return true;};r.prototype.$VideoUploadMetadataParser4=function(s,t,u,v,w){'use strict';if(!w)w={widths:[],heights:[],streamTypes:[],streamDurations:[],isSpherical:false};while(t<u){var x=s.getUint32(t),y=this.$VideoUploadMetadataParser6(s,t+h,i);if(t+x>u){w.completed=false;w.nextOffset=t;if(x>u)w.nextOffset+=x;return w;}if(t+v===0&&y!=='ftyp')throw new Error('No ftyp atom');if(x===0)throw new Error('len is 0');var z=function da(){var ea=s.getUint32(t+m),fa=s.getUint32(t+k);return fa/ea;};switch(y){case 'moov':case 'trak':case 'mdia':t+=h+i;break;case 'mvhd':w.duration=z();t+=x;break;case 'tkhd':var aa=s.getUint16(t+p),ba=s.getUint16(t+l);w.widths.push(aa);w.heights.push(ba);t+=x;break;case 'hdlr':var ca=this.$VideoUploadMetadataParser6(s,t+n,o);switch(ca){case 'vide':ca='video';break;case 'soun':ca='audio';break;case 'subt':ca='subtitle';break;default:ca='data';}w.streamTypes.push(ca);t+=x;break;case 'mdhd':w.streamDurations.push(z());t+=x;break;case 'uuid':w.isSpherical=w.isSpherical||this.$VideoUploadMetadataParser7(s,t,x);t+=x;break;default:t+=x;}}w.completed=true;return w;};r.prototype.$VideoUploadMetadataParser5=function(s){'use strict';var t={streams:{},format:{}},u=s.widths.length,v=s.heights.length,w=s.streamTypes.length,x=s.streamDurations.length;if(u!==v||u!==w||u!==x)return null;for(var y=0;y<u;y++){var z={width:s.widths[y],height:s.heights[y],duration:s.streamDurations[y],type:s.streamTypes[y]};if(z.type==='video'){var aa=z.width*z.height,ba=t.streams.primaryVideo;if(!ba||ba.width*ba.height>aa)t.streams.primaryVideo=z;}else if(z.type==='audio'){var ca=t.streams.primaryAudio;if(!ca||ca.duration<z.duration)t.streams.primaryAudio=z;}}t.format.duration=s.duration;t.format.isSpherical=s.isSpherical;c('VideoUploadSphericalLogger').setHasSphericalMetadata(s.isSpherical);return t;};f.exports=r;}),null);
__d('VideoUploadRequest',['AsyncRequest','DOM','DTSG','FileForm','Form','PHPQuerySerializer','VideoUploadFeatureDetector','emptyFunction','flattenPHPQueryData','submitForm'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='video';function i(j){'use strict';this.$VideoUploadRequest1=j;this.$VideoUploadRequest2=null;this.$VideoUploadRequest3=false;this.$VideoUploadRequest4=null;this.$VideoUploadRequest5=null;this.$VideoUploadRequest6=null;this.$VideoUploadRequest7=c('emptyFunction');this.$VideoUploadRequest8=c('emptyFunction');this.$VideoUploadRequest9=c('emptyFunction');this.$VideoUploadRequest10=c('emptyFunction');this.$VideoUploadRequest11=null;}i.prototype.setAllowCrossOrigin=function(j){'use strict';this.$VideoUploadRequest3=j;return this;};i.prototype.setData=function(j){'use strict';this.$VideoUploadRequest4=j;return this;};i.prototype.setWaterfallID=function(j){'use strict';this.$VideoUploadRequest5=j;return this;};i.prototype.setSuccessHandler=function(j){'use strict';this.$VideoUploadRequest7=j;return this;};i.prototype.setErrorHandler=function(j){'use strict';this.$VideoUploadRequest8=j;return this;};i.prototype.setTransportErrorHandler=function(j){'use strict';this.$VideoUploadRequest9=j;return this;};i.prototype.setUploadProgressHandler=function(j){'use strict';this.$VideoUploadRequest10=j;return this;};i.prototype.setTimeoutHandler=function(j,k){'use strict';this.$VideoUploadRequest6=j;this.$VideoUploadRequest11=k;return this;};i.prototype.setThumbnail=function(j){'use strict';this.$VideoUploadRequest12=j;return this;};i.prototype.setCaptions=function(j){'use strict';this.$VideoUploadRequest13=j;return this;};i.prototype.send=function(){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');if(c('VideoUploadFeatureDetector').supportsXHR()){this.$VideoUploadRequest2=this.$VideoUploadRequest14();if(this.$VideoUploadRequest12||this.$VideoUploadRequest13){var j=new FormData();if(this.$VideoUploadRequest12)j.append('thumb',this.$VideoUploadRequest12);if(this.$VideoUploadRequest13)this.$VideoUploadRequest13.forEach(function(l,m){var n=l.getIsDefault()?'captions_default':'captions_file'+m;j.append(n,l.getFile());});if(this.$VideoUploadRequest4){var k=c('flattenPHPQueryData')(this.$VideoUploadRequest4);Object.keys(k).forEach(function(l){j.append(l,k[l]);});}this.$VideoUploadRequest2.setRawData(j);}this.$VideoUploadRequest2.send();}else{this.$VideoUploadRequest2=this.$VideoUploadRequest15();this.$VideoUploadRequest16(this.$VideoUploadRequest2);}};i.prototype.sendChunk=function(j){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');var k=new FormData();k.append('video_file_chunk',j);this.$VideoUploadRequest2=this.$VideoUploadRequest14();this.$VideoUploadRequest2.setRawData(k);this.$VideoUploadRequest2.send();};i.prototype.sendFile=function(j){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');this.$VideoUploadRequest2=this.$VideoUploadRequest15();var k=j.cloneNode(false);j.name=h;c('DOM').replace(j,k);c('DOM').appendContent(this.$VideoUploadRequest2.getRoot(),j);this.$VideoUploadRequest16(this.$VideoUploadRequest2);j.name=k.name;c('DOM').replace(k,j);};i.prototype.abort=function(){'use strict';if(!this.$VideoUploadRequest2)throw new Error('There is no upload request in progress.');this.$VideoUploadRequest2.abort();this.$VideoUploadRequest2=null;};i.prototype.$VideoUploadRequest14=function(){'use strict';var j=this.__getAsyncRequest().setAllowCrossOrigin(this.$VideoUploadRequest3).setURI(this.$VideoUploadRequest1).setData(this.$VideoUploadRequest4).setRequestHeader('X_FB_VIDEO_WATERFALL_ID',this.$VideoUploadRequest5).setHandler(this.$VideoUploadRequest7).setErrorHandler(this.$VideoUploadRequest8).setTransportErrorHandler(this.$VideoUploadRequest9).setUploadProgressHandler(this.$VideoUploadRequest10);if(this.$VideoUploadRequest11)j.setTimeoutHandler(this.$VideoUploadRequest6,this.$VideoUploadRequest11);return j;};i.prototype.__getAsyncRequest=function(){'use strict';return new (c('AsyncRequest'))();};i.prototype.$VideoUploadRequest15=function(){'use strict';var j=c('DOM').create('form',{action:this.$VideoUploadRequest1,method:'POST'});c('Form').createHiddenInputs(babelHelpers['extends']({fb_dtsg:c('DTSG').getToken()},this.$VideoUploadRequest4),j);var k=new (c('FileForm'))(j,null,{allowCrossOrigin:this.$VideoUploadRequest3});k.subscribe('success',this.$VideoUploadRequest17.bind(this));k.subscribe('failure',this.$VideoUploadRequest18.bind(this));k.subscribe('progress',this.$VideoUploadRequest19.bind(this));return k;};i.prototype.$VideoUploadRequest16=function(j){'use strict';c('DOM').appendContent(document.body,j.getRoot());c('submitForm')(j.getRoot());};i.prototype.$VideoUploadRequest17=function(event,j){'use strict';this.$VideoUploadRequest7(j.response);};i.prototype.$VideoUploadRequest18=function(event,j){'use strict';this.$VideoUploadRequest8(j.response);};i.prototype.$VideoUploadRequest19=function(event,j){'use strict';this.$VideoUploadRequest10(j.event);};f.exports=i;}),null);
__d('VideoUploadPostRequestManager',['ArbiterMixin','VideoUploadRequest','mixin'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l,m,n,o){'use strict';i.constructor.call(this);this.$VideoUploadPostRequestManager1=k;this.$VideoUploadPostRequestManager2=l;this.$VideoUploadPostRequestManager3=m;this.$VideoUploadPostRequestManager4=0;this.$VideoUploadPostRequestManager5=n;this.$VideoUploadPostRequestManager6=o;this.$VideoUploadPostRequestManager7=0;}j.prototype.getRequest=function(){'use strict';return this.$VideoUploadPostRequestManager8;};j.prototype.sendRequest=function(k){'use strict';if(this.$VideoUploadPostRequestManager8)return;this.$VideoUploadPostRequestManager9=babelHelpers['extends']({},k.getMetadata(),this.__createRequestData(k));this.$VideoUploadPostRequestManager10=this.$VideoUploadPostRequestManager9.thumb;delete this.$VideoUploadPostRequestManager9.thumb;this.$VideoUploadPostRequestManager11=this.$VideoUploadPostRequestManager9.captions;delete this.$VideoUploadPostRequestManager9.captions;this.$VideoUploadPostRequestManager12=k.getWaterfallID();this.$VideoUploadPostRequestManager13();this.inform('request-started');};j.prototype.$VideoUploadPostRequestManager13=function(){'use strict';clearTimeout(this.$VideoUploadPostRequestManager14);this.$VideoUploadPostRequestManager14=null;this.$VideoUploadPostRequestManager8=this.__getVideoUploadRequest(this.$VideoUploadPostRequestManager1).setAllowCrossOrigin(true).setData(this.$VideoUploadPostRequestManager9).setThumbnail(this.$VideoUploadPostRequestManager10).setCaptions(this.$VideoUploadPostRequestManager11).setWaterfallID(this.$VideoUploadPostRequestManager12).setSuccessHandler(this.$VideoUploadPostRequestManager15.bind(this)).setErrorHandler(this.$VideoUploadPostRequestManager16.bind(this)).setTransportErrorHandler(this.$VideoUploadPostRequestManager17.bind(this));this.$VideoUploadPostRequestManager8.send();};j.prototype.__createRequestData=function(k){'use strict';return {video_id:k.getVideoID(),target_id:k.getTargetID(),source:k.getSource(),waterfall_id:k.getWaterfallID(),creator_product:k.getCreatorProduct(),composer_entry_point_ref:k.getComposerEntryPointRef&&k.getComposerEntryPointRef(),supports_chunking:k.getSupportsChunking()};};j.prototype.__getVideoUploadRequest=function(k){'use strict';return new (c('VideoUploadRequest'))(k);};j.prototype.clearRequest=function(){'use strict';this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager7=0;this.$VideoUploadPostRequestManager4=0;};j.prototype.isInProgress=function(){'use strict';return !!this.$VideoUploadPostRequestManager8;};j.prototype.$VideoUploadPostRequestManager18=function(k){'use strict';clearTimeout(this.$VideoUploadPostRequestManager14);this.$VideoUploadPostRequestManager14=setTimeout(this.$VideoUploadPostRequestManager13.bind(this),k);};j.prototype.$VideoUploadPostRequestManager19=function(k,l){'use strict';return Math.pow(k,l)*1000;};j.prototype.$VideoUploadPostRequestManager15=function(k){'use strict';var l=k.getPayload();this.inform('request-finished',{video_id:l.video_id,video_asset_id:l.video_asset_id,container_type:l.container_type,transport_retries:this.$VideoUploadPostRequestManager4,server_retries:this.$VideoUploadPostRequestManager7});this.clearRequest();};j.prototype.$VideoUploadPostRequestManager20=function(k){'use strict';this.inform('request-failed',{error_code:k.getError(),error_description:k.getErrorDescription(),error_summary:k.getErrorSummary(),transport_retries:this.$VideoUploadPostRequestManager4,server_retries:this.$VideoUploadPostRequestManager7,error_is_transient:k.isTransient()});this.clearRequest();};j.prototype.$VideoUploadPostRequestManager16=function(k){'use strict';this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager4=0;if(k.isTransient()&&this.$VideoUploadPostRequestManager7<this.$VideoUploadPostRequestManager5){this.$VideoUploadPostRequestManager7++;this.$VideoUploadPostRequestManager18(this.$VideoUploadPostRequestManager19(this.$VideoUploadPostRequestManager6,this.$VideoUploadPostRequestManager7));}else this.$VideoUploadPostRequestManager20(k);};j.prototype.$VideoUploadPostRequestManager17=function(k){'use strict';if(this.$VideoUploadPostRequestManager2===0||this.$VideoUploadPostRequestManager4>=this.$VideoUploadPostRequestManager2){this.$VideoUploadPostRequestManager20(k);}else{this.$VideoUploadPostRequestManager4++;this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager18(this.$VideoUploadPostRequestManager19(this.$VideoUploadPostRequestManager3,this.$VideoUploadPostRequestManager4));}};f.exports=j;}),null);
__d('Network',['mixInEventEmitter'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=true,i=b.navigator.connection,j={0:'unknown',1:'ethernet',2:'wifi',3:'2g',4:'3g'};function k(){return h;}function l(q){if(q==h)return;h=q;p.emit(q?'online':'offline');}function m(){return i?i.bandwidth:h?Infinity:0;}function n(){return i?i.metered:false;}function o(){var q=i?String(i.type):'0';return j[q]||q;}var p={getBandwidth:m,getType:o,isMetered:n,isOnline:k,setOnline:l};c('mixInEventEmitter')(p,{online:true,offline:true});if(b.addEventListener){b.addEventListener('online',l.bind(null,true));b.addEventListener('offline',l.bind(null,false));}else if(b.attachEvent){b.attachEvent('online',l.bind(null,true));b.attachEvent('offline',l.bind(null,false));}f.exports=p;}),null);
__d('VideoUploadConnectionMonitor',['ArbiterMixin','Network','VideoUploadFeatureDetector','debounce','mixin'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);this.$VideoUploadConnectionMonitor1=false;this.$VideoUploadConnectionMonitor2=[];this.$VideoUploadConnectionMonitor3=false;this.$VideoUploadConnectionMonitor4=true;this.$VideoUploadConnectionMonitor5=c('debounce')(function(){this.$VideoUploadConnectionMonitor6(false);}.bind(this),2000);}j.prototype.notifyStart=function(){'use strict';if(this.$VideoUploadConnectionMonitor3)return;if(this.$VideoUploadConnectionMonitor2.length===0){this.$VideoUploadConnectionMonitor2.push(c('Network').addListener('online',function(){this.$VideoUploadConnectionMonitor6(true);}.bind(this)));this.$VideoUploadConnectionMonitor2.push(c('Network').addListener('offline',function(){if(this.$VideoUploadConnectionMonitor1){this.$VideoUploadConnectionMonitor5();}else{this.$VideoUploadConnectionMonitor5.reset();setTimeout(this.$VideoUploadConnectionMonitor5,2000);}}.bind(this)));}this.$VideoUploadConnectionMonitor3=true;};j.prototype.notifyProgress=function(event){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;if(!event)return;if(c('VideoUploadFeatureDetector').supportsFullProgress()){this.$VideoUploadConnectionMonitor1=true;if(event.total&&event.loaded===event.total){this.$VideoUploadConnectionMonitor5.reset();}else this.$VideoUploadConnectionMonitor5();}};j.prototype.notifySuccess=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(true);};j.prototype.notifyTransportError=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.$VideoUploadConnectionMonitor3=false;this.$VideoUploadConnectionMonitor6(false);};j.prototype.notifyError=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(true);};j.prototype.isOnline=function(){'use strict';return this.$VideoUploadConnectionMonitor4;};j.prototype.reset=function(){'use strict';while(this.$VideoUploadConnectionMonitor2.length)this.$VideoUploadConnectionMonitor2.pop().remove();this.$VideoUploadConnectionMonitor5.reset();this.$VideoUploadConnectionMonitor3=false;};j.prototype.$VideoUploadConnectionMonitor6=function(k){'use strict';this.$VideoUploadConnectionMonitor5.reset();if(this.$VideoUploadConnectionMonitor4!==k){this.$VideoUploadConnectionMonitor4=k;if(this.$VideoUploadConnectionMonitor4){this.inform('online');}else this.inform('offline');}};f.exports=j;}),null);
__d('VideoUploadReceiveRequestManager',['fbt','ArbiterMixin','VideoUploadConnectionMonitor','VideoUploadRequest','mixin'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=1363037;i=babelHelpers.inherits(l,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function l(m,n,o,p,q,r,s,t,u){'use strict';j.constructor.call(this);this.$VideoUploadReceiveRequestManager1=m;this.$VideoUploadReceiveRequestManager2=n;this.$VideoUploadReceiveRequestManager3=o;this.$VideoUploadReceiveRequestManager4=p;this.$VideoUploadReceiveRequestManager5=q;this.$VideoUploadReceiveRequestManager6=r;this.$VideoUploadReceiveRequestManager7=s;this.$VideoUploadReceiveRequestManager8=t;this.$VideoUploadReceiveRequestManager9=u;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager13=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager16='constructed';this.$VideoUploadReceiveRequestManager17=new (c('VideoUploadConnectionMonitor'))();this.$VideoUploadReceiveRequestManager17.subscribe('online',this.$VideoUploadReceiveRequestManager18.bind(this));this.$VideoUploadReceiveRequestManager17.subscribe('offline',this.$VideoUploadReceiveRequestManager19.bind(this));}l.prototype.sendRequest=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='sending request';if(this.$VideoUploadReceiveRequestManager20){this.$VideoUploadReceiveRequestManager16='request already in progress';return;}this.$VideoUploadReceiveRequestManager15=m.getEndOffset()-m.getStartOffset();this.$VideoUploadReceiveRequestManager21=m;this.$VideoUploadReceiveRequestManager22();};l.prototype.cancelRequest=function(){'use strict';if(!this.$VideoUploadReceiveRequestManager20)return;this.$VideoUploadReceiveRequestManager20.abort();this.$VideoUploadReceiveRequestManager23();};l.prototype.appendStateLogData=function(m,n){'use strict';m[n+'last_log_entry']=this.$VideoUploadReceiveRequestManager16;m[n+'upload_speed']=this.$VideoUploadReceiveRequestManager14;m[n+'transport_retries']=this.$VideoUploadReceiveRequestManager10;m[n+'server_retries']=this.$VideoUploadReceiveRequestManager11;m[n+'timeout_retries']=this.$VideoUploadReceiveRequestManager12;m[n+'last_timeout_value']=this.$VideoUploadReceiveRequestManager24;m[n+'last_request_start_time']=this.$VideoUploadReceiveRequestManager13;m[n+'pending_request']=this.$VideoUploadReceiveRequestManager20!=null;m[n+'pending_timer']=this.$VideoUploadReceiveRequestManager25!=null;m[n+'cached_chunk']=this.$VideoUploadReceiveRequestManager26!=null;if(this.$VideoUploadReceiveRequestManager21!=null){m[n+'start_offset']=this.$VideoUploadReceiveRequestManager21.getStartOffset();m[n+'end_offset']=this.$VideoUploadReceiveRequestManager21.getEndOffset();m[n+'partition_start_offset']=this.$VideoUploadReceiveRequestManager21.getPartitionStartOffset();m[n+'partition_end_offset']=this.$VideoUploadReceiveRequestManager21.getPartitionEndOffset();}if(this.$VideoUploadReceiveRequestManager17!=null)m[n+'connection_monitor_online']=this.$VideoUploadReceiveRequestManager17.isOnline();};l.prototype.$VideoUploadReceiveRequestManager23=function(){'use strict';this.$VideoUploadReceiveRequestManager20=null;this.$VideoUploadReceiveRequestManager26=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager13=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager21.reset();this.$VideoUploadReceiveRequestManager17.reset();clearTimeout(this.$VideoUploadReceiveRequestManager25);this.$VideoUploadReceiveRequestManager25=null;};l.prototype.$VideoUploadReceiveRequestManager22=function(m){'use strict';clearTimeout(this.$VideoUploadReceiveRequestManager25);this.$VideoUploadReceiveRequestManager25=null;if(this.$VideoUploadReceiveRequestManager21.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager21.getStartOffset()>=this.$VideoUploadReceiveRequestManager21.getPartitionEndOffset()){if(!m){this.inform('request-finished',{start_offset:this.$VideoUploadReceiveRequestManager21.getEndOffset()-1,end_offset:this.$VideoUploadReceiveRequestManager21.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14});this.$VideoUploadReceiveRequestManager16='request finished - notified';}else this.$VideoUploadReceiveRequestManager16='request finished - not notified';return;}this.$VideoUploadReceiveRequestManager20=this.__getVideoUploadRequest(this.$VideoUploadReceiveRequestManager1).setAllowCrossOrigin(true).setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager21)).setWaterfallID(this.$VideoUploadReceiveRequestManager21.getWaterfallID()).setSuccessHandler(this.__handleSuccessResponse.bind(this)).setErrorHandler(this.__handleServerFailureResponse.bind(this)).setTransportErrorHandler(this.$VideoUploadReceiveRequestManager27.bind(this)).setUploadProgressHandler(this.$VideoUploadReceiveRequestManager28.bind(this));this.$VideoUploadReceiveRequestManager13=Date.now();if(this.$VideoUploadReceiveRequestManager21.getSupportsChunking()){if(this.$VideoUploadReceiveRequestManager4){var n=this.$VideoUploadReceiveRequestManager29(this.$VideoUploadReceiveRequestManager21.getEndOffset()-this.$VideoUploadReceiveRequestManager21.getStartOffset(),this.$VideoUploadReceiveRequestManager14);this.$VideoUploadReceiveRequestManager20.setTimeoutHandler(n,this.__handleResponseTimeout.bind(this));this.$VideoUploadReceiveRequestManager16='sending chunk with timeout = '+n;this.$VideoUploadReceiveRequestManager24=n;}else this.$VideoUploadReceiveRequestManager16='sending chunk without timeout';this.$VideoUploadReceiveRequestManager20.sendChunk(this.$VideoUploadReceiveRequestManager30());}else{this.$VideoUploadReceiveRequestManager16='sending file';this.$VideoUploadReceiveRequestManager20.sendFile(this.$VideoUploadReceiveRequestManager21.getFile().getFileInput());}this.$VideoUploadReceiveRequestManager17.notifyStart();this.inform('request-started',{start_offset:this.$VideoUploadReceiveRequestManager21.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager21.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14});};l.prototype.__getVideoUploadRequest=function(m){'use strict';return new (c('VideoUploadRequest'))(m);};l.prototype.$VideoUploadReceiveRequestManager31=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='setting request to send after'+m;clearTimeout(this.$VideoUploadReceiveRequestManager25);this.$VideoUploadReceiveRequestManager25=setTimeout(this.$VideoUploadReceiveRequestManager22.bind(this),m);};l.prototype.$VideoUploadReceiveRequestManager30=function(){'use strict';if(this.$VideoUploadReceiveRequestManager26)return this.$VideoUploadReceiveRequestManager26;this.$VideoUploadReceiveRequestManager26=this.$VideoUploadReceiveRequestManager21.getFile().getChunk(this.$VideoUploadReceiveRequestManager21.getStartOffset(),this.$VideoUploadReceiveRequestManager21.getEndOffset());return this.$VideoUploadReceiveRequestManager26;};l.prototype.__createRequestData=function(m){'use strict';return {video_id:m.getVideoID(),start_offset:m.getStartOffset(),source:m.getSource(),target_id:m.getTargetID(),waterfall_id:m.getWaterfallID(),composer_entry_point_ref:m.getComposerEntryPointRef&&m.getComposerEntryPointRef(),supports_chunking:m.getSupportsChunking(),upload_speed:this.$VideoUploadReceiveRequestManager14,partition_start_offset:m.getPartitionStartOffset(),partition_end_offset:m.getPartitionEndOffset()};};l.prototype.__handleSuccessResponse=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='success response received';var n=Date.now()-this.$VideoUploadReceiveRequestManager13;n=n===0?1:n;var o=m.getPayload();if(o.start_offset===this.$VideoUploadReceiveRequestManager21.getEndOffset()){var p=this.$VideoUploadReceiveRequestManager21.getEndOffset()-this.$VideoUploadReceiveRequestManager21.getStartOffset();this.$VideoUploadReceiveRequestManager14=Math.floor(p/n);}else this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager17.notifySuccess();this.inform('request-finished',{start_offset:this.$VideoUploadReceiveRequestManager21.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager21.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14});this.$VideoUploadReceiveRequestManager21.setStartOffset(o.start_offset);this.$VideoUploadReceiveRequestManager21.setEndOffset(o.end_offset);this.$VideoUploadReceiveRequestManager21.setLastKnownUploadSpeed(this.$VideoUploadReceiveRequestManager14);this.$VideoUploadReceiveRequestManager20=null;this.$VideoUploadReceiveRequestManager26=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager21.getSupportsChunking())this.$VideoUploadReceiveRequestManager22(true);};l.prototype.__handleServerFailureResponse=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='failure response received';this.$VideoUploadReceiveRequestManager20=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager17.notifyError();if(this.__hasInvalidStartOffsetAndHasRetries(m.getError())){this.$VideoUploadReceiveRequestManager11++;var n=m.getPayload();this.$VideoUploadReceiveRequestManager16='invalid offset response received start='+n.start_offset+' end='+n.end_offset;if(this.$VideoUploadReceiveRequestManager21.getStartOffset()!=n.start_offset||this.$VideoUploadReceiveRequestManager21.getEndOffset()!=n.end_offset){this.$VideoUploadReceiveRequestManager21.setStartOffset(n.start_offset);this.$VideoUploadReceiveRequestManager21.setEndOffset(n.end_offset);this.$VideoUploadReceiveRequestManager26=null;}this.$VideoUploadReceiveRequestManager22();}else if((m.isTransient()||this.$VideoUploadReceiveRequestManager9)&&this.$VideoUploadReceiveRequestManager11<this.$VideoUploadReceiveRequestManager3){this.$VideoUploadReceiveRequestManager16='transient server error';this.$VideoUploadReceiveRequestManager11++;this.$VideoUploadReceiveRequestManager31(this.$VideoUploadReceiveRequestManager32(this.$VideoUploadReceiveRequestManager8,this.$VideoUploadReceiveRequestManager11));}else this.$VideoUploadReceiveRequestManager33(m);};l.prototype.__handleResponseTimeout=function(m){'use strict';this.inform('request-timeout',{start_offset:this.$VideoUploadReceiveRequestManager21.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager21.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,timeout_retries:this.$VideoUploadReceiveRequestManager12,upload_speed:this.$VideoUploadReceiveRequestManager14});this.$VideoUploadReceiveRequestManager20.abort();this.$VideoUploadReceiveRequestManager20=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager17.notifyTransportError();if(++this.$VideoUploadReceiveRequestManager12<=this.$VideoUploadReceiveRequestManager5){var n=this.$VideoUploadReceiveRequestManager21.getEndOffset()-this.$VideoUploadReceiveRequestManager21.getStartOffset();n=Math.floor(n/2);n=Math.max(n,this.$VideoUploadReceiveRequestManager15);var o=this.$VideoUploadReceiveRequestManager21.getEndOffset();o=Math.min(o,this.$VideoUploadReceiveRequestManager21.getStartOffset()+n);this.$VideoUploadReceiveRequestManager21.setEndOffset(o);this.$VideoUploadReceiveRequestManager26=null;this.$VideoUploadReceiveRequestManager16='resending after timeout with chunksize='+n;this.$VideoUploadReceiveRequestManager22();}else this.$VideoUploadReceiveRequestManager34({error_code:1006,error_description:h._("Your browser appears to be offline. Please check your internet connection and try again."),error_summary:h._("No Network Connection"),error_is_transient:true});};l.prototype.__hasInvalidStartOffsetAndHasRetries=function(m){'use strict';return m===k&&this.$VideoUploadReceiveRequestManager11<this.$VideoUploadReceiveRequestManager3;};l.prototype.$VideoUploadReceiveRequestManager27=function(m){'use strict';this.$VideoUploadReceiveRequestManager17.notifyTransportError();this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager10<this.$VideoUploadReceiveRequestManager2){this.$VideoUploadReceiveRequestManager16='resending after transport failure';this.$VideoUploadReceiveRequestManager10++;this.$VideoUploadReceiveRequestManager20=null;this.$VideoUploadReceiveRequestManager31(this.$VideoUploadReceiveRequestManager32(this.$VideoUploadReceiveRequestManager7,this.$VideoUploadReceiveRequestManager10));}else this.$VideoUploadReceiveRequestManager33(m);};l.prototype.$VideoUploadReceiveRequestManager33=function(m){'use strict';this.$VideoUploadReceiveRequestManager34({error_code:m.getError(),error_description:m.getErrorDescription(),error_summary:m.getErrorSummary(),error_is_transient:m.isTransient()});};l.prototype.$VideoUploadReceiveRequestManager34=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='handling failure error';this.inform('request-failed',m);this.$VideoUploadReceiveRequestManager23();};l.prototype.$VideoUploadReceiveRequestManager28=function(event){'use strict';this.$VideoUploadReceiveRequestManager17.notifyProgress(event);this.inform('request-progressed',{file_size:this.$VideoUploadReceiveRequestManager21.getFile().getSize(),start_offset:this.$VideoUploadReceiveRequestManager21.getStartOffset(),sent_bytes:event.loaded});};l.prototype.$VideoUploadReceiveRequestManager18=function(event){'use strict';this.inform('online');this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager25)this.$VideoUploadReceiveRequestManager22();};l.prototype.$VideoUploadReceiveRequestManager19=function(event){'use strict';this.inform('offline');};l.prototype.$VideoUploadReceiveRequestManager32=function(m,n){'use strict';return Math.pow(m,n)*1000;};l.prototype.$VideoUploadReceiveRequestManager29=function(m,n){'use strict';var o;if(n>0){o=n;}else o=10;var p=Math.floor(m/o*this.$VideoUploadReceiveRequestManager6/100);return Math.max(p,30000);};f.exports=l;}),null);
__d("VideoUploadRequestContext",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){"use strict";this.reset();}h.prototype.setFile=function(i){"use strict";this.$VideoUploadRequestContext1=i;return this;};h.prototype.getFile=function(){"use strict";return this.$VideoUploadRequestContext1;};h.prototype.setMetadata=function(i){"use strict";this.$VideoUploadRequestContext2=i;return this;};h.prototype.getMetadata=function(){"use strict";return this.$VideoUploadRequestContext2;};h.prototype.setVideoID=function(i){"use strict";this.$VideoUploadRequestContext3=i;return this;};h.prototype.getVideoID=function(){"use strict";return this.$VideoUploadRequestContext3;};h.prototype.setStartOffset=function(i){"use strict";this.$VideoUploadRequestContext4=i;return this;};h.prototype.getStartOffset=function(){"use strict";return this.$VideoUploadRequestContext4;};h.prototype.setEndOffset=function(i){"use strict";this.$VideoUploadRequestContext5=i;return this;};h.prototype.getEndOffset=function(){"use strict";return this.$VideoUploadRequestContext5;};h.prototype.setPartitionStartOffset=function(i){"use strict";this.$VideoUploadRequestContext6=i;return this;};h.prototype.getPartitionStartOffset=function(){"use strict";return this.$VideoUploadRequestContext6;};h.prototype.setPartitionEndOffset=function(i){"use strict";this.$VideoUploadRequestContext7=i;return this;};h.prototype.getPartitionEndOffset=function(){"use strict";return this.$VideoUploadRequestContext7;};h.prototype.setTargetID=function(i){"use strict";this.$VideoUploadRequestContext8=i;return this;};h.prototype.getTargetID=function(){"use strict";return this.$VideoUploadRequestContext8;};h.prototype.setSource=function(i){"use strict";this.$VideoUploadRequestContext9=i;return this;};h.prototype.getSource=function(){"use strict";return this.$VideoUploadRequestContext9;};h.prototype.setWaterfallID=function(i){"use strict";this.$VideoUploadRequestContext10=i;return this;};h.prototype.getWaterfallID=function(){"use strict";return this.$VideoUploadRequestContext10;};h.prototype.setComposerEntryPointRef=function(i){"use strict";this.$VideoUploadRequestContext11=i;};h.prototype.getComposerEntryPointRef=function(){"use strict";return this.$VideoUploadRequestContext11;};h.prototype.setSupportsChunking=function(i){"use strict";this.$VideoUploadRequestContext12=i;return this;};h.prototype.getSupportsChunking=function(){"use strict";return this.$VideoUploadRequestContext12;};h.prototype.setSupportsFileAPI=function(i){"use strict";this.$VideoUploadRequestContext13=i;return this;};h.prototype.getSupportsFileAPI=function(){"use strict";return this.$VideoUploadRequestContext13;};h.prototype.setCreatorProduct=function(i){"use strict";this.$VideoUploadRequestContext14=i;return this;};h.prototype.getCreatorProduct=function(){"use strict";return this.$VideoUploadRequestContext14;};h.prototype.setThumbnailConfig=function(i){"use strict";this.$VideoUploadRequestContext15=i;return this;};h.prototype.getThumbnailConfig=function(){"use strict";return this.$VideoUploadRequestContext15||{};};h.prototype.setLastKnownUploadSpeed=function(i){"use strict";this.$VideoUploadRequestContext16=i;};h.prototype.getLastKnownUploadSpeed=function(){"use strict";return this.$VideoUploadRequestContext16||0;};h.prototype.setUseParallelChunks=function(i){"use strict";this.$VideoUploadRequestContext17=i;};h.prototype.getUseParallelChunks=function(){"use strict";return this.$VideoUploadRequestContext17;};h.prototype.setIsSphericalVideo=function(i){"use strict";this.$VideoUploadRequestContext18=i;};h.prototype.getIsSphericalVideo=function(){"use strict";return this.$VideoUploadRequestContext18;};h.prototype.setEnableOmnistab=function(i){"use strict";this.$VideoUploadRequestContext19=i;};h.prototype.getEnableOmnistab=function(){"use strict";return this.$VideoUploadRequestContext19;};h.prototype.reset=function(){"use strict";this.$VideoUploadRequestContext1=null;this.$VideoUploadRequestContext3=null;this.$VideoUploadRequestContext4=null;this.$VideoUploadRequestContext5=null;this.$VideoUploadRequestContext8=null;this.$VideoUploadRequestContext9=null;this.$VideoUploadRequestContext10=null;this.$VideoUploadRequestContext11=null;this.$VideoUploadRequestContext12=null;this.$VideoUploadRequestContext13=null;this.$VideoUploadRequestContext6=null;this.$VideoUploadRequestContext7=null;this.$VideoUploadRequestContext14=null;this.$VideoUploadRequestContext15=null;this.$VideoUploadRequestContext16=0;this.$VideoUploadRequestContext17=false;this.$VideoUploadRequestContext18=false;this.$VideoUploadRequestContext19=false;};f.exports=h;}),null);
__d("ManagedError",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){Error.prototype.constructor.call(this,i);this.message=i;this.innerError=j;}h.prototype=new Error();h.prototype.constructor=h;f.exports=h;}),null);
__d('AssertionError',['ManagedError'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){c('ManagedError').prototype.constructor.apply(this,arguments);}h.prototype=new (c('ManagedError'))();h.prototype.constructor=h;f.exports=h;}),null);
__d('Assert',['AssertionError','sprintf'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(m,n){if(typeof m!=='boolean'||!m)throw new (c('AssertionError'))(n);return m;}function i(m,n,o){var p;if(n===undefined){p='undefined';}else if(n===null){p='null';}else{var q=Object.prototype.toString.call(n);p=/\s(\w*)/.exec(q)[1].toLowerCase();}h(m.indexOf(p)!==-1,o||c('sprintf')('Expression is of type %s, not %s',p,m));return n;}function j(m,n,o){h(n instanceof m,o||'Expression not instance of type');return n;}function k(m,n){l['is'+m]=n;l['maybe'+m]=function(o,p){if(o!=null)n(o,p);};}var l={isInstanceOf:j,isTrue:h,isTruthy:function m(n,o){return h(!!n,o);},type:i,define:function m(n,o){n=n.substring(0,1).toUpperCase()+n.substring(1).toLowerCase();k(n,function(p,q){h(o(p),q);});}};['Array','Boolean','Date','Function','Null','Number','Object','Regexp','String','Undefined'].forEach(function(m){k(m,i.bind(null,m.toLowerCase()));});f.exports=l;}),null);
__d('VideoUploadStartRequestManager',['ArbiterMixin','VideoUploadRequest','FileHasher','performanceNow','mixin','Assert'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l,m,n,o,p,q){'use strict';i.constructor.call(this);this.$VideoUploadStartRequestManager1=k;this.$VideoUploadStartRequestManager2=l;this.$VideoUploadStartRequestManager3=m;this.$VideoUploadStartRequestManager4=0;this.$VideoUploadStartRequestManager5=n;this.$VideoUploadStartRequestManager6=o;this.$VideoUploadStartRequestManager7=p;this.$VideoUploadStartRequestManager8=q;this.$VideoUploadStartRequestManager9=0;}j.prototype.getRequest=function(){'use strict';return this.$VideoUploadStartRequestManager10;};j.prototype.sendRequest=function(k){'use strict';if(this.$VideoUploadStartRequestManager11||this.$VideoUploadStartRequestManager10)return;this.$VideoUploadStartRequestManager12=k;if(this.$VideoUploadStartRequestManager5&&this.$VideoUploadStartRequestManager12.getFile().getFile()&&this.$VideoUploadStartRequestManager12.getFile().getFile().size<this.$VideoUploadStartRequestManager6&&c('FileHasher').isSupported()){this.$VideoUploadStartRequestManager13=c('performanceNow')();this.$VideoUploadStartRequestManager11=new (c('FileHasher'))();this.$VideoUploadStartRequestManager11.hash(this.$VideoUploadStartRequestManager12.getFile().getFile(),function(l){this.$VideoUploadStartRequestManager13=c('performanceNow')()-this.$VideoUploadStartRequestManager13;this.$VideoUploadStartRequestManager14=l.hash;this.$VideoUploadStartRequestManager11.destroy();this.$VideoUploadStartRequestManager11=null;if(!l.hash)this.$VideoUploadStartRequestManager15=l.exception;this.$VideoUploadStartRequestManager16();}.bind(this));}else this.$VideoUploadStartRequestManager16();};j.prototype.$VideoUploadStartRequestManager16=function(){'use strict';this.$VideoUploadStartRequestManager17();this.inform('request-started',{hash_time:this.$VideoUploadStartRequestManager13,hash_exception:this.$VideoUploadStartRequestManager15});};j.prototype.$VideoUploadStartRequestManager17=function(){'use strict';clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=null;this.$VideoUploadStartRequestManager10=this.__getVideoUploadRequest(this.$VideoUploadStartRequestManager1).setAllowCrossOrigin(true).setData(this.__getDataToSend(this.$VideoUploadStartRequestManager12,this.$VideoUploadStartRequestManager14)).setWaterfallID(this.$VideoUploadStartRequestManager12.getWaterfallID()).setSuccessHandler(this.$VideoUploadStartRequestManager19.bind(this)).setErrorHandler(this.$VideoUploadStartRequestManager20.bind(this)).setTransportErrorHandler(this.$VideoUploadStartRequestManager21.bind(this));this.$VideoUploadStartRequestManager10.send();};j.prototype.__getVideoUploadRequest=function(k){'use strict';return new (c('VideoUploadRequest'))(k);};j.prototype.__getDataToSend=function(k,l){'use strict';return {file_size:k.getFile().getSize(),file_extension:k.getFile().getExtension(),target_id:k.getTargetID(),source:k.getSource(),waterfall_id:k.getWaterfallID(),composer_entry_point_ref:k.getComposerEntryPointRef&&k.getComposerEntryPointRef(),supports_chunking:k.getSupportsChunking(),supports_file_api:k.getSupportsFileAPI(),partition_start_offset:k.getPartitionStartOffset(),partition_end_offset:k.getPartitionEndOffset(),creator_product:k.getCreatorProduct(),original_file_hash:l,spherical:k.getIsSphericalVideo()};};j.prototype.cancelRequest=function(){'use strict';this.$VideoUploadStartRequestManager22();};j.prototype.$VideoUploadStartRequestManager23=function(k){'use strict';clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=setTimeout(this.$VideoUploadStartRequestManager17.bind(this),k);};j.prototype.$VideoUploadStartRequestManager22=function(){'use strict';if(this.$VideoUploadStartRequestManager11){this.$VideoUploadStartRequestManager11.destroy();this.$VideoUploadStartRequestManager11=null;}if(this.$VideoUploadStartRequestManager10){this.$VideoUploadStartRequestManager10.abort();this.$VideoUploadStartRequestManager10=null;}this.$VideoUploadStartRequestManager9=0;this.$VideoUploadStartRequestManager4=0;this.$VideoUploadStartRequestManager12=null;clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=null;};j.prototype.$VideoUploadStartRequestManager24=function(k,l){'use strict';return Math.pow(k,l)*1000;};j.prototype.$VideoUploadStartRequestManager19=function(k){'use strict';var l=k.getPayload();this.inform('request-finished',this.__getSuccessInformData(l));this.$VideoUploadStartRequestManager10=null;c('Assert').isTrue(this.$VideoUploadStartRequestManager11==null,'Unexpected: if file hasher is not null, clean up is required.');};j.prototype.__getSuccessInformData=function(k){'use strict';return {video_id:k.video_id,start_offset:k.start_offset,end_offset:k.end_offset,transport_retries:this.$VideoUploadStartRequestManager4,server_retries:this.$VideoUploadStartRequestManager9,skip_upload:k.skip_upload,hash_time:this.$VideoUploadStartRequestManager13};};j.prototype.$VideoUploadStartRequestManager25=function(k){'use strict';this.inform('request-failed',this.$VideoUploadStartRequestManager26(k));this.$VideoUploadStartRequestManager10=null;c('Assert').isTrue(this.$VideoUploadStartRequestManager11==null,'Unexpected: if file hasher is not null, clean up is required.');};j.prototype.$VideoUploadStartRequestManager20=function(k){'use strict';this.$VideoUploadStartRequestManager10=null;this.$VideoUploadStartRequestManager4=0;if(k.isTransient()&&this.$VideoUploadStartRequestManager9<this.$VideoUploadStartRequestManager7){this.$VideoUploadStartRequestManager9++;this.$VideoUploadStartRequestManager23(this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager8,this.$VideoUploadStartRequestManager9));}else this.$VideoUploadStartRequestManager25(k);};j.prototype.$VideoUploadStartRequestManager21=function(k){'use strict';if(this.$VideoUploadStartRequestManager2===0||this.$VideoUploadStartRequestManager4>=this.$VideoUploadStartRequestManager2){this.$VideoUploadStartRequestManager25(k);}else{this.$VideoUploadStartRequestManager4++;this.$VideoUploadStartRequestManager10=null;this.$VideoUploadStartRequestManager23(this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager3,this.$VideoUploadStartRequestManager4));}};j.prototype.$VideoUploadStartRequestManager26=function(k){'use strict';return {error_code:k.getError(),error_description:k.getErrorDescription(),error_summary:k.getErrorSummary(),transport_retries:this.$VideoUploadStartRequestManager4,server_retries:this.$VideoUploadStartRequestManager9,error_is_transient:k.isTransient()};};f.exports=j;}),null);
__d('VideoUploadSession',['ArbiterMixin','AsyncRequest','VideoUploadCrashMonitor','VideoUploadFeatureDetector','VideoUploadFileValidator','VideoUploadLogger','VideoUploadMetadataParser','VideoUploadPostRequestManager','VideoUploadReceiveRequestManager','VideoUploadRequestContext','VideoUploadStartRequestManager','WaterfallIDGenerator','mixin'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$VideoUploadSession1=k.source;this.$VideoUploadSession2=k.target_id;this.$VideoUploadSession3=k.logging_delay;this.$VideoUploadSession4=k.silent_file_validation;this.$VideoUploadSession5=k.background_upload;this.$VideoUploadSession6=k.actor_id;this.$VideoUploadSession7=k.composer_entry_point_ref;this.$VideoUploadSession8=k.monitor_crashes;this.$VideoUploadSession9=k.isMultiMediaPost;this.$VideoUploadSession10=k.thumbnail_config;this.$VideoUploadSession11=new (c('VideoUploadFileValidator'))({minSize:k.min_size,maxSize:k.max_size,minLength:k.min_length,maxLength:k.max_length,minWidth:k.min_width,minHeight:k.min_height,extensions:k.extensions,source:k.source});this.$VideoUploadSession12=c('VideoUploadFeatureDetector').supportsChunking();this.$VideoUploadSession13=c('VideoUploadFeatureDetector').supportsFileAPI();if(this.$VideoUploadSession12){this.$VideoUploadSession14=k.parallel_chunk_uploads;if(this.$VideoUploadSession14){this.$VideoUploadSession15=k.parallel_chunk_upload_filesize;this.$VideoUploadSession16=k.default_chunk_size;}}else this.$VideoUploadSession14=false;this.$VideoUploadSession17=this.$VideoUploadSession18(k);this.$VideoUploadSession19=this.$VideoUploadSession20(k);if(this.$VideoUploadSession14)this.$VideoUploadSession21=this.$VideoUploadSession20(k);this.$VideoUploadSession22=this.$VideoUploadSession23(k);}j.prototype.$VideoUploadSession24=function(){'use strict';this.$VideoUploadSession25=c('WaterfallIDGenerator').generate();this.$VideoUploadSession26=new (c('VideoUploadLogger'))({actor_id:this.$VideoUploadSession6,source:this.$VideoUploadSession1,waterfall_id:this.$VideoUploadSession25,target_id:this.$VideoUploadSession2,delay:this.$VideoUploadSession3,is_chunked_upload:this.$VideoUploadSession12,composer_entry_point_ref:this.$VideoUploadSession7});};j.prototype.getLogger=function(){'use strict';if(!this.$VideoUploadSession26)return null;return this.$VideoUploadSession26;};j.prototype.start=function(k){'use strict';this.$VideoUploadSession27=null;this.$VideoUploadSession28=false;this.$VideoUploadSession29=false;this.$VideoUploadSession30=k;this.$VideoUploadSession31=0;this.$VideoUploadSession32=false;this.$VideoUploadSession33=false;this.$VideoUploadSession24();this.__logEvent(c('VideoUploadLogger').EVENT_REQUESTED_UPLOADING);this.inform('upload-requested');var l=new (c('VideoUploadMetadataParser'))(this.$VideoUploadSession30,this.$VideoUploadSession34.bind(this));l.parse();};j.prototype.post=function(k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_POST_REQUEST);this.inform('post-started',k);var l=this.__createPostRequestContext(k);this.$VideoUploadSession22.sendRequest(l);this.$VideoUploadSession35=k;};j.prototype.__createPostRequestContext=function(k){'use strict';var l=new (c('VideoUploadRequestContext'))();this.__setupPostRequestContext(l,k);return l;};j.prototype.__setupPostRequestContext=function(k,l){'use strict';k.setMetadata(l).setVideoID(this.$VideoUploadSession27).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession25).setSupportsChunking(this.$VideoUploadSession12).setCreatorProduct(this.$VideoUploadSession30.getCreatorProduct()).setThumbnailConfig(this.$VideoUploadSession10).setFile(this.$VideoUploadSession30);if(l){if(l.spherical){this.$VideoUploadSession32=true;k.setIsSphericalVideo(this.$VideoUploadSession32);}if(l.enable_omnistab){this.$VideoUploadSession33=true;k.setEnableOmnistab(this.$VideoUploadSession33);}}if(k.setComposerEntryPointRef)k.setComposerEntryPointRef(this.$VideoUploadSession7);};j.prototype.cancel=function(){'use strict';if(!this.$VideoUploadSession28)return;var k=this.__fetchReceiveRequestManagerStateLogData();this.$VideoUploadSession36();if(this.$VideoUploadSession5){if(!this.$VideoUploadSession29)this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_UPLOADING);if(this.$VideoUploadSession37){this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k);this.$VideoUploadSession37=false;}}else{this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_UPLOADING);this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k);}};j.prototype.abandon=function(){'use strict';if(!this.$VideoUploadSession28)return;var k=this.__fetchReceiveRequestManagerStateLogData();this.$VideoUploadSession36();if(this.$VideoUploadSession5){if(!this.$VideoUploadSession29)this.__logEvent(c('VideoUploadLogger').EVENT_ABANDONED_UPLOADING);if(this.$VideoUploadSession37){this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k);this.$VideoUploadSession37=false;}}else{this.__logEvent(c('VideoUploadLogger').EVENT_ABANDONED_UPLOADING);this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k);}};j.prototype.isPostInProgress=function(){'use strict';return this.$VideoUploadSession22.isInProgress();};j.prototype.isInProgress=function(){'use strict';return this.$VideoUploadSession28;};j.prototype.getVideoID=function(){'use strict';return this.$VideoUploadSession27;};j.prototype.getUploadTime=function(){'use strict';return this.$VideoUploadSession38;};j.prototype.startFlow=function(){'use strict';if(!this.$VideoUploadSession5||this.$VideoUploadSession37)return;this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_FLOW,{is_spherical:this.$VideoUploadSession32?'true':null});this.$VideoUploadSession37=true;if(this.$VideoUploadSession39)this.$VideoUploadSession39.flowStarted();};j.prototype.$VideoUploadSession34=function(k){'use strict';var l,m;if(this.$VideoUploadSession4){var n=this.$VideoUploadSession11.getValidationErrorMessage(this.$VideoUploadSession30,k);if(n){m={error_summary:n.summary,error_description:n.description};l=false;}else l=true;}else l=this.$VideoUploadSession11.validate(this.$VideoUploadSession30,k);if(!l){this.__logEvent(c('VideoUploadLogger').EVENT_INVALIDATED_UPLOADING);this.inform('upload-failed',m);return;}if(k&&k.format)this.$VideoUploadSession32=k.format.isSpherical;if(!this.$VideoUploadSession5)this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_FLOW,{is_spherical:this.$VideoUploadSession32?'true':null});this.$VideoUploadSession40=this.$VideoUploadSession14&&this.$VideoUploadSession30.getSize()>=this.$VideoUploadSession15;this.$VideoUploadSession41=false;this.$VideoUploadSession42=false;this.$VideoUploadSession43=0;this.$VideoUploadSession44=this.$VideoUploadSession43;this.$VideoUploadSession45=0;if(this.$VideoUploadSession40){this.$VideoUploadSession46=Math.floor(this.$VideoUploadSession30.getSize()/2);this.$VideoUploadSession47=this.$VideoUploadSession46;this.$VideoUploadSession48=this.$VideoUploadSession47;this.$VideoUploadSession49=0;this.$VideoUploadSession50=this.$VideoUploadSession30.getSize();}else this.$VideoUploadSession46=this.$VideoUploadSession30.getSize();var o=new (c('VideoUploadRequestContext'))().setFile(this.$VideoUploadSession30).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession25).setSupportsChunking(this.$VideoUploadSession12).setSupportsFileAPI(this.$VideoUploadSession13).setCreatorProduct(this.$VideoUploadSession30.getCreatorProduct()).setThumbnailConfig(this.$VideoUploadSession10).setPartitionStartOffset(this.$VideoUploadSession43).setPartitionEndOffset(this.$VideoUploadSession46);if(this.$VideoUploadSession14)o.setUseParallelChunks(this.$VideoUploadSession14);if(this.$VideoUploadSession32)o.setIsSphericalVideo(this.$VideoUploadSession32);if(o.setComposerEntryPointRef)o.setComposerEntryPointRef(this.$VideoUploadSession7);this.$VideoUploadSession51();this.$VideoUploadSession17.sendRequest(o);this.inform('metadata-parsed',k);};j.prototype.$VideoUploadSession18=function(k){'use strict';var l=this.$VideoUploadSession12?k.chunk_start_uri:k.start_uri,m=this.__getVideoUploadStartRequestManager(l,k.start_max_transport_retries,k.start_transport_retry_interval_base,k.skip_upload_enabled,k.skip_upload_file_size_limit,k.start_max_server_retries,k.start_server_retry_interval_base);m.subscribe('request-started',this.$VideoUploadSession52.bind(this));m.subscribe('request-finished',this.$VideoUploadSession53.bind(this));m.subscribe('request-failed',this.$VideoUploadSession54.bind(this));return m;};j.prototype.$VideoUploadSession20=function(k){'use strict';var l=this.$VideoUploadSession12?k.chunk_receive_uri:k.receive_uri,m=this.__getVideoUploadReceiveRequestManager(l,k);m.subscribe('request-started',this.$VideoUploadSession55.bind(this));m.subscribe('request-progressed',this.$VideoUploadSession56.bind(this));m.subscribe('request-finished',this.$VideoUploadSession57.bind(this));m.subscribe('request-failed',this.$VideoUploadSession58.bind(this));m.subscribe('request-timeout',this.$VideoUploadSession59.bind(this));m.subscribe('online',this.$VideoUploadSession60.bind(this));m.subscribe('offline',this.$VideoUploadSession61.bind(this));return m;};j.prototype.$VideoUploadSession23=function(k){'use strict';var l=this.$VideoUploadSession12?k.chunk_post_uri:k.post_uri,m=this.__getVideoUploadPostRequestManager(l,k);m.subscribe('request-finished',this.__handlePostRequestFinished.bind(this));m.subscribe('request-failed',this.$VideoUploadSession62.bind(this));return m;};j.prototype.$VideoUploadSession52=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_UPLOADING,{hash_time:k.hash_time,hash_exception:k.hash_exception});this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_START_REQUEST);this.$VideoUploadSession63=Date.now();this.inform('upload-started');};j.prototype.$VideoUploadSession53=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_PROGRESS_UPLOADING_START_REQUEST,{transport_retries:k.transport_retries,hash_time:k.hash_time,skip_upload:k.skip_upload?1:null});this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_START_REQUEST);this.$VideoUploadSession27=k.video_id;this.$VideoUploadSession64=k.skip_upload;if(!k.skip_upload){var l;l=this.__createReceiveRequestContext(k,false);this.$VideoUploadSession19.sendRequest(l);if(this.$VideoUploadSession40){l=this.__createReceiveRequestContext(k,true);this.$VideoUploadSession21.sendRequest(l);}}else{this.inform('upload-progressed',{start_offset:0,end_offset:this.$VideoUploadSession30.getSize(),file_size:this.$VideoUploadSession30.getSize(),sent_bytes:this.$VideoUploadSession30.getSize(),video_id:k.video_id,skip_upload:k.skip_upload});if(this.$VideoUploadSession5)this.__logFinishedUploading();this.inform('upload-finished',{start_offset:0,end_offset:this.$VideoUploadSession30.getSize(),video_id:k.video_id});}};j.prototype.__fetchReceiveRequestManagerStateLogData=function(){'use strict';var k={};if(this.$VideoUploadSession19!=null)this.$VideoUploadSession19.appendStateLogData(k,'requestManager_');if(this.$VideoUploadSession21!=null)this.$VideoUploadSession21.appendStateLogData(k,'requestManagerEx_');return k;};j.prototype.__createReceiveRequestContext=function(k,l){'use strict';if(!l)l=false;var m=new (c('VideoUploadRequestContext'))();this.__setupReceiveRequestContext(m,k,l);return m;};j.prototype.__setupReceiveRequestContext=function(k,l,m){'use strict';var n,o,p,q;if(!m){n=this.$VideoUploadSession43;o=this.$VideoUploadSession46;p=l.start_offset;q=l.end_offset;}else{n=this.$VideoUploadSession47;o=this.$VideoUploadSession50;p=this.$VideoUploadSession47;q=this.$VideoUploadSession47+this.$VideoUploadSession16>=this.$VideoUploadSession50?this.$VideoUploadSession50:this.$VideoUploadSession47+this.$VideoUploadSession16;}k.setFile(this.$VideoUploadSession30).setVideoID(l.video_id).setStartOffset(p).setEndOffset(q).setPartitionStartOffset(n).setPartitionEndOffset(o).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession25).setThumbnailConfig(this.$VideoUploadSession10).setSupportsChunking(this.$VideoUploadSession12);if(this.$VideoUploadSession14)k.setUseParallelChunks(this.$VideoUploadSession14);if(k.setComposerEntryPointRef)k.setComposerEntryPointRef(this.$VideoUploadSession7);};j.prototype.$VideoUploadSession54=function(event,k){'use strict';var l=this.__getLogErrorData(k);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_START_REQUEST,l);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,l);var m=k.error_is_transient?c('VideoUploadLogger').EVENT_RESIGNED_FLOW:c('VideoUploadLogger').EVENT_FAILED_FLOW;if(this.$VideoUploadSession5){if(this.$VideoUploadSession37){this.__logEvent(m);this.$VideoUploadSession37=false;}}else this.__logEvent(m);this.$VideoUploadSession65();this.inform('upload-failed',k);};j.prototype.$VideoUploadSession55=function(event,k){'use strict';if(!k.start_offset&&!k.transport_retries&&!k.server_retries)this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_SENDING_BYTES,{total_bytes:this.$VideoUploadSession30.getSize()});if(this.$VideoUploadSession12)this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_SENDING_CHUNK_BYTES,{start_offset:k.start_offset,total_bytes:k.end_offset-k.start_offset,transport_retries:k.transport_retries,server_retries:k.server_retries,upload_speed:k.upload_speed});};j.prototype.$VideoUploadSession56=function(event,k){'use strict';if(k.start_offset<this.$VideoUploadSession46){this.$VideoUploadSession44=k.start_offset;this.$VideoUploadSession45=k.sent_bytes;}else{this.$VideoUploadSession48=k.start_offset;this.$VideoUploadSession49=k.sent_bytes;}k.start_offset=this.$VideoUploadSession44;k.sent_bytes=this.$VideoUploadSession45;if(this.$VideoUploadSession40){k.start_offset+=this.$VideoUploadSession48-this.$VideoUploadSession47;k.sent_bytes+=this.$VideoUploadSession49;}var l=Math.min(k.start_offset+k.sent_bytes,k.file_size);if(l>this.$VideoUploadSession31){this.$VideoUploadSession31=l;this.inform('upload-progressed',k);}};j.prototype.$VideoUploadSession57=function(event,k){'use strict';if(this.$VideoUploadSession12)this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_SENDING_CHUNK_BYTES,{start_offset:k.start_offset,sent_bytes:k.end_offset-k.start_offset,transport_retries:k.transport_retries,server_retries:k.server_retries,upload_speed:k.upload_speed});if(k.start_offset<this.$VideoUploadSession46){this.$VideoUploadSession41=k.end_offset>=this.$VideoUploadSession46;}else this.$VideoUploadSession42=k.end_offset>=this.$VideoUploadSession50;if(!this.$VideoUploadSession13||this.$VideoUploadSession41&&(!this.$VideoUploadSession40||this.$VideoUploadSession42)){this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_SENDING_BYTES,{sent_bytes:this.$VideoUploadSession30.getSize()});this.$VideoUploadSession38=Date.now()-this.$VideoUploadSession63;if(this.$VideoUploadSession5)this.__logFinishedUploading();k.video_id=this.$VideoUploadSession27;this.inform('upload-finished',k);if(this.$VideoUploadSession9){this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_FLOW);this.$VideoUploadSession37=false;this.$VideoUploadSession65();this.inform('multimedia-upload-finished',k);}}};j.prototype.$VideoUploadSession58=function(event,k){'use strict';var l=this.__getLogErrorData(k);if(this.$VideoUploadSession12)this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_SENDING_CHUNK_BYTES,l);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,l);var m=k.error_is_transient?c('VideoUploadLogger').EVENT_RESIGNED_FLOW:c('VideoUploadLogger').EVENT_FAILED_FLOW;if(this.$VideoUploadSession5){if(this.$VideoUploadSession37){this.__logEvent(m);this.$VideoUploadSession37=false;}}else this.__logEvent(m);this.$VideoUploadSession65();this.inform('upload-failed',k);};j.prototype.$VideoUploadSession59=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_TIMEOUT_SENDING_CHUNK_BYTES,{start_offset:k.start_offset,sent_bytes:k.end_offset-k.start_offset,transport_retries:k.transport_retries,server_retries:k.server_retries,timeout_retries:k.timeout_retries,upload_speed:k.upload_speed});};j.prototype.$VideoUploadSession60=function(event,k){'use strict';this.inform('online',k);};j.prototype.$VideoUploadSession61=function(event,k){'use strict';this.inform('offline',k);};j.prototype.__handlePostRequestFinished=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_POST_REQUEST);if(!k.video_id)k.video_id=this.$VideoUploadSession27;if(!this.$VideoUploadSession5)this.__logFinishedUploading();this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_FLOW);this.$VideoUploadSession37=false;this.$VideoUploadSession65();var l=babelHelpers['extends']({},k,this.$VideoUploadSession35);this.inform('post-finished',l);};j.prototype.__logFinishedUploading=function(){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_UPLOADING,{elapsed_time:this.$VideoUploadSession38,skip_upload:this.$VideoUploadSession64?1:null});this.$VideoUploadSession29=true;};j.prototype.$VideoUploadSession62=function(event,k){'use strict';var l=this.__getLogErrorData(k);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_POST_REQUEST,l);if(this.$VideoUploadSession28){this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,l);var m=k.error_is_transient?c('VideoUploadLogger').EVENT_RESIGNED_FLOW:c('VideoUploadLogger').EVENT_FAILED_FLOW;this.__logEvent(m);}this.$VideoUploadSession65();this.inform('post-failed',k);};j.prototype.$VideoUploadSession36=function(){'use strict';this.$VideoUploadSession17.cancelRequest();this.$VideoUploadSession19.cancelRequest();if(this.$VideoUploadSession40)this.$VideoUploadSession21.cancelRequest();this.$VideoUploadSession65();if(this.$VideoUploadSession27){new (c('AsyncRequest'))('/ajax/video/actions/delete').setData({fbid:this.$VideoUploadSession27,redirect:false}).send();this.$VideoUploadSession27=null;}};j.prototype.$VideoUploadSession51=function(){'use strict';this.$VideoUploadSession28=true;if(this.$VideoUploadSession8){this.$VideoUploadSession39=new (c('VideoUploadCrashMonitor'))(this.$VideoUploadSession25,this.$VideoUploadSession6,this.$VideoUploadSession1,this.$VideoUploadSession2,this.$VideoUploadSession3,this.$VideoUploadSession12,this.$VideoUploadSession7,!this.$VideoUploadSession5||this.$VideoUploadSession37);this.$VideoUploadSession39.startSession();}};j.prototype.$VideoUploadSession65=function(){'use strict';this.$VideoUploadSession28=false;if(this.$VideoUploadSession39){this.$VideoUploadSession39.endSession();this.$VideoUploadSession39=null;}};j.prototype.__getLogErrorData=function(k){'use strict';return {error:k.error_summary,error_code:k.error_code,error_description:k.error_description,transport_retries:k.transport_retries,server_retries:k.server_retries};};j.prototype.__logEvent=function(event,k){'use strict';var l=this.getLogger();k=k||{};if(this.$VideoUploadSession30){k.file_size=this.$VideoUploadSession30.getSize();k.file_extension=this.$VideoUploadSession30.getExtension();k.sent_bytes=this.$VideoUploadSession31;}l.logEvent(event,k);};j.prototype.__getVideoUploadStartRequestManager=function(k,l,m,n,o,p,q){'use strict';return new (c('VideoUploadStartRequestManager'))(k,l,m,n,o,p,q);};j.prototype.__getVideoUploadReceiveRequestManager=function(k,l){'use strict';return new (c('VideoUploadReceiveRequestManager'))(k,l.max_transport_retries,l.max_server_retries,l.response_timeout_enabled,l.max_response_timeout_retries,l.response_timeout_speed_variation_factor_ppt,l.transport_retry_interval_base,l.server_retry_interval_base,l.receive_errors_force_retry);};j.prototype.__getVideoUploadPostRequestManager=function(k,l){'use strict';return new (c('VideoUploadPostRequestManager'))(k,l.post_max_transport_retries,l.post_transport_retry_interval_base,l.post_max_server_retries,l.post_server_retry_interval_base);};f.exports=j;}),null);
__d('VideoUploader',['ArbiterMixin','VideoUploadCrashMonitor','VideoUploadLogger','VideoUploadSession','arrayContains','mixin'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$VideoUploader1=k;this.$VideoUploader2=null;if(k.monitor_crashes){this.$VideoUploader3=new (c('VideoUploadCrashMonitor'))();this.$VideoUploader3.logKnownCrashes();}}j.prototype.getLogger=function(){'use strict';if(!this.$VideoUploader2)return;if(this.$VideoUploader2.getLogger)return this.$VideoUploader2.getLogger();};j.prototype.upload=function(k){'use strict';if(this.$VideoUploader2)return;this.$VideoUploader2=this.__getVideoUploadSession(this.$VideoUploader1);this.$VideoUploader2.subscribe(this.__getEventsWhichShouldListenFromSession(),function(event,l){return this.$VideoUploader4(event,l);}.bind(this));this.$VideoUploader2.start(k);};j.prototype.__getVideoUploadSession=function(k){'use strict';return new (c('VideoUploadSession'))(k);};j.prototype.__getEventsWhichShouldListenFromSession=function(){'use strict';return ['upload-requested','upload-started','upload-progressed','upload-finished','upload-failed','post-started','post-finished','post-failed','online','offline','metadata-parsed'];};j.prototype.postUserRequest=function(){'use strict';if(!this.$VideoUploader2)return;if(this.$VideoUploader2.startFlow)this.$VideoUploader2.startFlow();};j.prototype.post=function(k){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.post(k);};j.prototype.getVideoID=function(){'use strict';return this.$VideoUploader2.getVideoID();};j.prototype.cancel=function(){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.cancel();this.$VideoUploader2=null;};j.prototype.abandon=function(){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.abandon();this.$VideoUploader2=null;};j.prototype.reset=function(){'use strict';this.$VideoUploader2=null;};j.prototype.getUploadSession=function(){'use strict';return this.$VideoUploader2;};j.prototype.getLoggerData=function(){'use strict';return {waterfall_id:this.$VideoUploader2?this.$VideoUploader2.$VideoUploader5:null,actor_id:this.$VideoUploader1.actor_id,target_id:this.$VideoUploader1.target_id,target_type:this.$VideoUploader1.target_type,composer_entry_point_ref:this.$VideoUploader1.composer_entry_point_ref};};j.prototype.isPostInProgress=function(){'use strict';return !!this.$VideoUploader2&&this.$VideoUploader2.isPostInProgress();};j.prototype.isSessionInProgress=function(){'use strict';return !!this.$VideoUploader2&&this.$VideoUploader2.isInProgress();};j.prototype.getUploadParameters=function(){'use strict';return this.$VideoUploader1;};j.prototype.__getSession=function(){'use strict';return this.$VideoUploader2;};j.prototype.__getEventsForWhichSessionShouldBeSetToNull=function(){'use strict';return ['upload-failed','post-finished','multimedia-upload-finished'];};j.prototype.$VideoUploader4=function(event,k){'use strict';if(c('arrayContains')(this.__getEventsForWhichSessionShouldBeSetToNull(),event))this.$VideoUploader2=null;this.__delegateEvent(event,k);};j.prototype.__delegateEvent=function(event,k){'use strict';this.inform(event,k);};f.exports=j;}),null);
__d('ReactComposerVideoXUploader',['invariant','ReactComposerEvents','ReactComposerMediaUploadActions','ReactComposerMediaUploadStore','ReactComposerMediaUploadType','ReactComposerMediaFilterUtils','ReactComposerMediaUploadActionType','VideoUploader','VideoUploadProgressBar','Arbiter','DOM','JSLogger','PhotosUploadID','SubscriptionsHandler','VideoUploadFile','MultimediaUploadProcessingDialog.react','React','ReactDOM','throttle'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=250;function j(k){this.$ReactComposerVideoXUploader3=k;this.$ReactComposerVideoXUploader2=new (c('SubscriptionsHandler'))();this.$ReactComposerVideoXUploader6=0;this.$ReactComposerVideoXUploader7=[];!k.composerID?h(0):void 0;!k.uploaderParams?h(0):void 0;this.$ReactComposerVideoXUploader2.addSubscriptions(c('Arbiter').subscribe(c('ReactComposerEvents').POST_SUCCEEDED+k.composerID,c('throttle')(this.$ReactComposerVideoXUploader8,i,this)),c('Arbiter').subscribe(c('ReactComposerEvents').POST_STARTED+k.composerID,c('throttle')(this.$ReactComposerVideoXUploader9,i,this)));this.$ReactComposerVideoXUploader1=k.composerID;this.$ReactComposerVideoXUploader4=k.uploaderParams;this.$ReactComposerVideoXUploader5=c('JSLogger').create('composer');}j.prototype.upload=function(k){k.forEach(function(l){if(!c('ReactComposerMediaFilterUtils').hasVideos([l.name]))return;if(!l.uploadID)l.uploadID=c('PhotosUploadID').getNewID();this.$ReactComposerVideoXUploader10({uploadID:l.uploadID,fileName:l.name,fileURL:URL.createObjectURL(l)});this.uploadVideo(l);}.bind(this));};j.prototype.uploadVideo=function(k){var l=JSON.parse(JSON.stringify(this.$ReactComposerVideoXUploader4));l.isMultiMediaPost=true;var m=new (c('VideoUploader'))(l);this.$ReactComposerVideoXUploader7[k.uploadID]=m;var n=c('VideoUploadFile').fromFile(k);this.$ReactComposerVideoXUploader2.addSubscriptions(m.subscribe('upload-started',this.$ReactComposerVideoXUploader11.bind(this,k)),m.subscribe('upload-progressed',this.$ReactComposerVideoXUploader12.bind(this,k)),m.subscribe('upload-failed',this.$ReactComposerVideoXUploader13.bind(this,k)),m.subscribe('upload-finished',this.$ReactComposerVideoXUploader14.bind(this,k)));try{m.upload(n);}catch(o){this.$ReactComposerVideoXUploader5.error('error_send_unpublished_files',o);throw o;}};j.prototype.cancelUpload=function(k){var l=this.$ReactComposerVideoXUploader7[k];l.cancel();};j.prototype.$ReactComposerVideoXUploader10=function(k){c('ReactComposerMediaUploadActions').enqueue(this.$ReactComposerVideoXUploader1,k.uploadID,k.fileName,c('ReactComposerMediaUploadStore').getUploads(this.$ReactComposerVideoXUploader1).size,c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_ENQUEUED,c('ReactComposerMediaUploadType').VIDEO,k.fileURL);};j.prototype.$ReactComposerVideoXUploader11=function(k,l){c('ReactComposerMediaUploadActions').startUploading(this.$ReactComposerVideoXUploader1,k.uploadID,k,c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_UPLOADING);};j.prototype.$ReactComposerVideoXUploader12=function(k,l,m){var n=c('VideoUploadProgressBar').computeProgress(m.start_offset,m.sent_bytes,m.file_size,0,0);c('ReactComposerMediaUploadActions').progressUploading(this.$ReactComposerVideoXUploader1,k.uploadID,Math.round(n));};j.prototype.$ReactComposerVideoXUploader14=function(k,l,m){c('ReactComposerMediaUploadActions').doneUploading(this.$ReactComposerVideoXUploader1,k.uploadID,c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_DONE,k,0,m.video_id,'');};j.prototype.$ReactComposerVideoXUploader13=function(k,l,m){var n={code:m.error_code,description:m.error_description,summary:m.error_summary,transient:m.error_is_transient};c('ReactComposerMediaUploadActions').failUploading(this.$ReactComposerVideoXUploader1,k.uploadID,k,0,n,c('ReactComposerMediaUploadActionType').VIDEO_UPLOAD_FAILED);};j.prototype.$ReactComposerVideoXUploader8=function(){var k=c('DOM').create('div');c('DOM').appendContent(document.body,k);if(this.$ReactComposerVideoXUploader6>0)c('ReactDOM').render(c('React').createElement(c('MultimediaUploadProcessingDialog.react'),{numOfVideos:this.$ReactComposerVideoXUploader6}),k);};j.prototype.$ReactComposerVideoXUploader9=function(){this.$ReactComposerVideoXUploader6=c('ReactComposerMediaUploadStore').getUploadsCount(this.$ReactComposerVideoXUploader1,c('ReactComposerMediaUploadType').VIDEO);};j.prototype.destroy=function(){this.$ReactComposerVideoXUploader2.release();};f.exports=j;}),null);
__d('SlideshowImageUtil',['invariant','SlideshowConstants'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i='-',j=24,k=1.3,l=10,m=460,n=32,o=.8,p='x',q={shouldCropImages:function r(s){var t=s[0].width,u=s[0].height;for(var v=s,w=Array.isArray(v),x=0,v=w?v:v[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var y;if(w){if(x>=v.length)break;y=v[x++];}else{x=v.next();if(x.done)break;y=x.value;}var z=y;if(z.width!==t||z.height!==u)return true;}return false;},calculateDefaultCoordinates:function r(s,t){var u=void 0,v=void 0;if(s.width/t>s.height){u=s.height;v=s.height*t;}else{v=s.width;u=s.width/t;}var w=(s.width-v)/2,x=(s.height-u)/2,y=Math.floor(w)-w,z=Math.floor(x)-x;return [[w+y,x+z],[Math.round(w+v+y),Math.round(x+u+z)]];},getPreviewBoxDimensions:function r(s,t,u){var v=t,w=t;if(s.length>0){var x=s[0],y=Object.keys(x)[0];switch(y){case c('SlideshowConstants').formats.Wide:v=t/u;break;case c('SlideshowConstants').formats.Square:break;default:var z=y.split(p),aa=Number(z[0]),ba=Number(z[1]);if(aa>ba){v=Math.floor(w*ba/aa);}else w=Math.floor(v*aa/ba);break;}}return {width:w,height:v};},getFullSizeImageBoxCroppingSpec:function r(s,t){var u=t.width/t.height,v=this.calculateDefaultCoordinates(s,u);!(v.length===2)?h(0):void 0;return {format:c('SlideshowConstants').formats.Original,topLeft:v[0],bottomRight:v[1]};},getDefaultCroppingSpec:function r(s){var t=this.calculateDefaultCoordinates(s,1);!(t.length===2)?h(0):void 0;return {format:c('SlideshowConstants').formats.Square,topLeft:t[0],bottomRight:t[1]};},getHorizontalAlignmentForAPI:function r(s){var t=s.split(i);return t[1];},getFontSize:function r(s){return Math.floor(j*s);},getLineHeight:function r(){return k;},getOpacity:function r(){return o;},getTextoverlayMaxEdge:function r(s,t){return s-n*t*2-l*t*2;},getTextoverlayPadding:function r(s){return l*s;},getTextoverlayMargin:function r(s){return n*s;},getScaleMultiplierFromCrops:function r(s){var t=Object.keys(s)[0],u=t.split(p),v=Number(u[0]),w=Number(u[1]);return q.getScaleMultiplier(v,w);},getScaleMultiplier:function r(s,t){return Math.max(s/m,t/m);},getOuterTextboxCoordinatesForAPI:function r(s,t,u){var v=Object.keys(s)[0],w=v.split(p),x=Number(w[0]),y=Number(w[1]),z=q.calculateTextboxCoordinates(y,x,t,u);return [Math.floor(z.marginLeft),Math.floor(y-z.marginTop-z.textHeight),Math.ceil(z.marginLeft+z.textWidth),Math.ceil(y-z.marginTop)];},getInnerTextboxCoordinatesForAPI:function r(s,t,u){var v=Object.keys(s)[0],w=v.split(p),x=Number(w[0]),y=Number(w[1]),z=q.calculateTextboxCoordinates(y,x,t,u),aa=q.getTextoverlayPadding(u)-4,ba={marginLeft:z.marginLeft+aa,marginTop:z.marginTop,textHeight:z.textHeight,textWidth:z.textWidth-2*aa};return [Math.floor(ba.marginLeft),Math.floor(y-ba.marginTop-ba.textHeight),Math.ceil(ba.marginLeft+ba.textWidth),Math.ceil(y-ba.marginTop)];},calculateTextboxCoordinates:function r(s,t,u,v){var w=u.text_alignment.split(i),x=w[1],y=w[0],z=q.getFontSize(v),aa=q.getTextoverlayMaxEdge(t,v),ba=q.getTextoverlayMaxEdge(s,v),ca=document.createElement('div');ca.textContent=u.textoverlay_content?u.textoverlay_content:'';ca.style.visibility='hidden';ca.style.display='inline-block';ca.style.wordWrap='break-word';ca.style.whiteSpace='pre-wrap';ca.style.fontFamily=u.font;ca.style.fontSize=z+'px';ca.style.textAlign=x;ca.style.maxWidth=aa+'px';ca.style.maxHeight=ba+'px';ca.style.lineHeight=q.getLineHeight()*z+'px';ca.style.padding=q.getTextoverlayPadding(v)+'px';document.body.appendChild(ca);var da=ca.clientWidth,ea=ca.clientHeight;document.body.removeChild(ca);var fa=n*v,ga=n*v,ha=t-n*v,ia=s-n*v;if(x=='center'){fa=Math.min((t-da)/2,ha);}else if(x=='right')fa=Math.min(t-n*v-da,ha);if(y=='center'){ga=Math.min((s-ea)/2,ia);}else if(y=='bottom')ga=Math.min(s-n*v-ea,ia);return {marginLeft:fa,marginTop:ga,textHeight:ea,textWidth:da};}};f.exports=q;}),null);
__d('mergeDeepInto',['invariant','mergeHelpers'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('mergeHelpers').ArrayStrategies,j=c('mergeHelpers').checkArrayStrategy,k=c('mergeHelpers').checkMergeArrayArgs,l=c('mergeHelpers').checkMergeLevel,m=c('mergeHelpers').checkMergeObjectArgs,n=c('mergeHelpers').isTerminal,o=c('mergeHelpers').normalizeMergeArg,p=function t(u,v,w,x){m(u,v);l(x);var y=v?Object.keys(v):[];for(var z=0;z<y.length;z++){var aa=y[z];r(u,v,aa,w,x);}},q=function t(u,v,w,x){k(u,v);l(x);var y=Math.max(u.length,v.length);for(var z=0;z<y;z++)r(u,v,z,w,x);},r=function t(u,v,w,x,y){var z=v[w],aa=v.hasOwnProperty(w),ba=aa&&n(z),ca=aa&&Array.isArray(z),da=aa&&!ca&&!ca,ea=u[w],fa=u.hasOwnProperty(w),ga=fa&&n(ea),ha=fa&&Array.isArray(ea),ia=fa&&!ha&&!ha;if(ga){if(ba){u[w]=z;}else if(ca){u[w]=[];q(u[w],z,x,y+1);}else if(da){u[w]={};p(u[w],z,x,y+1);}else if(!aa)u[w]=ea;}else if(ha){if(ba){u[w]=z;}else if(ca){!i[x]?h(0):void 0;if(x===i.Clobber)ea.length=0;q(ea,z,x,y+1);}else if(da){u[w]={};p(u[w],z,x,y+1);}else !aa;}else if(ia){if(ba){u[w]=z;}else if(ca){u[w]=[];q(u[w],z,x,y+1);}else if(da){p(ea,z,x,y+1);}else !aa;}else if(!fa)if(ba){u[w]=z;}else if(ca){u[w]=[];q(u[w],z,x,y+1);}else if(da){u[w]={};p(u[w],z,x,y+1);}else !aa;},s=function t(u,v,w){var x=o(v);j(w);p(u,x,w,0);};f.exports=s;}),null);
__d('ReactComposerSelectedImagesStore',['ReactComposerDispatcher','ReactComposerMediaUploadActionType','ReactComposerMediaUploadStore','ReactComposerPhotoStore','ReactComposerSlideshowActionType','ReactComposerStoreBase','SlideshowConstants','SlideshowImageUtil','immutable','mergeDeepInto'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=1.778,k='x',l=1,m=c('SlideshowConstants').formats,n=c('SlideshowConstants').max_photo_num;h=babelHelpers.inherits(o,c('ReactComposerStoreBase'));i=h&&h.prototype;o.prototype.$ReactComposerSelectedImagesStore1=function(p,q,r){var s;if(p.isLoading)return {};var t=c('SlideshowImageUtil').calculateDefaultCoordinates({width:p.width,height:p.height},r);return s={},s[q]=t,s;};o.prototype.$ReactComposerSelectedImagesStore2=function(p,q,r){var s=r;if(!s)s=this.getComposerData(p).format;return this.$ReactComposerSelectedImagesStore3(q,s);};o.prototype.$ReactComposerSelectedImagesStore3=function(p,q){if(!p.length)return [];switch(q){case m.Original:var r=p[0];return p.map(function(s){return this.$ReactComposerSelectedImagesStore1(s,r.width+k+r.height,r.width/r.height);}.bind(this));case m.Wide:return p.map(function(s){return this.$ReactComposerSelectedImagesStore1(s,q,j);}.bind(this));case m.Square:return p.map(function(s){return this.$ReactComposerSelectedImagesStore1(s,q,l);}.bind(this));default:return [];}};function o(){var p=void 0;i.constructor.call(this,function(){return {selectedImages:[],imagesCrops:[],editState:null,format:c('SlideshowConstants').formats.Original,removedUploadIDs:[],addedUploadIDs:[]};},function(q){switch(q.type){case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_ENQUEUED:c('ReactComposerDispatcher').waitFor([c('ReactComposerMediaUploadStore').getDispatchToken()]);p&&p.$ReactComposerSelectedImagesStore4(q);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_DONE:c('ReactComposerDispatcher').waitFor([c('ReactComposerPhotoStore').getDispatchToken()]);p&&p.$ReactComposerSelectedImagesStore5(q);break;case c('ReactComposerSlideshowActionType').IMAGES_SELECT_CONFIRM:p&&p.$ReactComposerSelectedImagesStore6(q);break;case c('ReactComposerSlideshowActionType').IMAGE_REMOVE:p&&p.$ReactComposerSelectedImagesStore7(q);break;case c('ReactComposerSlideshowActionType').REORDER_IMAGES:p&&p.$ReactComposerSelectedImagesStore8(q);break;case c('ReactComposerSlideshowActionType').FORMAT_CHANGE:p&&p.$ReactComposerSelectedImagesStore9(q);break;case c('ReactComposerSlideshowActionType').TOGGLE_SLIDESHOW_DIALOG:p&&p.$ReactComposerSelectedImagesStore10(q);break;case c('ReactComposerSlideshowActionType').HIDE_SLIDESHOW_EDIT_FIELD:p&&p.$ReactComposerSelectedImagesStore11(q);break;case c('ReactComposerSlideshowActionType').SHOW_EDIT_SLIDESHOW_DIALOG:p&&p.$ReactComposerSelectedImagesStore12(q);break;case c('ReactComposerSlideshowActionType').CLOSE_EDIT_SLIDESHOW_DIALOG:p&&p.$ReactComposerSelectedImagesStore13(q);break;case c('ReactComposerSlideshowActionType').CREATE:p&&p.$ReactComposerSelectedImagesStore14(q);break;default:break;}});p=this;}o.prototype.$ReactComposerSelectedImagesStore4=function(p){var q=p.composerID,r=this.getComposerData(q),s=c('ReactComposerMediaUploadStore').getUploads(q),t=this.addNewImagesFromPhotoUploads(s,r.selectedImages,r.removedUploadIDs);r.selectedImages=r.selectedImages.concat(t);if(r.editState!==null)r.addedUploadIDs=r.addedUploadIDs.concat(t.map(function(u){return u.key;}));this.emitChange(q);};o.prototype.$ReactComposerSelectedImagesStore5=function(p){var q=p.composerID,r=this.getComposerData(q),s=c('ReactComposerPhotoStore').getPhotos(q);r.selectedImages=this.replacePhotoUploadsFromPhotos(s,r.selectedImages);r.imagesCrops=this.$ReactComposerSelectedImagesStore2(q,r.selectedImages);this.emitChange(q);};o.prototype.$ReactComposerSelectedImagesStore11=function(p){var q=p.composerID,r=this.getComposerData(q);r.selectedImages=[];r.imagesCrops=[];this.emitChange(q);};o.prototype.$ReactComposerSelectedImagesStore10=function(p){var q=p.composerID,r=this.getComposerData(q);if(!p.shouldShowSlideshowDialog){r.selectedImages=[];r.imagesCrops=[];}this.emitChange(q);};o.prototype.$ReactComposerSelectedImagesStore6=function(p){var q=p.composerID,r=this.getComposerData(q);r.selectedImages=r.selectedImages.concat(p.selectedImages);r.imagesCrops=this.$ReactComposerSelectedImagesStore2(q,r.selectedImages);this.emitChange(q);};o.prototype.$ReactComposerSelectedImagesStore7=function(p){var q=p.composerID,r=this.getComposerData(q);if(r.editState!==null)r.removedUploadIDs.push(p.removeImage.key);var s=r.selectedImages.filter(function(t){return t.key!==p.removeImage.key;});r.selectedImages=s;r.imagesCrops=this.$ReactComposerSelectedImagesStore2(q,s);this.emitChange(q);};o.prototype.$ReactComposerSelectedImagesStore8=function(p){var q=p.composerID,r=this.getComposerData(q),s=p.data,t=s.fromIndex,u=s.toIndex,v=r.selectedImages.slice(0),w=Object.assign({},v[t]);v[t].remove=true;v.splice(t>u?u:u+1,0,w);v=v.filter(function(x){return !x.remove;});r.selectedImages=v;r.imagesCrops=this.$ReactComposerSelectedImagesStore2(q,v);this.emitChange(q);};o.prototype.$ReactComposerSelectedImagesStore9=function(p){var q=p.composerID,r=this.getComposerData(q);r.format=p.format;r.imagesCrops=this.$ReactComposerSelectedImagesStore2(q,r.selectedImages,p.format);this.emitChange(q);};o.prototype.$ReactComposerSelectedImagesStore12=function(p){var q=p.composerID,r=this.getComposerData(q),s={};c('mergeDeepInto')(s,r);r.editState=s;this.emitChange(q);};o.prototype.$ReactComposerSelectedImagesStore13=function(p){var q=p.composerID,r=this.getComposerData(q),s=r.editState;r.selectedImages=s.selectedImages;r.imagesCrops=s.imagesCrops;r.format=s.format;r.editState=null;r.removedUploadIDs=[];r.addedUploadIDs=[];this.emitChange(q);};o.prototype.$ReactComposerSelectedImagesStore14=function(p){var q=p.composerID,r=this.getComposerData(q);r.editState=null;r.removedUploadIDs=[];r.addedUploadIDs=[];this.emitChange(q);};o.prototype.getImagesFromPhotoUploads=function(p){var q=[];p.forEach(function(r){q.push({height:null,isLoading:true,key:r.id,url:null,width:null});});return q;};o.prototype.addNewImagesFromPhotoUploads=function(p,q,r){var s=this.getImagesFromPhotoUploads(p),t=s.filter(function(u){var v=q.findIndex(function(x){return x.key===u.key;}),w=r.findIndex(function(x){return x===u.key;});return v===-1&&w===-1;});return t;};o.prototype.replacePhotoUploadsFromPhotos=function(p,q){return (q.map(function(r){var s=r,t=p.find(function(u){return u.uploadID===r.key;});if(t!=null)s={height:t.height,isLoading:false,key:t.uploadID,photoID:t.id,thumbSrc:t.thumbSrc,url:t.imageSrc,width:t.width};return s;}));};o.prototype.getPhotoIDs=function(p){var q=this.getComposerData(p);return q.selectedImages.map(function(r){return r.photoID;}).slice(0,n);};o.prototype.getRemovedUploadIDs=function(p){return this.getComposerData(p).removedUploadIDs;};o.prototype.getAddedUploadIDs=function(p){return this.getComposerData(p).addedUploadIDs;};o.prototype.getSelectedImages=function(p){return this.getComposerData(p).selectedImages;};o.prototype.getThumbnailSrc=function(p){var q=this.getComposerData(p).selectedImages;if(q.length>0)return q[0].thumbSrc;return null;};o.prototype.getImagesCrops=function(p){return this.getComposerData(p).imagesCrops;};o.prototype.getNumberOfImages=function(p){return Math.min(this.getComposerData(p).selectedImages.length,n);};o.prototype.getFormat=function(p){return this.getComposerData(p).format;};f.exports=new o();}),null);
__d('ReactComposerSlideshowStore',['ReactComposerSlideshowActionType','ReactComposerSlideshowPlacement','ReactComposerStoreBase','SlideshowConstants','mergeDeepInto'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {durationInMS:1000,editState:null,isSlideshowSelected:false,placement:c('ReactComposerSlideshowPlacement').PHOTO_VIDEO_TAB,shouldShowSlideshowDialog:false,transitionInMS:c('SlideshowConstants').transitions.None};},function(l){switch(l.type){case c('ReactComposerSlideshowActionType').CREATE:k&&k.$ReactComposerSlideshowStore1(l);break;case c('ReactComposerSlideshowActionType').SHOW_SLIDESHOW_EDIT_FIELD:k&&k.$ReactComposerSlideshowStore2(l);break;case c('ReactComposerSlideshowActionType').HIDE_SLIDESHOW_EDIT_FIELD:k&&k.$ReactComposerSlideshowStore3(l);break;case c('ReactComposerSlideshowActionType').TOGGLE_SLIDESHOW_DIALOG:k&&k.$ReactComposerSlideshowStore4(l);break;case c('ReactComposerSlideshowActionType').TRANSITION_CHANGE:k&&k.$ReactComposerSlideshowStore5(l);break;case c('ReactComposerSlideshowActionType').DURATION_CHANGE:k&&k.$ReactComposerSlideshowStore6(l);break;case c('ReactComposerSlideshowActionType').SHOW_EDIT_SLIDESHOW_DIALOG:k&&k.$ReactComposerSlideshowStore7(l);break;case c('ReactComposerSlideshowActionType').CLOSE_EDIT_SLIDESHOW_DIALOG:k&&k.$ReactComposerSlideshowStore8(l);break;default:break;}});k=this;}j.prototype.$ReactComposerSlideshowStore1=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.isSlideshowSelected=true;m.shouldShowSlideshowDialog=false;m.editState=null;this.emitChange(l);};j.prototype.$ReactComposerSlideshowStore2=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.isSlideshowSelected=true;this.emitChange(l);};j.prototype.$ReactComposerSlideshowStore3=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.isSlideshowSelected=false;this.emitChange(l);};j.prototype.$ReactComposerSlideshowStore4=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.shouldShowSlideshowDialog=k.shouldShowSlideshowDialog;m.placement=k.placement;this.emitChange(l);};j.prototype.$ReactComposerSlideshowStore5=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.transitionInMS=k.transitionInMS;this.emitChange(l);};j.prototype.$ReactComposerSlideshowStore6=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.durationInMS=k.durationInMS;this.emitChange(l);};j.prototype.$ReactComposerSlideshowStore7=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l),n={};c('mergeDeepInto')(n,m);m.editState=n;m.shouldShowSlideshowDialog=true;this.emitChange(l);};j.prototype.$ReactComposerSlideshowStore8=function(k){'use strict';var l=k.composerID,m=this.getComposerData(l);m.shouldShowSlideshowDialog=false;m.isSlideshowSelected=true;var n=m.editState;m.durationInMS=n.durationInMS;m.transitionInMS=n.transitionInMS;m.editState=null;this.emitChange(l);};j.prototype.isSlideshowSelected=function(k){'use strict';return this.getComposerData(k).isSlideshowSelected;};j.prototype.isEditing=function(k){'use strict';return this.getComposerData(k).editState!==null;};j.prototype.shouldShowSlideshowDialog=function(k){'use strict';return this.getComposerData(k).shouldShowSlideshowDialog;};j.prototype.getPlacement=function(k){'use strict';return this.getComposerData(k).placement;};j.prototype.getDurationInMS=function(k){'use strict';return this.getComposerData(k).durationInMS;};j.prototype.getTotalLength=function(k,l){'use strict';return this.getDurationInMS(k)*l+this.getTransitionInMS(k)*l;};j.prototype.getTransitionInMS=function(k){'use strict';return this.getComposerData(k).transitionInMS;};f.exports=new j();}),null);
__d('ReactComposerVideoUploadActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({VIDEO_SET_UPLOADER:null,VIDEO_UPLOAD_ADD:null,VIDEO_UPLOAD_REMOVE:null},'ReactComposerVideoUploadActionType');}),null);
__d("XNotesComposerController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/notes\/composer\/",{page_id:{type:"Int"}});}),null);
__d('ReactComposerCreateNoteController.react',['ReactComposerContextMixin','AsyncRequest','Bootloader','React','XNotesComposerController'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerCreateNoteController',mixins:[c('ReactComposerContextMixin')],propTypes:{onClick:h.func},render:function j(){return (c('React').createElement('span',{onClick:this._onClick},this.props.children));},_onClick:function j(event){c('Bootloader').loadModules(["AsyncDialog"],function(k){var l=c('XNotesComposerController').getURIBuilder().getURI(),m=new (c('AsyncRequest'))(l).setMethod('POST').setStatusElement(this.context.composerID);k.send(m);}.bind(this),'ReactComposerCreateNoteController.react');this.props.onClick&&this.props.onClick(event);}});f.exports=i;}),null);
__d('ReactComposerStatusActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({SET_EDITOR_STATE:null,SET_ORIGINAL_EDITOR_STATE:null,SET_TEXT_LENGTH:null,SET_MENTIONS:null,SET_MENTIONS_SOURCE:null,SET_TYPEAHEAD_REPORTER:null},'ReactComposerStatusActionType');}),null);
__d('ReactComposerStatusStore',['ReactComposerStatusActionType','ReactComposerStoreBase','getMentionsTextForContentState'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {editorState:null,length:0,mentionsSource:null,originalEditorState:null,typeaheadReporter:null,mentions:null};},function(l){switch(l.type){case c('ReactComposerStatusActionType').SET_MENTIONS_SOURCE:k&&k.$ReactComposerStatusStore1(l);break;case c('ReactComposerStatusActionType').SET_TYPEAHEAD_REPORTER:k&&k.$ReactComposerStatusStore2(l);break;case c('ReactComposerStatusActionType').SET_EDITOR_STATE:k&&k.$ReactComposerStatusStore3(l);break;case c('ReactComposerStatusActionType').SET_ORIGINAL_EDITOR_STATE:k&&k.$ReactComposerStatusStore4(l);break;case c('ReactComposerStatusActionType').SET_MENTIONS:k&&k.$ReactComposerStatusStore5(l);break;case c('ReactComposerStatusActionType').SET_TEXT_LENGTH:k&&k.$ReactComposerStatusStore6(l);break;}});k=this;}j.prototype.getMentionsSource=function(k){'use strict';return this.getComposerData(k).mentionsSource;};j.prototype.getTypeaheadReporter=function(k){'use strict';return this.getComposerData(k).typeaheadReporter;};j.prototype.getEditorState=function(k){'use strict';return this.getComposerData(k).editorState;};j.prototype.getOriginalEditorState=function(k){'use strict';return this.getComposerData(k).originalEditorState;};j.prototype.getMentions=function(k){'use strict';return this.getComposerData(k).mentions;};j.prototype.getMessage=function(k){'use strict';var l=this.getEditorState(k);if(!l)return '';var m=l.getCurrentContent();return c('getMentionsTextForContentState')(m);};j.prototype.getMessageText=function(k){'use strict';var l=this.getEditorState(k);if(!l)return '';var m=l.getCurrentContent();return m?m.getPlainText():'';};j.prototype.getOriginalMessageText=function(k){'use strict';var l=this.getOriginalEditorState(k);if(!l)return '';var m=l.getCurrentContent();return m?m.getPlainText():'';};j.prototype.getTextLength=function(k){'use strict';return this.getComposerData(k).textLength;};j.prototype.$ReactComposerStatusStore1=function(k){'use strict';var l=this.getComposerData(k.composerID);l.mentionsSource=k.mentionsSource;this.emitChange(k.composerID);};j.prototype.$ReactComposerStatusStore2=function(k){'use strict';var l=this.getComposerData(k.composerID);l.typeaheadReporter=k.typeaheadReporter;this.emitChange(k.composerID);};j.prototype.$ReactComposerStatusStore3=function(k){'use strict';var l=this.getComposerData(k.composerID);l.editorState=k.editorState;this.emitChange(k.composerID);};j.prototype.$ReactComposerStatusStore4=function(k){'use strict';var l=this.getComposerData(k.composerID);l.originalEditorState=k.originalEditorState;this.emitChange(k.composerID);};j.prototype.$ReactComposerStatusStore5=function(k){'use strict';var l=this.getComposerData(k.composerID);l.mentions=k.mentions;this.emitChange(k.composerID);};j.prototype.$ReactComposerStatusStore6=function(k){'use strict';var l=this.validateAction(k,['composerID','textLength']),m=l[0],n=l[1],o=this.getComposerData(m);o.textLength=n;this.emitChange(m);};f.exports=new j();}),null);
__d("XReactComposerScrapedAttachmentController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/scraper\/",{composer_id:{type:"String",required:true},target_id:{type:"String",required:true},scrape_url:{type:"String",required:true},carousel_params:{type:"String"},entry_point:{type:"String",required:true},source_attachment:{type:"String",defaultValue:""}});}),null);
__d("XReactComposerShareAttachmentController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/share_attachment\/",{composer_id:{type:"String",required:true},target_id:{type:"String",required:true},share_type:{type:"Int",required:true},share_params:{type:"String",required:true},source_attachment:{type:"String",defaultValue:""}});}),null);
__d('ReactComposerScrapedAttachmentStore',['ActorURI','CallToActionLinkFormats','ReactComposerAttachmentActionType','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerScrapedAttachmentActionType','ReactComposerStoreBase','XReactComposerScrapedAttachmentController','XReactComposerShareAttachmentController','AsyncRequest','PagesComposerCarouselPostChildAttachmentAttributes','PagesComposerCarouselPostLogAttributes','DOM'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {markup:null,attachmentConfig:{},enabled:false,isScraping:false,permissiveMatch:null,sourceAttachment:null};},function(l){switch(l.type){case c('ReactComposerScrapedAttachmentActionType').ATTACHMENT_SCRAPE_ENABLED:k&&k.$ReactComposerScrapedAttachmentStore1(l);break;case c('ReactComposerScrapedAttachmentActionType').ATTACHMENT_PERMISSIVE_MATCH_SETTED:k&&k.$ReactComposerScrapedAttachmentStore2(l);break;case c('ReactComposerScrapedAttachmentActionType').ATTACHMENT_SCRAPE_INTENDED:k&&k.$ReactComposerScrapedAttachmentStore3(l);break;case c('ReactComposerScrapedAttachmentActionType').ATTACHMENT_SHARE_SELECTED:k&&k.$ReactComposerScrapedAttachmentStore4(l);break;case c('ReactComposerScrapedAttachmentActionType').ATTACHMENT_SCRAPED:k&&k.$ReactComposerScrapedAttachmentStore5(l);break;case c('ReactComposerAttachmentActionType').SELECT_ATTACHMENT:k&&k.$ReactComposerScrapedAttachmentStore6(l);break;case c('ReactComposerScrapedAttachmentActionType').ATTACHMENT_CAROUSEL_UPLOAD:k&&k.$ReactComposerScrapedAttachmentStore7(l);}});k=this;}j.prototype.isEnabled=function(k){'use strict';return this.getComposerData(k).isEnabled;};j.prototype.hasAttachment=function(k){'use strict';return !!this.getMarkup(k);};j.prototype.isScraping=function(k){'use strict';return this.getComposerData(k).isScraping;};j.prototype.getMarkup=function(k){'use strict';return this.getComposerData(k).markup;};j.prototype.isReadOnly=function(k){'use strict';var l=this.getComposerData(k);return l.attachmentConfig&&l.attachmentConfig.readOnly;};j.prototype.getAttachmentConfig=function(k){'use strict';var l=this.getComposerData(k);if(!l.markup)return null;if(!l.attachmentConfig.readOnly){var m=c('DOM').scry(l.markup,'input[name="attachment[params][images][0]"]').pop(),n=c('DOM').scry(l.markup,'input[name="attachment[params][title]"]').pop(),o=c('DOM').scry(l.markup,'input[name="attachment[params][summary]"]').pop();if(m!=null){if(l.attachmentConfig.params.images===undefined)l.attachmentConfig.params.images=[];l.attachmentConfig.params.images[0]=m.value;}if(n!=null)l.attachmentConfig.params.title=n.value;if(o!=null)l.attachmentConfig.params.summary=o.value;var p=c('DOM').scry(l.markup,'input[name="attachment[carousel_log]['+c('PagesComposerCarouselPostLogAttributes').USE_CAROUSEL_COMPOSER+']"]').pop();if(p!=null&&p.value==='1'){this.$ReactComposerScrapedAttachmentStore8(l);this.$ReactComposerScrapedAttachmentStore9(l);}this.$ReactComposerScrapedAttachmentStore10(l);}return l.attachmentConfig;};j.prototype.$ReactComposerScrapedAttachmentStore10=function(k){'use strict';var l={},m=Object.keys(c('PagesComposerCarouselPostLogAttributes'));for(var n=0;n<m.length;n++){var o=c('PagesComposerCarouselPostLogAttributes')[m[n]],p=c('DOM').scry(k.markup,'input[name="attachment[carousel_log]['+o+']"]').pop();if(!p)continue;l[o]=p.value;}if(Object.keys(l).length!==0)k.attachmentConfig.carousel_log=l;};j.prototype.$ReactComposerScrapedAttachmentStore8=function(k){'use strict';k.attachmentConfig.params.child_attachments={};var l=Object.keys(c('PagesComposerCarouselPostChildAttachmentAttributes')),m=0,n={};while(true){var o=false,p=0;n={};for(p=0;p<l.length;p++){var q=c('DOM').scry(k.markup,'input[name="attachment[params][child_attachments]['+m+']['+c('PagesComposerCarouselPostChildAttachmentAttributes')[l[p]]+']"]').pop();if(q==null)continue;n[c('PagesComposerCarouselPostChildAttachmentAttributes')[l[p]]]=q.value;o=true;}if(!o)break;k.attachmentConfig.params.child_attachments[m]=n;m++;}};j.prototype.$ReactComposerScrapedAttachmentStore9=function(k){'use strict';var l=k.attachmentConfig.params.child_attachments;if(!l)return;var m=null,n=0;for(var o in l)if(l.hasOwnProperty(o))if(l[o].selected==='1'){n+=1;if(n>1)return;if(l[o].video_id)m=l[o];}if(m){k.attachmentConfig.params.carousel_video_lpp={};Object.assign(k.attachmentConfig.params.carousel_video_lpp,{video_id:m.video_id,publish:true,link_title:m.name,link_description:m.description,cta_type:m.cta_type?m.cta_type:'NO_BUTTON',cta_link:m.link,cta_link_format:c('CallToActionLinkFormats').VIDEO_LPP});}};j.prototype.getPermissiveMatch=function(k){'use strict';return this.getComposerData(k).permissiveMatch;};j.prototype.$ReactComposerScrapedAttachmentStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','enabled']),m=l[0],n=l[1],o=this.getComposerData(m);o.isEnabled=n;};j.prototype.$ReactComposerScrapedAttachmentStore2=function(k){'use strict';var l=this.validateAction(k,['composerID','permissiveMatch']),m=l[0],n=l[1],o=this.getComposerData(m);o.permissiveMatch=n;this.emitChange(k.composerID);};j.prototype.$ReactComposerScrapedAttachmentStore3=function(k){'use strict';var l=this.validateAction(k,['composerID','targetID','value','entryPoint','actorID']),m=l[0],n=l[1],o=l[2],p=l[3],q=l[4];if(!this.isEnabled(m))return;var r=this.getComposerData(k.composerID);r.isScraping=true;var s=c('ReactComposerAttachmentStore').getSelectedAttachmentID(m),t=c('XReactComposerScrapedAttachmentController').getURIBuilder().setString('composer_id',m).setString('target_id',n).setString('scrape_url',o).setString('entry_point',p).setString('source_attachment',s).getURI();t=c('ActorURI').create(t,q);new (c('AsyncRequest'))(t).send();this.emitChange(k.composerID);};j.prototype.$ReactComposerScrapedAttachmentStore5=function(k){'use strict';if(!this.isEnabled(k.composerID))return;var l=this.getComposerData(k.composerID);l.markup=k.markup;l.attachmentConfig=k.attachmentConfig;l.isScraping=false;l.sourceAttachment=c('ReactComposerAttachmentStore').getSelectedAttachmentID(k.composerID);this.emitChange(k.composerID);};j.prototype.$ReactComposerScrapedAttachmentStore6=function(k){'use strict';var l=this.getComposerData(k.composerID);if(k.id===l.sourceAttachment)return;l.markup=null;l.attachmentConfig={};l.isScraping=false;l.sourceAttachment=null;this.emitChange(k.composerID);};j.prototype.$ReactComposerScrapedAttachmentStore7=function(k){'use strict';var l=this.validateAction(k,['composerID','targetID','scrapeUrl','carouselParams','entryPoint','actorID']),m=l[0],n=l[1],o=l[2],p=l[3],q=l[4],r=l[5],s=this.getComposerData(k.composerID);s.isScraping=true;var t=c('ReactComposerAttachmentStore').getSelectedAttachmentID(m),u=c('XReactComposerScrapedAttachmentController').getURIBuilder().setString('composer_id',m).setString('target_id',n).setString('scrape_url',o).setString('carousel_params',p).setString('entry_point',q).setString('source_attachment',t).getURI();u=c('ActorURI').create(u,r);new (c('AsyncRequest'))(u).send();this.emitChange(k.composerID);};j.prototype.$ReactComposerScrapedAttachmentStore4=function(k){'use strict';var l=this.validateAction(k,['composerID','targetID','actorID','shareType','shareParams']),m=l[0],n=l[1],o=l[2],p=l[3],q=l[4];if(!this.isEnabled(m))return;var r=this.getComposerData(m);r.isScraping=true;var s=c('ReactComposerAttachmentStore').getSelectedAttachmentID(m),t=c('XReactComposerShareAttachmentController').getURIBuilder().setString('composer_id',m).setString('target_id',n).setInt('share_type',p).setString('share_params',JSON.stringify(q)).setString('source_attachment',s).getURI();t=c('ActorURI').create(t,o);new (c('AsyncRequest'))(t).send();this.emitChange(m);};f.exports=new j();}),null);
__d('ReactComposerTaggerActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({SET_SELECTED_TAGGER:null,UPDATE_TAGGERS_SOURCE:null,SET_TAGGER_SOURCE:null,SET_TAGGER_DATA:null,SET_SELECTED_DATETIME:null,SET_SELECTED_PEOPLE:null,SET_TAGGER_SHOW_NUX:null},'ReactComposerTaggerActionType');}),null);
__d('ReactComposerTaggerStore',['ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerDispatcher','ReactComposerPhotoActionType','ReactComposerPhotoStore','ReactComposerMediaUploadActionType','ReactComposerStoreBase','ReactComposerTaggerActionType','ReactComposerTaggerType','immutable','SearchableEntry','Set','isEmpty'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){var l={};l[c('ReactComposerTaggerType').PEOPLE]=[];l[c('ReactComposerTaggerType').LOCATION]={};l[c('ReactComposerTaggerType').BACKDATE]={};l[c('ReactComposerTaggerType').ACTIVITY]={};l[c('ReactComposerTaggerType').TARGETING]={};l[c('ReactComposerTaggerType').SPONSOR]=[];l[c('ReactComposerTaggerType').PRODUCT]=[];l[c('ReactComposerTaggerType').MARKDOWN]={};l[c('ReactComposerTaggerType').CONTENT_WARNINGS]=[];return {$ReactComposerTaggerStore1:c('immutable').Set(),autoFocusOnSelectedTagger:true,selectedTagger:null,taggersData:l,taggersSource:{},taggersShowNUX:{}};},function(l){switch(l.type){case c('ReactComposerTaggerActionType').SET_SELECTED_TAGGER:k&&k.$ReactComposerTaggerStore2(l);break;case c('ReactComposerTaggerActionType').UPDATE_TAGGERS_SOURCE:k&&k.$ReactComposerTaggerStore3(l);break;case c('ReactComposerTaggerActionType').SET_TAGGER_SOURCE:k&&k.$ReactComposerTaggerStore4(l);break;case c('ReactComposerTaggerActionType').SET_TAGGER_DATA:k&&k.$ReactComposerTaggerStore5(l);break;case c('ReactComposerTaggerActionType').SET_TAGGER_SHOW_NUX:k&&k.$ReactComposerTaggerStore6(l);break;case c('ReactComposerPhotoActionType').PHOTO_ADD_FACEBOX:k&&k.$ReactComposerTaggerStore7(l);break;case c('ReactComposerPhotoActionType').PHOTO_TAG_XY:k&&k.$ReactComposerTaggerStore8(l);break;case c('ReactComposerPhotoActionType').PHOTO_TAG_XY_PRODUCT:k&&k.$ReactComposerTaggerStore9(l);break;case c('ReactComposerPhotoActionType').PHOTO_TAG_FACEBOX:k&&k.$ReactComposerTaggerStore10(l);break;case c('ReactComposerPhotoActionType').PHOTO_UNTAG_ALL:k&&k.$ReactComposerTaggerStore11(l);break;case c('ReactComposerPhotoActionType').PHOTO_UNTAG_FACEBOX:c('ReactComposerDispatcher').waitFor([c('ReactComposerPhotoStore').getDispatchToken()]);k&&k.$ReactComposerTaggerStore12(l);break;case c('ReactComposerPhotoActionType').PHOTO_REMOVE:c('ReactComposerDispatcher').waitFor([c('ReactComposerPhotoStore').getDispatchToken()]);k&&k.$ReactComposerTaggerStore13(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_DONE:k&&k.$ReactComposerTaggerStore14(l);break;}});k=this;}j.prototype.hasData=function(k,l){'use strict';var m=this.getTaggerData(k,l);if(m==null)return false;switch(l){case c('ReactComposerTaggerType').PEOPLE:case c('ReactComposerTaggerType').SPONSOR:case c('ReactComposerTaggerType').PRODUCT:case c('ReactComposerTaggerType').CONTENT_WARNINGS:return m.length>0;case c('ReactComposerTaggerType').LOCATION:return !!m.place;case c('ReactComposerTaggerType').BACKDATE:return !!m.year;case c('ReactComposerTaggerType').ACTIVITY:return !!m.action&&!!m.object;case c('ReactComposerTaggerType').TARGETING:case c('ReactComposerTaggerType').MARKDOWN:return !c('isEmpty')(m);default:throw new Error(l+" is an unhandled tagger type in "+"ReactComposerTaggerStore.hasData");}};j.prototype.shouldShowNUX=function(k,l){'use strict';var m=this.getComposerData(k);return !!m.taggersShowNUX[l];};j.prototype.areAllTaggersEmpty=function(k){'use strict';var l=this.getTaggersData(k);for(var m in l)if(this.hasData(k,m))return false;return true;};j.prototype.getSelectedTagger=function(k){'use strict';return this.getComposerData(k).selectedTagger;};j.prototype.getAutoFocusOnSelectedTagger=function(k){'use strict';return this.getComposerData(k).autoFocusOnSelectedTagger;};j.prototype.getTaggerSource=function(k,l){'use strict';return this.getComposerData(k).taggersSource[l];};j.prototype.getTaggerData=function(k,l){'use strict';return this.getComposerData(k).taggersData[l];};j.prototype.getTaggersData=function(k){'use strict';return this.getComposerData(k).taggersData;};j.prototype.hasMinutiae=function(k){'use strict';var l=this.getTaggerData(k,c('ReactComposerTaggerType').ACTIVITY);return !!(l&&l.action);};j.prototype.hasLocationTag=function(k){'use strict';var l=this.getTaggerData(k,c('ReactComposerTaggerType').LOCATION);return !!(l&&(l.place||l.implicitLocation));};j.prototype.hasExplicitLocation=function(k){'use strict';var l=this.getTaggerData(k,c('ReactComposerTaggerType').LOCATION);return !!(l&&l.place);};j.prototype.hasImplicitLocation=function(k){'use strict';var l=this.getTaggerData(k,c('ReactComposerTaggerType').LOCATION);return !!(l&&l.implicitLocation&&!l.place);};j.prototype.getNumberOfWithWhoTags=function(k){'use strict';var l=this.getTaggerData(k,c('ReactComposerTaggerType').PEOPLE)||[];return l.length;};j.prototype.$ReactComposerTaggerStore2=function(k){'use strict';var l=this.getComposerData(k.composerID);if(l.selectedTagger===k.taggerID&&!k.disableToggle){l.selectedTagger=null;}else l.selectedTagger=k.taggerID;l.autoFocusOnSelectedTagger=k.autoFocus;this.emitChange(k.composerID);};j.prototype.$ReactComposerTaggerStore4=function(k){'use strict';var l=this.getComposerData(k.composerID);l.taggersSource[k.taggerID]=k.taggerSource;this.emitChange(k.composerID);};j.prototype.$ReactComposerTaggerStore3=function(k){'use strict';var l=this.validateAction(k,['composerID','taggersSource']),m=l[0],n=l[1],o=this.getComposerData(m);for(var p in n)o.taggersSource[p]=n[p];this.emitChange(m);};j.prototype.$ReactComposerTaggerStore5=function(k){'use strict';var l=this.getComposerData(k.composerID),m=Array.isArray(k.taggerData)?k.taggerData.slice():Object.assign({},k.taggerData);l.taggersData[k.taggerID]=m;this.emitChange(k.composerID);};j.prototype.$ReactComposerTaggerStore6=function(k){'use strict';var l=this.getComposerData(k.composerID);l.taggersShowNUX[k.taggerID]=k.showNUX;this.emitChange(k.composerID);};j.prototype.$ReactComposerTaggerStore14=function(k){'use strict';var l=this.getComposerData(k.composerID),m=c('ReactComposerAttachmentStore').getIsAttachmentSelected(k.composerID,c('ReactComposerAttachmentType').MEDIA);if(l.selectedTagger===null&&m){l.selectedTagger=c('ReactComposerTaggerType').PEOPLE;l.autoFocusOnSelectedTagger=false;}var n=Object.assign({mediaLocation:k.mediaLocation},l.taggersData[c('ReactComposerTaggerType').LOCATION]);l.taggersData[c('ReactComposerTaggerType').LOCATION]=n;this.emitChange(k.composerID);};j.prototype.$ReactComposerTaggerStore7=function(k){'use strict';var l=this.validateAction(k,['composerID','facebox','photoID']),m=l[0],n=l[1],o=l[2],p=n.bestRecognition;if(p)this.$ReactComposerTaggerStore15(m,p.subjectID,p.value,o);};j.prototype.$ReactComposerTaggerStore8=function(k){'use strict';var l=this.validateAction(k,['composerID','subject','value','photoID']),m=l[0],n=l[1],o=l[2],p=l[3];this.$ReactComposerTaggerStore15(m,n,o,p);};j.prototype.$ReactComposerTaggerStore11=function(k){'use strict';var l=this.validateAction(k,['composerID','photoID']),m=l[0],n=l[1];this.$ReactComposerTaggerStore16(m,n);this.$ReactComposerTaggerStore17(m,n);};j.prototype.$ReactComposerTaggerStore9=function(k){'use strict';var l=this.validateAction(k,['composerID','subject','value','photoID']),m=l[0],n=l[1],o=l[2],p=l[3];this.$ReactComposerTaggerStore18(m,n,o,p);};j.prototype.$ReactComposerTaggerStore10=function(k){'use strict';var l=this.validateAction(k,['composerID','subjectID','value','photoID']),m=l[0],n=l[1],o=l[2],p=l[3];this.$ReactComposerTaggerStore15(m,n,o,p);};j.prototype.$ReactComposerTaggerStore12=function(k){'use strict';var l=this.validateAction(k,['composerID','subjectID']),m=l[0],n=l[1];if(!c('ReactComposerPhotoStore').getIsSubjectTagged(m,n))this.$ReactComposerTaggerStore19(m,n);};j.prototype.$ReactComposerTaggerStore13=function(k){'use strict';var l=this.validateAction(k,'composerID');this.getComposerData(l).$ReactComposerTaggerStore1.forEach(function(m){if(!c('ReactComposerPhotoStore').getIsSubjectTagged(l,m))this.$ReactComposerTaggerStore19(l,m);}.bind(this));};j.prototype.$ReactComposerTaggerStore15=function(k,l,m,n){'use strict';var o=new (c('SearchableEntry'))({uniqueID:l,title:m,auxiliaryData:{isFacebox:true,photos:new (c('Set'))([n])}}),p=this.getComposerData(k),q=p.taggersData[c('ReactComposerTaggerType').PEOPLE],r=q.find(function(t){return t.getUniqueID()===o.getUniqueID();});p.$ReactComposerTaggerStore1=p.$ReactComposerTaggerStore1.add(l);if(r){var s=r.getAuxiliaryData();if(this.$ReactComposerTaggerStore20(r))s.photos.add(n);}else p.taggersData[c('ReactComposerTaggerType').PEOPLE]=q.concat(o);this.emitChange(k);};j.prototype.$ReactComposerTaggerStore18=function(k,l,m,n){'use strict';var o=new (c('SearchableEntry'))({uniqueID:l,title:m,auxiliaryData:{isFacebox:true,photos:new (c('Set'))([n])}}),p=this.getComposerData(k),q=p.taggersData[c('ReactComposerTaggerType').PRODUCT],r=q.find(function(s){return s.getUniqueID()===o.getUniqueID();});if(r){if(this.$ReactComposerTaggerStore20(r))r.getAuxiliaryData().photos.add(n);}else p.taggersData[c('ReactComposerTaggerType').PRODUCT]=q.concat(o);this.emitChange(k);};j.prototype.$ReactComposerTaggerStore19=function(k,l){'use strict';var m=this.getComposerData(k);m.taggersData[c('ReactComposerTaggerType').PEOPLE]=m.taggersData[c('ReactComposerTaggerType').PEOPLE].filter(function(n){return n.getUniqueID()!==l;});m.taggersData[c('ReactComposerTaggerType').PRODUCT]=m.taggersData[c('ReactComposerTaggerType').PRODUCT].filter(function(n){return n.getUniqueID()!==l;});m.$ReactComposerTaggerStore1=m.$ReactComposerTaggerStore1['delete'](l);this.emitChange(k);};j.prototype.$ReactComposerTaggerStore16=function(k,l){'use strict';var m=this.getComposerData(k),n=m.taggersData[c('ReactComposerTaggerType').PEOPLE];this.$ReactComposerTaggerStore21(k,n,l);};j.prototype.$ReactComposerTaggerStore17=function(k,l){'use strict';var m=this.getComposerData(k),n=m.taggersData[c('ReactComposerTaggerType').PRODUCT];this.$ReactComposerTaggerStore21(k,n,l);};j.prototype.$ReactComposerTaggerStore21=function(k,l,m){'use strict';var n=[];for(var o=l,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++];}else{q=o.next();if(q.done)break;r=q.value;}var s=r,t=s.getAuxiliaryData();if(this.$ReactComposerTaggerStore20(s)&&t.photos['delete'](m)&&t.photos.size==0)n.push(s.getUniqueID());}for(var u=n,v=Array.isArray(u),w=0,u=v?u:u[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var x;if(v){if(w>=u.length)break;x=u[w++];}else{w=u.next();if(w.done)break;x=w.value;}var y=x;this.$ReactComposerTaggerStore19(k,y);}};j.prototype.$ReactComposerTaggerStore20=function(k){'use strict';return k.getAuxiliaryData().photos;};f.exports=new j();}),null);
__d('ReactComposerFeedBootloader',['Bootloader'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={statusAttachment:function i(j){c('Bootloader').loadModules(["ReactComposerStatusAttachmentContainer.react","ReactComposerFeedPostButtonContainer.react"],j,'ReactComposerFeedBootloader');},mediaAttachment:function i(j){c('Bootloader').loadModules(["ReactComposerMediaAttachmentContainer.react","ReactComposerFeedMediaPostButtonContainer.react"],j,'ReactComposerFeedBootloader');},qandaAttachment:function i(j){c('Bootloader').loadModules(["ReactComposerQAndAAttachmentContainer.react","ReactComposerFeedMediaPostButtonContainer.react"],j,'ReactComposerFeedBootloader');}};f.exports=h;}),null);
__d('ReactComposerPhotoPrefillConfig',['React'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes;f.exports=h.shape({uploadID:h.string,photoID:h.string,thumbSrc:h.string,cubestripURI:h.string});}),null);
__d('ReactComposerPrefillConfig',['ReactComposerAttachmentType','ReactComposerMediaPrefillConfig','ReactComposerPhotoPrefillConfig','React','getOwnObjectValues'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes;f.exports=h.shape({instantMediaSelector:h.shape({fileInputDOM:h.any}),mentionsInput:h.shape({textWithEntities:h.shape({text:h.string}),selection:h.object}),selectedAttachment:h.oneOf(c('getOwnObjectValues')(c('ReactComposerAttachmentType'))),shouldActivateSelectedAttachment:h.bool,taggersData:h.object,mediasData:h.arrayOf(c('ReactComposerMediaPrefillConfig')),photosData:h.arrayOf(c('ReactComposerPhotoPrefillConfig')),attachmentPreviewData:h.shape({scrapedURL:h.string,scrapedAttachment:h.shape({markup:h.object,attachmentConfig:h.object})}),donateConfig:h.shape({charityName:h.string,fundraiserCampaignId:h.string}),liveBroadcastData:h.shape({accessToken:h.string,streamURL:h.string}),topicFeedTags:h.arrayOf(h.string),multilingualData:h.shape({specifiedDialect:h.string,multilingualStatuses:h.arrayOf(h.shape({dialect:h.string,message:h.string}))})});}),null);
__d('ReactComposerPrefillActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({SET_PREFILL_DATA:null},'ReactComposerPrefillActionTypes');}),null);
__d('ReactComposerPrefillStore',['ReactComposerPrefillActionTypes','ReactComposerStoreBase'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {prefillConfig:{}};},function(l){switch(l.type){case c('ReactComposerPrefillActionTypes').SET_PREFILL_DATA:k&&k.$ReactComposerPrefillStore1(l);break;}});k=this;}j.prototype.getField=function(k,l){'use strict';return this.getComposerData(k).prefillConfig[l];};j.prototype.getAndEraseField=function(k,l){'use strict';var m=this.getField(k,l);setTimeout(function(){this.$ReactComposerPrefillStore2(k,l);}.bind(this),0);return m;};j.prototype.$ReactComposerPrefillStore2=function(k,l){'use strict';this.getComposerData(k).prefillConfig[l]=null;};j.prototype.$ReactComposerPrefillStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','prefillConfig']),m=l[0],n=l[1],o=this.getComposerData(m);o.prefillConfig=n||{};};f.exports=new j();}),null);
__d('ReactComposerPrefillActions',['ReactComposerDispatcher','ReactComposerPrefillActionTypes','ReactComposerPrefillConfig','ReactComposerPrefillStore'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('ReactComposerPrefillStore');var h={setPrefillData:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerPrefillActionTypes').SET_PREFILL_DATA,prefillConfig:k});}};f.exports=h;}),null);
__d('ReactComposerPrefillUtils',['ReactComposerAttachmentActions','ReactComposerEvents','ReactComposerPrefillActions','Arbiter'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={prefill:function i(j,k){c('ReactComposerPrefillActions').setPrefillData(j,k);c('Arbiter').inform(c('ReactComposerEvents').SET_PREFILL_DATA+j,null,c('Arbiter').BEHAVIOR_STATE);}};f.exports=h;}),null);
__d('ReactComposerLoggingActions',['ReactComposerActionTypes','ReactComposerDispatcher','ReactComposerMediaUploadActionType'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={composerEntry:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerActionTypes').COMPOSER_ENTRY,uiElementName:k});},mediaUploadInputClicked:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_INPUT_CLICKED});}};f.exports=h;}),null);
__d('ReactComposerWithSprouts.react',['cx','ReactComposer.react','ReactComposerActions','ReactComposerAttachmentActions','ReactComposerContextMixin','ReactComposerEvents','ReactComposerLoggingName','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerSproutsDisplayState','ReactComposerStore','Arbiter','ReactComponentWithPureRenderMixin','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ReactComposerWithSprouts',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerStore'))],propTypes:{defaultAttachmentOnExpand:i.string.isRequired,innerProps:i.shape(c('ReactComposer.react').propTypes).isRequired},statics:{calculateState:function k(l,m){return {displayState:c('ReactComposerStore').getSproutsDisplayState(l)};}},_subscriptions:c('SubscriptionsHandler'),componentWillMount:function k(){this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('Arbiter').subscribeOnce('ReactFeedComposerXBootloader/selectcomposer/'+this.context.composerID,function(){return this._expandComposer(c('ReactComposerLoggingName').PROMPT);}.bind(this)));},render:function k(){return (c('React').createElement('div',{className:"_1cx1"+(this.state.displayState===c('ReactComposerSproutsDisplayState').EXPANDED?' '+"_4qr4":''),onClick:function(l){return (this._expandComposer(c('ReactComposerLoggingName').INLINE_COMPOSER));}.bind(this)},c('React').createElement(c('ReactComposer.react'),this.props.innerProps,this.props.children)));},_expandComposer:function k(l){if(this.state.displayState===c('ReactComposerSproutsDisplayState').INLINE){c('ReactComposerActions').expandSprouts(this.context.composerID);c('ReactComposerAttachmentActions').selectAttachment(this.context.composerID,this.props.defaultAttachmentOnExpand,true,l);setTimeout(function(){return c('Arbiter').inform(c('ReactComposerEvents').ACTIVATE_ATTACHMENT+this.context.composerID);}.bind(this),0);}}});f.exports=j;}),null);
__d('ReactFeedOnlineSproutsComposer.react',['cx','ReactComposerAttachmentType','ReactComposerBodyContainer.react','ReactComposerConfig','ReactComposerContextConfig','ReactComposerContextProviderMixin','ReactComposerFeedBootloader','ReactComposerLiveVideoLazyAttachment.react','ReactComposerMediaLazyAttachment.react','ReactComposerPrefillConfig','ReactComposerPrefillUtils','ReactComposerStatusLazyAttachment.react','ReactComposerWithSprouts.react','React','ReactDOM','FeedComposerIDStore','LitestandComposer'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'ReactFeedOnlineSproutsComposer',mixins:[c('ReactComposerContextProviderMixin')],propTypes:{contextConfig:c('ReactComposerContextConfig').isRequired,config:c('ReactComposerConfig').isRequired,prefillConfig:c('ReactComposerPrefillConfig')},componentWillMount:function j(){c('FeedComposerIDStore').set(this.props.contextConfig.composerID);this.props.prefillConfig&&c('ReactComposerPrefillUtils').prefill(this.props.contextConfig.composerID,this.props.prefillConfig);},componentDidMount:function j(){c('LitestandComposer').initComposer(this.props.contextConfig.composerID);},statics:{preload:function j(){}},render:function j(){return (c('React').createElement(c('ReactComposerWithSprouts.react'),{defaultAttachmentOnExpand:c('ReactComposerAttachmentType').STATUS,innerProps:{className:"_5n2b",loggingConfig:this.props.config.loggingConfig},ref:'root'},c('React').createElement(c('ReactComposerBodyContainer.react'),null,c('React').createElement(c('ReactComposerStatusLazyAttachment.react'),{bootloader:c('ReactComposerFeedBootloader'),config:this.props.config,selected:true,placeholder:this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').STATUS].placeholderText}),c('React').createElement(c('ReactComposerMediaLazyAttachment.react'),{key:'media',config:this.props.config,bootloader:c('ReactComposerFeedBootloader')}),c('React').createElement(c('ReactComposerLiveVideoLazyAttachment.react'),{config:this.props.config}))));}});f.exports=i;}),null);
__d("XReactFeedComposerXBootloadController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/feedx\/bootload\/",{composer_id:{type:"String",required:true},composer_type:{type:"Enum",required:true,enumType:1},friend_list_id:{type:"String"},section_id:{type:"String"},target_id:{type:"String",required:true}});}),null);
__d('ReactFeedComposerX',['csx','cx','invariant','ReactComposerActionTypes','ReactComposerAttachmentType','ReactComposerEvents','ReactComposerFocusInit','ReactComposerLoggingName','ReactComposerLoggingActions','Arbiter','AsyncRequest','ComposerEntryPointRef','CSS','DOM','Event','FeedComposerIDStore','Run','SubscriptionsHandler','XReactComposerLoggingODSController','XReactFeedComposerXBootloadController','$'],(function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(l){this.$ReactFeedComposerX1=l.actorID;this.$ReactFeedComposerX8=l.root;this.$ReactFeedComposerX3=l.composerID;this.$ReactFeedComposerX12=l.targetID;this.$ReactFeedComposerX4=l.composerType;this.$ReactFeedComposerX6=l.friendListID;this.$ReactFeedComposerX9=l.sectionID;this.$ReactFeedComposerX7=l.gks;this.$ReactFeedComposerX2=false;this.$ReactFeedComposerX5=c('DOM').find(this.$ReactFeedComposerX8,'form');this.$ReactFeedComposerX13=c('DOM').find(this.$ReactFeedComposerX8,"._3en1");this.$ReactFeedComposerX11=new (c('SubscriptionsHandler'))();this.$ReactFeedComposerX11.addSubscriptions(c('Event').listen(this.$ReactFeedComposerX8,'click',this.$ReactFeedComposerX14.bind(this)),c('Event').listen(this.$ReactFeedComposerX13,'keydown',this.$ReactFeedComposerX14.bind(this)),c('Event').listen(this.$ReactFeedComposerX5,'success',this.$ReactFeedComposerX15.bind(this)),c('Arbiter').subscribeOnce('ReactFeedComposerXBootloader/bootload/'+this.$ReactFeedComposerX3,this.$ReactFeedComposerX16.bind(this)),c('Arbiter').subscribeOnce('ReactFeedComposerXBootloader/selectcomposer/'+this.$ReactFeedComposerX3,this.$ReactFeedComposerX14.bind(this)),c('Arbiter').subscribe('ReactComposerFocus/reset/'+this.$ReactFeedComposerX3,function(){this.$ReactFeedComposerX13.value='';}.bind(this)));c('FeedComposerIDStore').set(this.$ReactFeedComposerX3);var m=c('DOM').find(this.$ReactFeedComposerX8,"._4d6h"),n=c('DOM').scry(m,'input[name="composer_photo[]"]')[0];if(n){this.$ReactFeedComposerX11.addSubscriptions(c('Event').listen(n,'click',this.$ReactFeedComposerX14.bind(this)),c('Event').listen(n,'change',this.$ReactFeedComposerX14.bind(this)));if(n.files&&n.files.length>0)this.$ReactFeedComposerX14();}this.$ReactFeedComposerX10=c('DOM').scry(this.$ReactFeedComposerX8,"._4-h7");this.$ReactFeedComposerX10.forEach(function(o){return this.$ReactFeedComposerX11.addSubscriptions(c('Event').listen(o,'click',this.$ReactFeedComposerX17.bind(this)));}.bind(this));if(l.jsModules&&l.jsModules.composerFocus&&l.gks&&l.gks.focusExperiment)c('ReactComposerFocusInit').handler(c('$')('feedx_container'),this.$ReactFeedComposerX3,this.$ReactFeedComposerX1,this.$ReactFeedComposerX7,l.jsModules.composerFocus);c('Run').onLeave(this.$ReactFeedComposerX16.bind(this));}k.prototype.$ReactFeedComposerX17=function(l){var m=l.getTarget(),n=null;while(m){if(m.nodeType===1&&m.nodeName==='A'){n=m;break;}m=m.parentNode;}!(n!==null)?j(0):void 0;this.$ReactFeedComposerX18(n);var o=c('CSS').hasClass(n,"._5qtn");if(o)return;this.$ReactFeedComposerX10.forEach(function(r){return c('CSS').removeClass(r,"_5qtn");});c('CSS').addClass(n,"_5qtn");var p=c('DOM').find(this.$ReactFeedComposerX8,"._559p"),q=c('DOM').find(this.$ReactFeedComposerX8,"._559q");switch(n.getAttribute('data-attachment-type')){case c('ReactComposerAttachmentType').STATUS:c('CSS').hide(q);c('CSS').show(p);break;case c('ReactComposerAttachmentType').MEDIA:case c('ReactComposerAttachmentType').QANDA:c('CSS').show(q);c('CSS').hide(p);break;}};k.prototype.$ReactFeedComposerX14=function(l){if(this.$ReactFeedComposerX2)return;this.$ReactFeedComposerX2=true;this.$ReactFeedComposerX19();var m=c('XReactFeedComposerXBootloadController').getURIBuilder().setString('composer_id',this.$ReactFeedComposerX3).setString('target_id',this.$ReactFeedComposerX12).setEnum('composer_type',this.$ReactFeedComposerX4).setString('friend_list_id',this.$ReactFeedComposerX6).setString('section_id',this.$ReactFeedComposerX9).getURI();new (c('AsyncRequest'))(m).send();var n=c('XReactComposerLoggingODSController').getURIBuilder().setString('event','bootload_start').setEnum('composer_type',c('ComposerEntryPointRef').FEEDX).getURI();new (c('AsyncRequest'))(n).send();};k.prototype.$ReactFeedComposerX18=function(l){var m=c('ReactComposerLoggingName').INLINE_COMPOSER;switch(l.getAttribute('data-attachment-type')){case c('ReactComposerAttachmentType').STATUS:m=c('ReactComposerLoggingName').STATUS_TAB_SELECTOR;break;case c('ReactComposerAttachmentType').MEDIA:m=c('ReactComposerLoggingName').MEDIA_TAB_SELECTOR;break;case c('ReactComposerAttachmentType').ALBUM:m=c('ReactComposerLoggingName').ALBUM_TAB_SELECTOR;break;case c('ReactComposerAttachmentType').NOTES:m=c('ReactComposerLoggingName').NOTES_TAB_SELECTOR;break;case c('ReactComposerAttachmentType').QANDA:m=c('ReactComposerLoggingName').QANDA_TAB_SELECTOR;break;}c('ReactComposerLoggingActions').composerEntry(this.$ReactFeedComposerX3,m);};k.prototype.$ReactFeedComposerX19=function(){c('ReactComposerLoggingActions').composerEntry(this.$ReactFeedComposerX3,c('ReactComposerLoggingName').INLINE_COMPOSER);};k.prototype.$ReactFeedComposerX16=function(){this.$ReactFeedComposerX11.release();};k.prototype.$ReactFeedComposerX15=function(){this.$ReactFeedComposerX13.value='';c('Arbiter').inform(c('ReactComposerEvents').POST_SUCCEEDED+this.$ReactFeedComposerX3);this.$ReactFeedComposerX16();};f.exports=k;}),null);
__d('PhotosUploadWaterfallXMixin',['invariant','AsyncSignal','Banzai','Map','PhotosUploadWaterfallXConfig','Set','randomInt'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=new (c('Map'))();function j(l,m){var n={};l.client_time=Math.round(Date.now()/1000);if(c('PhotosUploadWaterfallXConfig').retryBanzai){n.retry=true;l.nonce=c('randomInt')(4294967296);}c('Banzai').post(c('PhotosUploadWaterfallXConfig').banzaiRoute,l,n);if(m)setTimeout(m,0);}function k(l,m){if(c('PhotosUploadWaterfallXConfig').useBanzai){j(l,m);}else{var n=new (c('AsyncSignal'))(c('PhotosUploadWaterfallXConfig').loggingEndpoint,{data:JSON.stringify(l)}).setHandler(m);if(c('PhotosUploadWaterfallXConfig').timeout)n.setTimeout(10*1000);n.send();}}f.exports={logStep:function l(m,n,o){var p=this.getWaterfallID&&this.getWaterfallID(),q=this.getWaterfallAppName&&this.getWaterfallAppName();if(!p||!q)return;k(babelHelpers['extends']({step:m,qn:p,uploader:q,ref:this.getWaterfallSource&&this.getWaterfallSource()},n),o);},logPUWStep:function l(m,n,o,p,q,r,s){if(r&&r.logOncePerSession){if(!i.has(n))i.set(n,new (c('Set'))());if(i.get(n).has(m))return;i.get(n).add(m);}k(Object.assign({step:m,qn:n,uploader:o,ref:p},q),s);}};}),null);
__d('ReactComposerPerfLogger',['ComposerType','ComposerXSessionIDs','MarauderLogger'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i=c('ComposerType').NORMAL,j={logEvent:function k(l,m){var n=arguments.length<=2||arguments[2]===undefined?{}:arguments[2],o=h[m],p=c('ComposerXSessionIDs').getSessionID(m);if(!o||!p)return;if(n.logOncePerSession){if(!o.loggedEventTypes[p])o.loggedEventTypes[p]={};if(o.loggedEventTypes[p][l])return;o.loggedEventTypes[p][l]=true;}var q=babelHelpers['extends']({},n.extraData,{composer_type:i,target_type:o.targetType,target_id:o.targetID,ref:o.entryPointRef});c('MarauderLogger').log(l,'composer',q,undefined,undefined,p);},registerComposer:function k(l,m,n,o){h[l.id]={targetID:o,targetType:m,entryPointRef:n,loggedEventTypes:{}};},getInstance:function k(l){return h[l];}};f.exports=j;}),null);
__d('ReactComposerLoggingStore',['ReactComposerActionTypes','ReactComposerAlbumActionType','ReactComposerAttachmentActionType','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerDispatcher','ReactComposerLoggingQueue','ReactComposerPerfLogger','ReactComposerPhotoActionType','ReactComposerPhotoStore','ReactComposerMediaUploadActionType','ReactComposerMediaUploadStore','ReactComposerMediaUploadType','ReactComposerScrapedAttachmentStore','ReactComposerSelectedImagesStore','ReactComposerSlideshowActionType','ReactComposerSlideshowStore','ReactComposerStatusStore','ReactComposerStore','ReactComposerStoreBase','ReactComposerTaggerActionType','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerVideoUploadActionType','ComposerPerfEvent','ComposerWaterfallEvent','ComposerXMarauderLogger','ComposerXSessionIDs','immutable','PhotosUploadWaterfallXMixin','PUWApplications','PUWMethods','PUWSteps','classWithMixins','mixin','performanceAbsoluteNow','nullthrows','PhotoUploadFacerecWaterfallTypedLogger','FacerecWaterfallEvent'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('classWithMixins')(c('ReactComposerStoreBase'),c('mixin')(c('PhotosUploadWaterfallXMixin'))));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {activated:false,perfTimes:{},sessionID:null,uniqueEvents:c('immutable').Map([[c('PUWSteps').CLIENT_PUBLISH_SUCCESS,false],[c('PUWSteps').CLIENT_FLOW_SUCCESS,false]])};},function(l){k&&k.handler(l);});k=this;}j.prototype.handler=function(k){'use strict';var l=this.getComposerData(k.composerID);if(!l.activated)return;switch(k.type){case c('ReactComposerAttachmentActionType').SELECT_ATTACHMENT:this.$ReactComposerLoggingStore1(k);break;case c('ReactComposerActionTypes').COMPOSER_ENTRY:this.$ReactComposerLoggingStore2(k);break;case c('ReactComposerAttachmentActionType').SET_BOOTLOADED:c('ReactComposerDispatcher').waitFor([c('ReactComposerAttachmentStore').getDispatchToken()]);this.$ReactComposerLoggingStore3(k);break;case c('ReactComposerAttachmentActionType').SET_BOOTSTRAPPED:c('ReactComposerDispatcher').waitFor([c('ReactComposerAttachmentStore').getDispatchToken()]);this.$ReactComposerLoggingStore4(k);break;case c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_INPUT_CLICKED:this.$ReactComposerLoggingStore5(k);break;case c('ReactComposerAlbumActionType').CREATE_ALBUM_SELECTOR_CLICKED:this.$ReactComposerLoggingStore6(k);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_ENQUEUED:this.$ReactComposerLoggingStore7(k);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_STARTED:this.$ReactComposerLoggingStore8(k);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_DONE:this.$ReactComposerLoggingStore9(k);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZE_FAILED:this.$ReactComposerLoggingStore10(k);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RESIZER_UNAVAILABLE:this.$ReactComposerLoggingStore11(k);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_UPLOADING:this.$ReactComposerLoggingStore12(k);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_DONE:this.$ReactComposerLoggingStore13(k);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_FAILED:this.$ReactComposerLoggingStore14(k);break;case c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_REMOVE:this.$ReactComposerLoggingStore15(k);break;case c('ReactComposerPhotoActionType').PHOTO_REMOVE:this.$ReactComposerLoggingStore16(k);break;case c('ReactComposerVideoUploadActionType').VIDEO_UPLOAD_ADD:this.$ReactComposerLoggingStore17(k);break;case c('ReactComposerVideoUploadActionType').VIDEO_UPLOAD_REMOVE:this.$ReactComposerLoggingStore18(k);break;case c('ReactComposerTaggerActionType').SET_SELECTED_TAGGER:c('ReactComposerDispatcher').waitFor([c('ReactComposerTaggerStore').getDispatchToken()]);this.$ReactComposerLoggingStore19(k);break;case c('ReactComposerActionTypes').POST_STARTED:this.$ReactComposerLoggingStore20(k);break;case c('ReactComposerActionTypes').POST_SUCCEEDED:this.$ReactComposerLoggingStore21(k);break;case c('ReactComposerActionTypes').POST_ERROR:this.$ReactComposerLoggingStore22(k);break;case c('ReactComposerMediaUploadActionType').PHOTOS_SELECT:this.$ReactComposerLoggingStore23(k);break;case c('ReactComposerPhotoActionType').PHOTO_EDIT_STARTED:this.$ReactComposerLoggingStore24(k);break;case c('ReactComposerPhotoActionType').PHOTO_EDIT_FINISHED:this.$ReactComposerLoggingStore25(k);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_RETRY:this.$ReactComposerLoggingStore26(k);break;case c('ReactComposerPhotoActionType').PHOTO_ADD_FACEBOX:this.$ReactComposerLoggingStore27(k);break;case c('ReactComposerPhotoActionType').PHOTO_RECOGNITION_ALL_FINISHED:this.$ReactComposerLoggingStore28(k);break;case c('ReactComposerSlideshowActionType').TOGGLE_SLIDESHOW_DIALOG:this.$ReactComposerLoggingStore29(k);break;case c('ReactComposerSlideshowActionType').HIDE_SLIDESHOW_EDIT_FIELD:this.$ReactComposerLoggingStore30(k);break;default:}};j.prototype.getSessionID=function(k){'use strict';return c('ComposerXSessionIDs').getSessionID(k);};j.prototype.isActivated=function(k){'use strict';return this.getComposerData(k).activated;};j.prototype.activate=function(k){'use strict';var l=this.getComposerData(k);l.activated=true;if(c('ReactComposerLoggingQueue').getLength()>0)this.$ReactComposerLoggingStore31();};j.prototype.$ReactComposerLoggingStore2=function(k){'use strict';var l=this.validateAction(k,'composerID');this.$ReactComposerLoggingStore32(l,c('ComposerWaterfallEvent').COMPOSER_ENTRY,{logOncePerSession:true,extraData:{composer_entry_point_name:k.uiElementName}});};j.prototype.$ReactComposerLoggingStore1=function(k){'use strict';var l=this.validateAction(k,['id','currentAttachmentID','composerID']),m=l[0],n=l[1],o=l[2];if(c('ReactComposerAttachmentStore').isSelectedAttachmentActive(o))this.$ReactComposerLoggingStore2(k);if(this.$ReactComposerLoggingStore33(o,m)){this.$ReactComposerLoggingStore34(o,c('ComposerWaterfallEvent').SLIDESHOW_INTENT);}else if(this.$ReactComposerLoggingStore33(o,n))this.$ReactComposerLoggingStore34(o,c('ComposerWaterfallEvent').SLIDESHOW_CANCEL);};j.prototype.$ReactComposerLoggingStore3=function(k){'use strict';var l=this.validateAction(k,['id','composerID']),m=l[0],n=l[1];this.$ReactComposerLoggingStore35(n,c('ComposerPerfEvent').CLIENT_BOOTLOADED,{extraData:{attachment_type:m,duration:c('ReactComposerAttachmentStore').getBootloadDuration(n,m)}});};j.prototype.$ReactComposerLoggingStore4=function(k){'use strict';var l=this.validateAction(k,['id','composerID']),m=l[0],n=l[1];this.$ReactComposerLoggingStore35(n,c('ComposerPerfEvent').CLIENT_BOOTSTRAPPED,{extraData:{attachment_type:m,duration:c('ReactComposerAttachmentStore').getBootstrapDuration(n,m)}});};j.prototype.$ReactComposerLoggingStore6=function(k){'use strict';var l=this.validateAction(k,'composerID');this.$ReactComposerLoggingStore32(l,c('ComposerWaterfallEvent').ALBUM_INTENT);};j.prototype.$ReactComposerLoggingStore29=function(k){'use strict';var l=this.validateAction(k,['composerID','shouldShowSlideshowDialog','photoCount','placement']),m=l[0],n=l[1],o=l[2],p=l[3];if(n){this.$ReactComposerLoggingStore34(m,c('ComposerWaterfallEvent').SLIDESHOW_INTENT,o,p);}else this.$ReactComposerLoggingStore34(m,c('ComposerWaterfallEvent').SLIDESHOW_CANCEL,o,p);};j.prototype.$ReactComposerLoggingStore30=function(k){'use strict';var l=this.validateAction(k,'composerID');this.$ReactComposerLoggingStore34(l,c('ComposerWaterfallEvent').SLIDESHOW_CANCEL);};j.prototype.$ReactComposerLoggingStore5=function(k){'use strict';var l=this.validateAction(k,'composerID');this.$ReactComposerLoggingStore32(l,c('ComposerWaterfallEvent').MEDIA_INTENT);this.$ReactComposerLoggingStore36(l,c('PUWSteps').CLIENT_FLOW_BEGIN,null,{logOncePerSession:true});this.$ReactComposerLoggingStore36(l,c('PUWSteps').CLIENT_SELECT_BEGIN);};j.prototype.$ReactComposerLoggingStore7=function(k){'use strict';var l=this.validateAction(k,'composerID');this.$ReactComposerLoggingStore32(l,c('ComposerWaterfallEvent').PHOTO_ADD);};j.prototype.$ReactComposerLoggingStore8=function(k){'use strict';var l=this.validateAction(k,['composerID','loggingData']),m=l[0],n=l[1];this.$ReactComposerLoggingStore36(m,c('PUWSteps').CLIENT_PROCESS_BEGIN,n);};j.prototype.$ReactComposerLoggingStore9=function(k){'use strict';var l=this.validateAction(k,['composerID','loggingData']),m=l[0],n=l[1];this.$ReactComposerLoggingStore36(m,c('PUWSteps').CLIENT_PROCESS_SUCCESS,n);};j.prototype.$ReactComposerLoggingStore10=function(k){'use strict';var l=this.validateAction(k,['composerID','loggingData']),m=l[0],n=l[1];this.$ReactComposerLoggingStore36(m,c('PUWSteps').CLIENT_PROCESS_FAIL,n);};j.prototype.$ReactComposerLoggingStore11=function(k){'use strict';var l=this.validateAction(k,'composerID');this.$ReactComposerLoggingStore36(l,c('PUWSteps').CLIENT_PROCESS_UNAVAILABLE);};j.prototype.$ReactComposerLoggingStore12=function(k){'use strict';var l=this.validateAction(k,['composerID','fileUpload']),m=l[0],n=l[1];this.$ReactComposerLoggingStore36(m,c('PUWSteps').CLIENT_TRANSFER_BEGIN,{bytes:n.getFile().size});};j.prototype.$ReactComposerLoggingStore13=function(k){'use strict';var l=this.validateAction(k,['composerID','fileUpload','timeToUpload']),m=l[0],n=l[1],o=l[2];this.$ReactComposerLoggingStore32(m,c('ComposerWaterfallEvent').PHOTO_ADD_SUCCESS);this.$ReactComposerLoggingStore36(m,c('PUWSteps').CLIENT_TRANSFER_SUCCESS,{bytes:n.getFile().size,auto_retry_count:n.getRetryCount(),dt:o,custom_tags:{manual_retry:!!n.getFile().manuallyRetried}});};j.prototype.$ReactComposerLoggingStore14=function(k){'use strict';var l=this.validateAction(k,['composerID','fileUpload','error','timeToUpload']),m=l[0],n=l[1],o=l[2],p=l[3];this.$ReactComposerLoggingStore32(m,c('ComposerWaterfallEvent').PHOTO_ADD_FAILURE);this.$ReactComposerLoggingStore36(m,c('PUWSteps').CLIENT_TRANSFER_FAIL,{bytes:n.getFile().size,error_code:o.code,error_info:o.description,auto_retry_count:n.getRetryCount(),dt:p,custom_tags:{manual_retry:!!n.getFile().manuallyRetried}});};j.prototype.$ReactComposerLoggingStore15=function(k){'use strict';var l=this.validateAction(k,'composerID');this.$ReactComposerLoggingStore32(l,c('ComposerWaterfallEvent').PHOTO_REMOVE);this.$ReactComposerLoggingStore36(l,c('PUWSteps').CLIENT_TRANSFER_CANCEL);};j.prototype.$ReactComposerLoggingStore16=function(k){'use strict';var l=this.validateAction(k,'composerID');this.$ReactComposerLoggingStore32(l,c('ComposerWaterfallEvent').PHOTO_REMOVE);};j.prototype.$ReactComposerLoggingStore17=function(k){'use strict';var l=this.validateAction(k,'composerID');this.$ReactComposerLoggingStore32(l,c('ComposerWaterfallEvent').VIDEO_ADD);};j.prototype.$ReactComposerLoggingStore18=function(k){'use strict';var l=this.validateAction(k,'composerID');this.$ReactComposerLoggingStore32(l,c('ComposerWaterfallEvent').VIDEO_REMOVE);};j.prototype.$ReactComposerLoggingStore19=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=c('ReactComposerTaggerStore').getSelectedTagger(l),event=null;switch(m){case c('ReactComposerTaggerType').PEOPLE:event=c('ComposerWaterfallEvent').FRIEND_TAG_INTENT;break;case c('ReactComposerTaggerType').LOCATION:event=c('ComposerWaterfallEvent').LOCATION_INTENT;break;case c('ReactComposerTaggerType').ACTIVITY:event=c('ComposerWaterfallEvent').MINUTIAE_INTENT;break;case c('ReactComposerTaggerType').MARKDOWN:event=c('ComposerWaterfallEvent').MARKDOWN_INTENT;break;default:break;}if(event===null)return;this.$ReactComposerLoggingStore32(l,event);};j.prototype.$ReactComposerLoggingStore20=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(l);m.perfTimes.postStartTime=c('performanceAbsoluteNow')();this.$ReactComposerLoggingStore32(l,c('ComposerWaterfallEvent').COMPOSER_POST);if(this.$ReactComposerLoggingStore37(l)){this.$ReactComposerLoggingStore36(l,c('PUWSteps').CLIENT_PUBLISH_BEGIN,this.$ReactComposerLoggingStore38(l));c('ReactComposerPhotoStore').getPhotos(l).forEach(function(n){n.faceboxes.forEach(function(o){return (new (c('PhotoUploadFacerecWaterfallTypedLogger'))().setEvent(c('FacerecWaterfallEvent').CLIENT_PHOTO_PUBLISHED).setPhotoFbid(n.id).setFaceBoxID(o.id).setRecognizedUser(o.recognizedSubjectID).setTaggedUser(o.taggedSubjectID).log());});});}};j.prototype.$ReactComposerLoggingStore21=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(l),n=c('ReactComposerAttachmentStore').getSelectedAttachmentID(l);this.$ReactComposerLoggingStore32(l,c('ComposerWaterfallEvent').COMPOSER_POST_SUCCESS);this.$ReactComposerLoggingStore35(l,c('ComposerPerfEvent').CLIENT_POST_SUCCEEDED,{extraData:{attachment_type:c('ReactComposerAttachmentStore').getSelectedAttachmentID(l),duration:c('performanceAbsoluteNow')()-m.perfTimes.postStartTime}});if(this.$ReactComposerLoggingStore33(l,n)){this.$ReactComposerLoggingStore34(l,c('ComposerWaterfallEvent').SLIDESHOW_POST);}else if(this.$ReactComposerLoggingStore37(l)){var o=this.$ReactComposerLoggingStore38(l);this.$ReactComposerLoggingStore36(l,c('PUWSteps').CLIENT_PUBLISH_SUCCESS,o);this.$ReactComposerLoggingStore36(l,c('PUWSteps').CLIENT_FLOW_SUCCESS);}};j.prototype.$ReactComposerLoggingStore22=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(l);this.$ReactComposerLoggingStore32(l,c('ComposerWaterfallEvent').COMPOSER_POST_FAILURE);this.$ReactComposerLoggingStore35(l,c('ComposerPerfEvent').CLIENT_POST_FAILED,{extraData:{attachment_type:c('ReactComposerAttachmentStore').getSelectedAttachmentID(l),duration:c('performanceAbsoluteNow')()-m.perfTimes.postStartTime}});if(this.$ReactComposerLoggingStore37(l)){var n=k.response,o=Object.assign(this.$ReactComposerLoggingStore38(l),{error_code:n&&n.getError&&n.getError(),error_info:n&&n.getErrorDescription&&n.getErrorDescription()});this.$ReactComposerLoggingStore36(l,c('PUWSteps').CLIENT_PUBLISH_FAIL,o);}};j.prototype.$ReactComposerLoggingStore23=function(k){'use strict';var l=this.validateAction(k,['composerID','numPhotos','method']),m=l[0],n=l[1],o=l[2],p={method:o,volume:n};this.$ReactComposerLoggingStore36(m,c('PUWSteps').CLIENT_FLOW_BEGIN,null,{logOncePerSession:true});if(o!==c('PUWMethods').FILE_SELECTOR)this.$ReactComposerLoggingStore36(m,c('PUWSteps').CLIENT_SELECT_BEGIN);this.$ReactComposerLoggingStore36(m,c('PUWSteps').CLIENT_SELECT_SUCCESS,p);};j.prototype.$ReactComposerLoggingStore24=function(k){'use strict';var l=this.validateAction(k,'composerID');this.$ReactComposerLoggingStore36(l,c('PUWSteps').CLIENT_PHOTO_EDIT_BEGIN);};j.prototype.$ReactComposerLoggingStore25=function(k){'use strict';var l=this.validateAction(k,'composerID');this.$ReactComposerLoggingStore36(l,c('PUWSteps').CLIENT_PHOTO_EDIT_SUCCESS);};j.prototype.$ReactComposerLoggingStore26=function(k){'use strict';var l=this.validateAction(k,'composerID');this.$ReactComposerLoggingStore36(l,c('PUWSteps').CLIENT_TRANSFER_MANUAL_RETRY);};j.prototype.$ReactComposerLoggingStore27=function(k){'use strict';var l=this.validateAction(k,['photoID','facebox']),m=l[0],n=l[1],o=n.bestRecognition,p=null;if(o)p=o.subjectID;new (c('PhotoUploadFacerecWaterfallTypedLogger'))().setEvent(c('FacerecWaterfallEvent').RECOGNITION_RECEIVED_BY_CLIENT).setPhotoFbid(m).setFaceBoxID(n.id).setRecognizedUser(p).log();};j.prototype.$ReactComposerLoggingStore28=function(k){'use strict';var l=this.validateAction(k,['photos','facerecWaterfallEvent']),m=l[0],n=l[1];m.forEach(function(o){new (c('PhotoUploadFacerecWaterfallTypedLogger'))().setEvent(c('nullthrows')(n)).setPhotoFbid(o).log();});};j.prototype.$ReactComposerLoggingStore33=function(k,l){'use strict';if(!l)return false;var m=l===c('ReactComposerAttachmentType').MEDIA,n=c('ReactComposerSlideshowStore').isSlideshowSelected(k);return m&&n;};j.prototype.$ReactComposerLoggingStore37=function(k){'use strict';var l=c('ReactComposerAttachmentStore').getIsAttachmentSelected(k,c('ReactComposerAttachmentType').MEDIA),m=c('ReactComposerMediaUploadStore').getUploadsOfType(k,c('ReactComposerMediaUploadType').PHOTO);return l&&!!m.size;};j.prototype.$ReactComposerLoggingStore38=function(k){'use strict';var l=c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').PEOPLE)||[],m=c('ReactComposerMediaUploadStore').getTotalNumberOfStickersOnPhotos(k);return {volume:c('ReactComposerPhotoStore').getPhotos(k).size,with_tag_count:l.length,sticker_count:m};};j.prototype.$ReactComposerLoggingStore32=function(k,event){var l=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];'use strict';var m=this.getComposerData(k);if(m.uniqueEvents.has(event)){if(m.uniqueEvents.get(event))return;m.uniqueEvents=m.uniqueEvents.set(event,true);}l.extraData=Object.assign({is_markdown_enabled:!!c('ReactComposerTaggerStore').getTaggerData(k,c('ReactComposerTaggerType').MARKDOWN).isMarkdown,payload:this.$ReactComposerLoggingStore39(k)},l.extraData);c('ComposerXMarauderLogger').logEvent(event,k,l);};j.prototype.$ReactComposerLoggingStore35=function(k,event){var l=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];'use strict';var m=this.getComposerData(k);if(m.uniqueEvents.has(event)){if(m.uniqueEvents.get(event))return;m.uniqueEvents=m.uniqueEvents.set(event,true);}c('ReactComposerPerfLogger').logEvent(event,k,l);};j.prototype.$ReactComposerLoggingStore36=function(k,l,m,n,o){'use strict';var p=this.getComposerData(k);if(p.uniqueEvents.has(l)){if(p.uniqueEvents.get(l))return;p.uniqueEvents=p.uniqueEvents.set(l,true);}this.logPUWStep(l,this.getSessionID(k),c('PUWApplications').WEB_REACT_COMPOSER,c('ReactComposerStore').getRef(k),m,n,o);};j.prototype.$ReactComposerLoggingStore34=function(k,l,m,n){'use strict';this.$ReactComposerLoggingStore32(k,l,{extraData:{photo_count:m?m:c('ReactComposerSelectedImagesStore').getNumberOfImages(k),placement:n?n:c('ReactComposerSlideshowStore').getPlacement(k)}});};j.prototype.$ReactComposerLoggingStore31=function(){'use strict';while(c('ReactComposerLoggingQueue').getLength()>0){var k=c('ReactComposerLoggingQueue').pop();this.handler(k);}};j.prototype.$ReactComposerLoggingStore39=function(k){'use strict';return {character:c('ReactComposerStatusStore').getTextLength(k),location_tag:c('ReactComposerTaggerStore').hasLocationTag(k),implicit_location:c('ReactComposerTaggerStore').hasImplicitLocation(k),minutiae:c('ReactComposerTaggerStore').hasMinutiae(k),with_who_tag:c('ReactComposerTaggerStore').getNumberOfWithWhoTags(k),photo:c('ReactComposerMediaUploadStore').getNonsphericalPhotoCount(k),three_sixty_photo:c('ReactComposerMediaUploadStore').getSphericalPhotoCount(k),video:c('ReactComposerMediaUploadStore').getUploadsCount(k,c('ReactComposerMediaUploadType').VIDEO),shared_link:c('ReactComposerScrapedAttachmentStore').hasAttachment(k)?1:0};};f.exports=new j();}),null);
__d('ReactComposerDraftTypes',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={DIALOG:'dialog',TOGGLE:'toggle'};f.exports=h;}),null);
__d('ReactComposerFocusScrollLockUtils',['csx','cx','CSS','DOMQuery','Style','getDocumentScrollElement','getElementRect','getUnboundedScrollPosition','getViewportDimensions'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=300,k=400,l={_interval:0,_pageRoot:null,enable:function m(n){c('CSS').addClass(this._getPageRoot(),"_ihc");var o=c('getElementRect')(n),p=c('getUnboundedScrollPosition')(c('getDocumentScrollElement')()),q=o.top+p.y,r=function(){var s=q+n.offsetHeight+k,t=Math.max(c('getViewportDimensions')().height,s)+'px';if(c('Style').get(this._getPageRoot(),'height')!==t)c('Style').set(this._getPageRoot(),'height',t);}.bind(this);this._interval=setInterval(r,j);},disable:function m(){c('CSS').removeClass(this._getPageRoot(),"_ihc");c('Style').set(this._getPageRoot(),'height',null);clearInterval(this._interval);},_getPageRoot:function m(){if(!this._pageRoot)this._pageRoot=c('DOMQuery').scry(document.body,"._li")[0];return this._pageRoot;}};f.exports=l;}),null);
__d('ReactComposerFocusModal.react',['ReactComposerDraftTypes','ReactComposerFocusScrollLockUtils','ReactComposerFocusWrapperCore.react','Arbiter','Bootloader','Image.react','React','ReactDOM'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=null,l=null,m=null;h=babelHelpers.inherits(n,c('React').PureComponent);i=h&&h.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return o=(p=i.constructor).call.apply(p,[this].concat(r)),this.state={focused:false,showDiscardDialog:false},this.$ReactComposerFocusModal5=function(){if(this.props.gks.draftType=='dialog'){c('Bootloader').loadModules(["ReactComposerHandleUnsavedChanges","ReactComposerFocusSaveAsDraftDialog.react","ReactComposerInit"],function(t,u,v){m=t;l=u;k=v;},'ReactComposerFocusModal.react');}else c('Bootloader').loadModules(["ReactComposerHandleUnsavedChanges","ReactComposerFocusDiscardDialog.react","ReactComposerInit"],function(t,u,v){m=t;l=u;k=v;},'ReactComposerFocusModal.react');}.bind(this),this.$ReactComposerFocusModal7=function(t){if(t)return this.$ReactComposerFocusModal1();if(l&&m&&m.hasUnsavedChanges(this.$ReactComposerFocusModal2())){this.$ReactComposerFocusModal8();}else this.$ReactComposerFocusModal3();}.bind(this),this.$ReactComposerFocusModal3=function(){this.$ReactComposerFocusModal4();k&&k.resetComposer(this.$ReactComposerFocusModal2());c('Arbiter').inform('ReactComposerFocus/reset/'+this.$ReactComposerFocusModal2());this.$ReactComposerFocusModal1();}.bind(this),this.$ReactComposerFocusModal6=function(){var t=c('ReactDOM').findDOMNode(this.refs.focus.getComposer());c('ReactComposerFocusScrollLockUtils').enable(t);this.setState({focused:true});}.bind(this),this.$ReactComposerFocusModal1=function(){c('ReactComposerFocusScrollLockUtils').disable();this.setState({focused:false});}.bind(this),this.$ReactComposerFocusModal8=function(){this.setState({showDiscardDialog:true});}.bind(this),this.$ReactComposerFocusModal4=function(){this.setState({showDiscardDialog:false});}.bind(this),this.$ReactComposerFocusModal2=function(){return this.refs.focus.getComposerID();}.bind(this),o;}n.prototype.componentWillUnmount=function(){'use strict';this.$ReactComposerFocusModal1();};n.prototype.render=function(){'use strict';var o=this.state.showDiscardDialog&&l?this.props.gks.draftType==c('ReactComposerDraftTypes').DIALOG?c('React').createElement(l,{getComposerID:this.$ReactComposerFocusModal2,actorID:this.props.actorID,onResetComposer:this.$ReactComposerFocusModal3,onCancel:this.$ReactComposerFocusModal4}):c('React').createElement(l,{onConfirm:this.$ReactComposerFocusModal3,onCancel:this.$ReactComposerFocusModal4}):null;return c('React').createElement('div',null,c('React').createElement(c('ReactComposerFocusWrapperCore.react'),{composerID:this.props.composerID,focused:this.state.focused,fixHeight:true,onFirstFocus:this.$ReactComposerFocusModal5,onFocus:this.$ReactComposerFocusModal6,onDismiss:this.$ReactComposerFocusModal7,ref:'focus'},this.props.children),o);};n.propTypes={composerID:j.string.isRequired,actorID:j.string.isRequired,gks:j.object.isRequired};f.exports=n;}),null);
__d('ReactComposerAlbumSproutContainer.react',['DOMContainer.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return l=(m=i.constructor).call.apply(m,[this].concat(o)),this.$ReactComposerAlbumSproutContainer1=function(event){event.stopPropagation();},l;}k.prototype.render=function(){return c('React').createElement(c('DOMContainer.react'),{onClick:this.$ReactComposerAlbumSproutContainer1},this.props.createAlbumLink);};k.propTypes={createAlbumLink:j.any.isRequired};f.exports=k;}),null);
__d('ReactComposerSproutUIConfig',['React'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes;f.exports=h.shape({label:h.string.isRequired,icon:h.object.isRequired,className:h.string,loggingName:h.string.isRequired});}),null);
__d('ReactComposerSproutItem.react',['cx','ReactComposerSproutUIConfig','Image.react','Link.react','React','TooltipData','XUISpinner.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.loading?c('React').createElement(c('XUISpinner.react'),{className:"_20j1",background:'dark',size:'small'}):null;return (c('React').createElement(c('Link.react'),null,c('React').createElement('div',babelHelpers['extends']({},this.props,{className:c('joinClasses')("_m_1"+(this.props.loading?' '+"_20jn":'')+(this.props.highlighted?' '+"_3x6w":''),this.props.uiConfig.className),role:'tab','aria-selected':this.props.highlighted,'data-tooltip-delay':'500',onClick:this.props.onClick},c('TooltipData').propsFor(this.props.uiConfig.label)),c('React').createElement(c('Image.react'),{className:"_4a0a",src:this.props.uiConfig.icon}),c('React').createElement('div',{className:"_4a0f"},this.props.uiConfig.label),m)));};function l(){i.apply(this,arguments);}l.propTypes={uiConfig:c('ReactComposerSproutUIConfig').isRequired,loading:k.bool,highlighted:k.bool,onClick:k.func};l.defaultProps={highlighted:false};f.exports=l;}),null);
__d('ReactComposerLazySproutContainer.react',['ReactComposerSproutItem.react','ReactComposerSproutUIConfig','BootloadedComponent.react','JSResourceReference','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return l=(m=i.constructor).call.apply(m,[this].concat(o)),this.state={loading:false},this.$ReactComposerLazySproutContainer1=function(){this.setState({loading:true});}.bind(this),l;}k.prototype.render=function(){return c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:this.props.bootloadLoader,bootloadPlaceholder:c('React').createElement(c('ReactComposerSproutItem.react'),{uiConfig:this.props.bootloadProps.uiConfig,onClick:this.$ReactComposerLazySproutContainer1,loading:this.state.loading})},this.props.bootloadProps));};k.propTypes={bootloadLoader:j.instanceOf(c('JSResourceReference')).isRequired,bootloadProps:j.shape({uiConfig:c('ReactComposerSproutUIConfig').isRequired}).isRequired};f.exports=k;}),null);
__d('ReactComposerSproutsDefaultUIConfig',['cx','fbt','ix','ReactComposerLoggingName','ReactComposerSproutType','CurrentUser','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={};k[c('ReactComposerSproutType').MEDIA]={label:i._("Photo \/ Video"),icon:j('/images/composer/sprouts/composer_sprout_media.png'),className:"_1pnt",loggingName:c('ReactComposerLoggingName').MEDIA_SPROUT};k[c('ReactComposerSproutType').ALBUM]={label:i._("Photo Album"),icon:j('/images/composer/sprouts/composer_sprout_album.png'),className:"_1pnu",loggingName:c('ReactComposerLoggingName').ALBUM_SPROUT};k[c('ReactComposerSproutType').NOTE]={label:i._("Write Note"),icon:j('/images/composer/sprouts/composer_sprout_note.png'),className:"_3-9x",loggingName:c('ReactComposerLoggingName').NOTES_SPROUT};k[c('ReactComposerSproutType').LOCATION]={label:i._("Check in"),icon:j('/images/composer/sprouts/composer_sprout_location.png'),className:"_1pnv",loggingName:c('ReactComposerLoggingName').LOCATION_TAG_SPROUT};k[c('ReactComposerSproutType').ACTIVITY]={label:i._("Feeling\/Activity"),icon:j('/images/composer/sprouts/composer_sprout_activity.png'),className:"_1pnz",loggingName:c('ReactComposerLoggingName').MINUTIAE_SPROUT};k[c('ReactComposerSproutType').PEOPLE]={label:c('CurrentUser').isWorkUser()?i._("Tag coworkers"):i._("Tag Friends"),icon:j('/images/composer/sprouts/composer_sprout_people.png'),className:"_1pn-",loggingName:c('ReactComposerLoggingName').FRIEND_TAG_SPROUT};k[c('ReactComposerSproutType').LIVE_VIDEO]={label:i._("Live Video"),icon:j("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/live-video_20_fig-red.png"),className:"_5tv7",loggingName:c('ReactComposerLoggingName').LIVE_VIDEO_SPROUT};k[c('ReactComposerSproutType').MARKDOWN]={label:i._("Format post"),icon:j('/images/composer/sprouts/composer_sprout_markdown.png'),className:"_311p",loggingName:c('ReactComposerLoggingName').MARKDOWN_SPROUT};f.exports=k;}),null);
__d('ReactComposerMediaSprout.react',['ReactComposerAttachmentType','ReactComposerConfig','ReactComposerMediaFilePickerController.react','ReactComposerSproutItem.react','ReactComposerSproutsDefaultUIConfig','ReactComposerSproutType','ReactComposerSproutUIConfig','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerMediaSprout',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{config:c('ReactComposerConfig').isRequired,uiConfig:c('ReactComposerSproutUIConfig'),highlighted:h.bool,onFilesSelected:h.func},getDefaultProps:function j(){return {uiConfig:c('ReactComposerSproutsDefaultUIConfig')[c('ReactComposerSproutType').MEDIA],highlighted:false};},render:function j(){var k=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').MEDIA];return (c('React').createElement(c('ReactComposerMediaFilePickerController.react'),{disableFaceRecognition:k.disableFaceboxTagger,display:'inline-block',mediaAcceptParam:this.props.config.mediaAcceptParam,mediaConfig:k,onClick:this._onClick,onFilesSelected:this.props.onFilesSelected,photoLimit:k.photoLimit,targetData:this.props.config.targetData},c('React').createElement(c('ReactComposerSproutItem.react'),{uiConfig:this.props.uiConfig,highlighted:this.props.highlighted})));},_onClick:function j(event){event.stopPropagation();}});f.exports=i;}),null);
__d('ReactComposerNoteSproutContainer.react',['ReactComposerCreateNoteController.react','ReactComposerSproutItem.react','ReactComposerSproutsDefaultUIConfig','ReactComposerSproutType','ReactComposerSproutUIConfig','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'ReactComposerNoteSproutContainer',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{uiConfig:c('ReactComposerSproutUIConfig')},getDefaultProps:function i(){return {uiConfig:c('ReactComposerSproutsDefaultUIConfig')[c('ReactComposerSproutType').MEDIA]};},render:function i(){return (c('React').createElement(c('ReactComposerCreateNoteController.react'),{onClick:this._onClick},c('React').createElement(c('ReactComposerSproutItem.react'),{uiConfig:this.props.uiConfig})));},_onClick:function i(event){event.stopPropagation();}});f.exports=h;}),null);
__d('ReactComposerSproutsList.react',['cx','ix','ReactComposerAlbumSproutContainer.react','ReactComposerAttachmentType','ReactComposerConfig','ReactComposerLazySproutContainer.react','ReactComposerLoggingActions','ReactComposerLoggingName','ReactComposerMediaSprout.react','ReactComposerNoteSproutContainer.react','ReactComposerSproutsDefaultUIConfig','ReactComposerSproutsDisplayState','ReactComposerSproutItem.react','ReactComposerSproutType','ReactComposerTaggerType','Grid.react','JSResource','React','ReactDOM','ReactComposerContextMixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l,m;if(c.__markCompiled)c.__markCompiled();var n=c('React').PropTypes,o=c('React').Children,p=c('Grid.react').GridItem,q=c('ReactComposerContextMixin').contextTypes;j=babelHelpers.inherits(r,c('React').PureComponent);k=j&&j.prototype;function r(){var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return t=(u=k.constructor).call.apply(u,[this].concat(w)),this.state={initialRender:true,truncate:false},this.$ReactComposerSproutsListInline1=function(){if(this.state.initialRender){var y=c('ReactDOM').findDOMNode(this.refs.inlineWrapper).offsetWidth,z=c('ReactDOM').findDOMNode(this.refs.inline).offsetWidth;if(z>y){this.setState({initialRender:false,truncate:true});}else this.setState({initialRender:false});}}.bind(this),t;}r.prototype.componentWillReceiveProps=function(){this.setState({initialRender:true,truncate:false});};r.prototype.componentDidMount=function(){this.$ReactComposerSproutsListInline1();};r.prototype.componentDidUpdate=function(){this.$ReactComposerSproutsListInline1();};r.prototype.render=function(){var t=this.state.truncate?o.toArray(this.props.children).slice(0,2):this.props.children;return c('React').createElement('div',{ref:'inlineWrapper'},c('React').createElement('span',{className:"_16vg"+(this.state.initialRender?' '+"_1gr1":'')+(this.state.truncate?' '+"_1gr2":''),ref:'inline'},t,c('React').createElement('div',{className:"_5xmp"},c('React').createElement(c('ReactComposerSproutItem.react'),{uiConfig:{className:"_1gr3",label:'',icon:i('/images/composer/sprouts/composer_sprout_ellipsis.png'),loggingName:c('ReactComposerLoggingName').ELLIPSIS_SPROUT},onClick:function(u){return c('ReactComposerLoggingActions').composerEntry(this.context.composerID,c('ReactComposerLoggingName').ELLIPSIS_SPROUT);}.bind(this)}))));};r.contextTypes=q;l=babelHelpers.inherits(s,c('React').PureComponent);m=l&&l.prototype;function s(){var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return t=(u=m.constructor).call.apply(u,[this].concat(w)),this.$ReactComposerSproutsList2=function(){var y=[],z=this.props.config.sproutsConfig;if(z){var aa=function ba(ca,da){return (c('React').createElement('div',{className:"_5xmp",key:da},ca));};this.$ReactComposerSproutsList3(z[c('ReactComposerSproutType').MEDIA])&&y.push(aa(this.$ReactComposerSproutsList4(function(ba){return (c('ReactComposerLoggingActions').composerEntry(this.context.composerID,c('ReactComposerLoggingName').MEDIA_SPROUT));}.bind(this)),c('ReactComposerSproutType').MEDIA));this.$ReactComposerSproutsList3(z[c('ReactComposerSproutType').ALBUM])&&y.push(aa(this.$ReactComposerSproutsList5(),c('ReactComposerSproutType').ALBUM));this.$ReactComposerSproutsList3(z[c('ReactComposerSproutType').NOTE])&&y.push(aa(this.$ReactComposerSproutsList6(),c('ReactComposerSproutType').NOTE));}return (c('React').createElement(r,null,y));}.bind(this),this.$ReactComposerSproutsList1=function(){var y=[],z=this.props.config.sproutsConfig;if(z){var aa=function ba(ca,da){return c('React').createElement(p,{key:da},' ',ca,' ');};this.$ReactComposerSproutsList3(z[c('ReactComposerSproutType').MEDIA])&&y.push(aa(this.$ReactComposerSproutsList7(),c('ReactComposerSproutType').MEDIA));this.$ReactComposerSproutsList3(z[c('ReactComposerSproutType').ACTIVITY])&&y.push(aa(this.$ReactComposerSproutsList8(),c('ReactComposerSproutType').ACTIVITY));this.$ReactComposerSproutsList3(z[c('ReactComposerSproutType').ALBUM])&&y.push(aa(this.$ReactComposerSproutsList5(),c('ReactComposerSproutType').ALBUM));this.$ReactComposerSproutsList3(z[c('ReactComposerSproutType').LOCATION])&&y.push(aa(this.$ReactComposerSproutsList9(),c('ReactComposerSproutType').LOCATION));this.$ReactComposerSproutsList3(z[c('ReactComposerSproutType').LIVE_VIDEO])&&y.push(aa(this.$ReactComposerSproutsList10(),c('ReactComposerSproutType').LIVE_VIDEO));this.$ReactComposerSproutsList3(z[c('ReactComposerSproutType').NOTE])&&y.push(aa(this.$ReactComposerSproutsList6(),c('ReactComposerSproutType').NOTE));this.$ReactComposerSproutsList3(z[c('ReactComposerSproutType').PEOPLE])&&y.push(aa(this.$ReactComposerSproutsList11(),c('ReactComposerSproutType').PEOPLE));this.$ReactComposerSproutsList3(z[c('ReactComposerSproutType').MARKDOWN])&&y.push(aa(this.$ReactComposerSproutsList12(),c('ReactComposerSproutType').MARKDOWN));}return (c('React').createElement('div',{className:"_16vl"},c('React').createElement(c('Grid.react'),{cols:2,fixed:true,spacing:'pas'},y)));}.bind(this),this.$ReactComposerSproutsList6=function(){return (c('React').createElement(c('ReactComposerNoteSproutContainer.react'),{uiConfig:c('ReactComposerSproutsDefaultUIConfig')[c('ReactComposerSproutType').NOTE]}));},this.$ReactComposerSproutsList4=function(y){return (c('React').createElement(c('ReactComposerMediaSprout.react'),{uiConfig:c('ReactComposerSproutsDefaultUIConfig')[c('ReactComposerSproutType').MEDIA],config:this.props.config,onFilesSelected:y}));}.bind(this),this.$ReactComposerSproutsList7=function(){return (c('React').createElement(c('ReactComposerLazySproutContainer.react'),{bootloadLoader:c('JSResource')('ReactComposerMediaSproutContainer.react').__setRef('ReactComposerSproutsList.react'),bootloadProps:{uiConfig:c('ReactComposerSproutsDefaultUIConfig')[c('ReactComposerSproutType').MEDIA],config:this.props.config}}));}.bind(this),this.$ReactComposerSproutsList10=function(){return (c('React').createElement(c('ReactComposerLazySproutContainer.react'),{bootloadLoader:c('JSResource')('ReactComposerLiveVideoSproutContainer.react').__setRef('ReactComposerSproutsList.react'),bootloadProps:{uiConfig:c('ReactComposerSproutsDefaultUIConfig')[c('ReactComposerSproutType').LIVE_VIDEO],config:this.props.config}}));}.bind(this),this.$ReactComposerSproutsList5=function(){var y=this.props.config.attachmentsConfig[c('ReactComposerAttachmentType').ALBUM];return (c('React').createElement(c('ReactComposerAlbumSproutContainer.react'),{createAlbumLink:y.createAlbumLink}));}.bind(this),this.$ReactComposerSproutsList9=function(){return (c('React').createElement(c('ReactComposerLazySproutContainer.react'),{bootloadLoader:c('JSResource')('ReactComposerTaggerSproutContainer.react').__setRef('ReactComposerSproutsList.react'),bootloadProps:{uiConfig:c('ReactComposerSproutsDefaultUIConfig')[c('ReactComposerSproutType').LOCATION],taggerID:c('ReactComposerTaggerType').LOCATION}}));},this.$ReactComposerSproutsList8=function(){return (c('React').createElement(c('ReactComposerLazySproutContainer.react'),{bootloadLoader:c('JSResource')('ReactComposerTaggerSproutContainer.react').__setRef('ReactComposerSproutsList.react'),bootloadProps:{uiConfig:c('ReactComposerSproutsDefaultUIConfig')[c('ReactComposerSproutType').ACTIVITY],taggerID:c('ReactComposerTaggerType').ACTIVITY}}));},this.$ReactComposerSproutsList11=function(){return (c('React').createElement(c('ReactComposerLazySproutContainer.react'),{bootloadLoader:c('JSResource')('ReactComposerTaggerSproutContainer.react').__setRef('ReactComposerSproutsList.react'),bootloadProps:{uiConfig:c('ReactComposerSproutsDefaultUIConfig')[c('ReactComposerSproutType').PEOPLE],taggerID:c('ReactComposerTaggerType').PEOPLE}}));},this.$ReactComposerSproutsList12=function(){return (c('React').createElement(c('ReactComposerLazySproutContainer.react'),{bootloadLoader:c('JSResource')('ReactComposerMarkdownSproutContainer.react').__setRef('ReactComposerSproutsList.react'),bootloadProps:{uiConfig:c('ReactComposerSproutsDefaultUIConfig')[c('ReactComposerSproutType').MARKDOWN],taggerID:c('ReactComposerTaggerType').MARKDOWN}}));},t;}s.prototype.render=function(){var t=this.props.sproutsDisplayState===c('ReactComposerSproutsDisplayState').EXPANDED?this.$ReactComposerSproutsList1():this.$ReactComposerSproutsList2();return c('React').createElement('div',{className:"_16ve"},c('React').createElement('div',{className:"_16vf"}),t);};s.prototype.$ReactComposerSproutsList3=function(t){return !!t&&t.enabled;};s.contextTypes=q;s.propTypes={config:c('ReactComposerConfig').isRequired,sproutsDisplayState:n.string.isRequired};f.exports=s;}),null);
__d('ReactComposerSproutsListContainer.react',['ReactComposerConfig','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerSproutsList.react','ReactComposerStore','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'ReactComposerSproutsListContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerStore'))],propTypes:{config:c('ReactComposerConfig').isRequired},statics:{calculateState:function i(j,k){return {sproutsDisplayState:c('ReactComposerStore').getSproutsDisplayState(j)};}},render:function i(){return (c('React').createElement(c('ReactComposerSproutsList.react'),babelHelpers['extends']({},this.props,this.state)));}});f.exports=h;}),null);