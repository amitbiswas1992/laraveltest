if (self.CavalryLogger) { CavalryLogger.start_js(["wf+kM"]); }

__d('InterestListMenu',['cx','AsyncRequest','CSS','DataStore','DOM','EditSubscriptions','Event','MenuDeprecated','PagesLikeFollowNotifActions','PagesLikeFollowNotifDispatcher','PagesFollowStore','PagesGetNotificationStore','Parent','SocialGoodCharityActionsLoggerUtils','SubscriptionsHandler','Run','XPageGetNewsFeedSaveController','XPageGetNotificationSaveController','isElementNode'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(o,p,q,r,s){var t=c('MenuDeprecated').isItemChecked(q);c('MenuDeprecated').setItemChecked(q,!t);new (c('AsyncRequest'))().setURI('/ajax/lists/modify.php').setMethod('POST').setData({list_id:p,profile_id:o,add_to_list:!t,location:r}).setHandler(s).setErrorHandler(function(){c('MenuDeprecated').setItemChecked(q,t);}).send();}function j(o,p,q){for(var r=0;r<o.length;r++)if(p==k(o[r]))c('MenuDeprecated').setItemChecked(o[r],q);}function k(o){if(!c('isElementNode')(o))return null;var p=c('DOM').scry(o,'a.itemAnchor');if(!p)return null;return c('DataStore').get(p[0],'list-id');}function l(o){if(!c('isElementNode')(o))return null;var p=c('DOM').scry(o,'a.itemAnchor');if(!p)return null;return c('DataStore').get(p[0],'action');}function m(o){if(!c('isElementNode')(o))return null;var p=c('DOM').scry(o,'a.itemAnchor');if(!p)return null;return c('DataStore').get(p[0],'type');}var n={init:function o(p,q,r,s){c('Event').listen(p,'click',function(event){var t=c('Parent').byClass(event.getTarget(),'uiMenuItem');if(t&&c('CSS').hasClass(t,'InterestListMenuItem')){var u=c('MenuDeprecated').isItemChecked(t),v=k(t);i(q,v,t,r,function(){c('Parent').byTag(event.getTarget(),'a').blur();});j(c('DOM').scry(p,'.InterestListMenuItem'),v,!u);}});c('EditSubscriptions').init(p,q,s);},initPageNewFlyout:function o(p,q,r){c('PagesLikeFollowNotifDispatcher').explicitlyRegisterStores([c('PagesFollowStore'),c('PagesGetNotificationStore')]);c('PagesLikeFollowNotifDispatcher').dispatch({data:r,type:c('PagesLikeFollowNotifActions').INIT_DATA});var s=new (c('SubscriptionsHandler'))();s.addSubscriptions(c('Event').listen(p,'click',function(event){var t=c('Parent').byClass(event.getTarget(),'uiMenuItem');if(!t)return;var u=c('MenuDeprecated').isItemChecked(t),v=null;if(c('CSS').hasClass(t,'PageGetNotificationMenuItem')){c('MenuDeprecated').setItemChecked(t,!u);v=c('XPageGetNotificationSaveController').getURIBuilder().setInt('page_id',q).setEnum('type',m(t)).setBool('status',!u).setEnum('ref','flyout').getURI();new (c('AsyncRequest'))().setURI(v).setHandler(function(){c('Parent').byTag(event.getTarget(),'a').blur();var w={};w[m(t)]=!u;c('PagesLikeFollowNotifDispatcher').dispatch({type:c('PagesLikeFollowNotifActions').NOTIF_CHANGE,data:{pageID:q,notificationStatus:w}});}).send();}else if(c('CSS').hasClass(t,'PageGetNewsFeedMenuItem')){if(!u){Array.from(t.parentNode.childNodes).forEach(function(w){if(c('CSS').hasClass(w,'uiMenuItem'))c('MenuDeprecated').setItemChecked(w,false);});c('MenuDeprecated').setItemChecked(t,true);}v=c('XPageGetNewsFeedSaveController').getURIBuilder().setInt('page_id',q).setEnum('follow',m(t)).setEnum('ref','flyout').getURI();new (c('AsyncRequest'))().setURI(v).setHandler(function(){c('Parent').byTag(event.getTarget(),'a').blur();c('PagesLikeFollowNotifDispatcher').dispatch({type:c('PagesLikeFollowNotifActions').FOLLOW_CHANGED,data:{pageID:q,followStatus:m(t)}});}).send();}}),c('PagesFollowStore').addListener(function(){var t=c('PagesFollowStore').getState();if(q in t&&t[q])this._onNewsFeedChange(t[q],p);}.bind(this)),c('PagesGetNotificationStore').addListener(function(){var t=c('PagesGetNotificationStore').getState();if(q in t&&t[q])this._onNotificationChange(t[q],p);}.bind(this)));c('Run').onLeave(function(){return s.release();});},_onNewsFeedChange:function o(p,q){var r=q.getElementsByClassName('PageGetNewsFeedMenuItem');Array.from(r).forEach(function(s){if(c('CSS').hasClass(s,'uiMenuItem')){var t=c('DataStore').get(s.firstChild,'type')===p;c('MenuDeprecated').setItemChecked(s,t);}});},_onNotificationChange:function o(p,q){var r=q.getElementsByClassName('PageGetNotificationMenuItem');Array.from(r).forEach(function(s){if(c('CSS').hasClass(s,'uiMenuItem'))c('MenuDeprecated').setItemChecked(s,p[m(s)]);});},initMenu:function o(p){c('MenuDeprecated').register(p,false);},goBack:function o(p,q){c('Event').listen(p,'click',function(event){c('CSS').removeClass(q,'pageGetNotificationOpen');c('CSS').removeClass(q,'pageGetNewsFeedOpen');c('CSS').addClass(q,'initialFlyout');});},getNotificationOption:function o(p,q){c('Event').listen(p,'click',function(event){c('CSS').removeClass(q,'initialFlyout');c('CSS').addClass(q,'pageGetNotificationOpen');});},getNewsFeedOption:function o(p,q){c('Event').listen(p,'click',function(event){c('CSS').removeClass(q,'initialFlyout');c('CSS').addClass(q,'pageGetNewsFeedOpen');});},initFollowSwitcher:function o(p,q,r,s){var t=[q,r];c('Event').listen(p,'click',function(event){var u=c('Parent').byClass(event.getTarget(),'uiMenuItem'),v=l(u);if(v==='regular_follow'||v==='see_first'){t.forEach(function(w){c('CSS').removeClass(w,"_52-0");});c('CSS').addClass(u,"_52-0");}else if(v==='unfollow'){if(s&&s.is_fundraiser)c('SocialGoodCharityActionsLoggerUtils').logFollowActionClick(false,s.logging_info);c('CSS').addClass(p,"_3siw");t.forEach(function(w){c('CSS').removeClass(w,"_52-0");});}else if(v==='follow'){if(s&&s.is_fundraiser)c('SocialGoodCharityActionsLoggerUtils').logFollowActionClick(true,s.logging_info);c('CSS').removeClass(p,"_3siw");c('CSS').addClass(r,"_52-0");}});}};f.exports=b.InterestListMenu||n;}),null);
__d('AddPhoneNumberRemover',['DOM'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={removeFromForm:function i(){var j=c('DOM').scry(document.body,'.addPagePhoneNumber')[0];j&&c('DOM').remove(j);}};f.exports=h;}),null);