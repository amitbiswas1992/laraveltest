if (self.CavalryLogger) { CavalryLogger.start_js(["nxYwQ"]); }

__d('FeedLoadEventWWWLogger',['Arbiter','BanzaiLogger','ErrorSignal','ErrorUtils','LitestandMessages','PageletEventConstsJS','URI'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=['substream_','more_pager_pagelet_','pagelet_composer','pagelet_navigation','pagelet_rhc_footer'],i=[c('PageletEventConstsJS').ARRIVE_END,c('PageletEventConstsJS').DISPLAY_END,c('PageletEventConstsJS').ONLOAD_END],j=['pre_page_transition','page_transition'],k=[c('LitestandMessages').NEWSFEED_LOAD,c('LitestandMessages').STORIES_REQUESTED,c('LitestandMessages').STORIES_INSERTED,c('LitestandMessages').NEWER_STORIES_REQUESTED,c('LitestandMessages').NEWER_STORIES_INSERTED,c('LitestandMessages').STREAM_LOAD_ERROR,c('LitestandMessages').STREAM_LOAD_RETRY,c('LitestandMessages').DUPLICATE_CURSOR_ERROR],l=false;function m(q){return q&&(q.getPath()==='/'||q.getPath()==='/home.php');}function n(q){c('BanzaiLogger').log('WebFeedLoadLoggerConfig',q);}function o(q){if(!q)return null;if(q.indexOf('more_pager_pagelet_')===0)return 'more_pager_pagelet_n';if(q.indexOf('substream_')===0&&q!=='substream_0'&&q!=='substream_1')return 'substream_n';return q;}var p={init:function q(){if(l)return;c('Arbiter').subscribe('BigPipe/init',function(r,s){if(!s||!s.arbiter)return;s.arbiter.subscribe('pagelet_event',function(t,u){if(u&&m(c('URI').getNextURI())&&i.indexOf(u.event)>=0&&h.some(function(v){return u.id.indexOf(v)===0;}))n({event:'pagelet',pagelet_id:o(u.id),pagelet_event_type:u.event,pagelet_phase:u.phase.toString()});});});c('Arbiter').subscribe(j,function(r,s){if(s){var t=s.to||s.uri;if(m(t))n({event:'page_transition',transition_event_type:r});}});c('Arbiter').subscribe(k,function(r,s){var t=null,u=null;if(r===c('LitestandMessages').STREAM_LOAD_ERROR){t=s;}else if(r===c('LitestandMessages').DUPLICATE_CURSOR_ERROR)u=s;n({event:'stream_load',stream_event_type:r,stream_cursor:u,stream_substream_id:o(s&&s.substream_id),error_name:t&&t.name,error_message:t&&t.message,error_stack:t&&t.stack});});c('ErrorUtils').addListener(function(r){if(r&&m(c('URI').getNextURI())){c('ErrorSignal').logJSError('feedloaderror',{error:r.name||r.message,extra:r});n({event:'js_error',error_name:r.name,error_message:r.message,error_stack:r.stack});}});l=true;}};f.exports=p;}),null);
__d("Shaka",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};(function(i){var j,k=this;function l(hm,im){var jm=hm.split("."),km=k;jm[0] in km||!km.execScript||km.execScript("var "+jm[0]);for(var lm;jm.length&&(lm=jm.shift());)jm.length||void 0===im?km[lm]?km=km[lm]:km=km[lm]={}:km[lm]=im;}function m(hm,im){function jm(){}jm.prototype=im.prototype;hm.bc=im.prototype;hm.prototype=new jm();hm.prototype.constructor=hm;hm.ac=function(km,lm,mm){return im.prototype[lm].apply(km,Array.prototype.slice.call(arguments,2));};}function n(){}function o(hm){var im=console[hm];im?im.bind||(console[hm]=function(){im.apply(console,arguments);}):console[hm]=function(){};}o("error");o("warn");o("info");o("log");o("debug");function p(hm){t[hm]={ga:s(),end:NaN};}function q(hm){if(hm=t[hm])hm.end=s();}function r(hm){return (hm=t[hm])&&hm.end?hm.end-hm.ga:NaN;}var s=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now,t={};function u(hm,im,jm,km){this.id=hm;this.bandwidth=im||0;this.lang=jm||"unknown";this.streamInfoID=km;this.active=false;}l("shaka.player.AudioTrack.compare",function(hm,im){return hm.lang<im.lang?-1:hm.lang>im.lang?1:hm.bandwidth<im.bandwidth?-1:hm.bandwidth>im.bandwidth?1:0;});function v(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.minHeight=this.maxHeight=null;}v.prototype.clone=function(){var hm=new v();hm.maxHeight=this.maxHeight;hm.minHeight=this.minHeight;hm.maxWidth=this.maxWidth;hm.maxBandwidth=this.maxBandwidth;hm.minBandwidth=this.minBandwidth;return hm;};function w(){this.fontSize="100%";this.fontColor=z;this.fontOpacity=ba;this.backgroundColor=aa;this.backgroundOpacity=ba;this.fontEdge=ca;}l("shaka.player.TextStyle",w);function x(hm){var im=[];im.push("font-size: "+hm.fontSize);im.push("color: "+y(hm.fontColor,hm.fontOpacity));im.push("background-color: "+y(hm.backgroundColor,hm.backgroundOpacity));for(var jm=[],km=0;km<hm.fontEdge.length;++km){var lm=hm.fontEdge[km].slice(3,6);jm.push(y(hm.fontEdge[km].slice(0,3),hm.fontOpacity)+" "+lm.join("px ")+"px");}im.push("text-shadow: "+jm.join(","));return im.join("; ");}function y(hm,im){return "rgba("+hm.concat(im).join(",")+")";}var z=[255,255,255],aa=[0,0,0];w.StandardColors={WHITE:z,BLACK:aa,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var ba=1;w.StandardOpacities={OPAQUE:ba,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var ca=[];w.EdgeStyles={NONE:ca,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function da(hm,im){this.id=hm;this.lang=im||"unknown";this.enabled=this.active=false;}l("shaka.player.TextTrack.compare",function(hm,im){return hm.lang<im.lang?-1:hm.lang>im.lang?1:0;});function ea(hm,im,jm,km,lm,mm,nm){this.id=hm;this.bandwidth=im||0;this.width=jm||0;this.height=km||0;this.streamInfoID=lm;this.fbQualityLabel=mm;this.fbQualityClass=nm;this.active=false;}function fa(hm,im){var jm=hm.width*hm.height,km=im.width*im.height;return jm<km?-1:jm>km?1:hm.bandwidth<im.bandwidth?-1:hm.bandwidth>im.bandwidth?1:0;}l("shaka.player.VideoTrack.compare",fa);function ga(){var hm="CustomEvent" in i;if(hm)try{new CustomEvent("");}catch(im){hm=false;}hm||(i.CustomEvent=ha);}l("shaka.polyfill.CustomEvent.install",ga);function ha(hm,im){var jm=document.createEvent("CustomEvent"),km=im||{bubbles:false,cancelable:false,detail:null};jm.initCustomEvent(hm,!!km.bubbles,!!km.cancelable,km.detail);return jm;}function ia(){var hm=Element.prototype;hm.requestFullscreen=hm.requestFullscreen||hm.mozRequestFullScreen||hm.msRequestFullscreen||hm.webkitRequestFullscreen;hm=Document.prototype;hm.exitFullscreen=hm.exitFullscreen||hm.mozCancelFullScreen||hm.msExitFullscreen||hm.webkitExitFullscreen;"fullscreenElement" in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement;}});document.addEventListener("webkitfullscreenchange",ja);document.addEventListener("webkitfullscreenerror",ja);document.addEventListener("mozfullscreenchange",ja);document.addEventListener("mozfullscreenerror",ja);document.addEventListener("MSFullscreenChange",ja);document.addEventListener("MSFullscreenError",ja);}l("shaka.polyfill.Fullscreen.install",ia);function ja(hm){var im=hm.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),im=new Event(im,hm);hm.target.dispatchEvent(im);}function ka(){return Promise.reject(Error("The key system specified is not supported."));}function la(hm){return null==hm?Promise.resolve():Promise.reject(Error("MediaKeys not supported."));}function ma(){throw new TypeError("Illegal constructor.");}ma.prototype.createSession=function(){};ma.prototype.setServerCertificate=function(){};function na(){throw new TypeError("Illegal constructor.");}na.prototype.getConfiguration=function(){};na.prototype.createMediaKeys=function(){};function oa(hm){this.c=[];this.b=[];this.aa=pa;if(hm)try{hm(this.Z.bind(this),this.a.bind(this));}catch(im){this.a(im);}}var pa=0;function qa(){i.Promise||(i.Promise=oa,i.Promise.resolve=ra,i.Promise.reject=sa,i.Promise.all=ta,i.Promise.race=ua,i.setImmediate?(xa=function(hm){return i.setImmediate(hm);},ya=function(hm){return i.clearImmediate(hm);}):(xa=function(hm){return i.setTimeout(hm,0);},ya=function(hm){return i.clearTimeout(hm);}));}l("shaka.polyfill.Promise.install",qa);function ra(hm){var im=new oa();im.Z(hm);return im;}function sa(hm){var im=new oa();im.a(hm);return im;}function ta(hm){function im(om,pm,qm){om.aa==pa&&(lm[pm]=qm,km++,km==lm.length&&om.Z(lm));}var jm=new oa();if(!hm.length)return jm.Z([]),jm;for(var km=0,lm=Array(hm.length),mm=jm.a.bind(jm),nm=0;nm<hm.length;++nm)hm[nm]&&hm[nm].then?hm[nm].then(im.bind(null,jm,nm),mm):im(jm,nm,hm[nm]);return jm;}function ua(hm){for(var im=new oa(),jm=im.Z.bind(im),km=im.a.bind(im),lm=0;lm<hm.length;++lm)hm[lm]&&hm[lm].then?hm[lm].then(jm,km):jm(hm[lm]);return im;}oa.prototype.then=function(hm,im){var jm=new oa();switch(this.aa){case 1:va(this,jm,hm);break;case 2:va(this,jm,im);break;case pa:this.c.push({Ka:jm,Ca:hm}),this.b.push({Ka:jm,Ca:im});}return jm;};oa.prototype.then=oa.prototype.then;oa.prototype.catch=function(hm){return this.then(void 0,hm);};oa.prototype["catch"]=oa.prototype.catch;oa.prototype.Z=function(hm){if(this.aa==pa){this.ya=hm;this.aa=1;for(hm=0;hm<this.c.length;++hm)va(this,this.c[hm].Ka,this.c[hm].Ca);this.c=[];this.b=[];}};oa.prototype.a=function(hm){if(this.aa==pa){this.ya=hm;this.aa=2;for(hm=0;hm<this.b.length;++hm)va(this,this.b[hm].Ka,this.b[hm].Ca);this.c=[];this.b=[];}};function va(hm,im,jm){ab.push(function(){if(jm&&"function"==typeof jm){try{var lm=jm(this.ya);}catch(km){im.a(km);return;}lm instanceof oa?lm==im?im.a(new TypeError("Chaining cycle detected")):lm.then(im.Z.bind(im),im.a.bind(im)):im.Z(lm);}else 1==this.aa?im.Z(this.ya):im.a(this.ya);}.bind(hm));null==za&&(za=xa(wa));}function wa(){for(;ab.length;){null!=za&&(ya(za),za=null);var hm=ab;ab=[];for(var im=0;im<hm.length;++im)hm[im]();}}function xa(){return 0;}function ya(){}var za=null,ab=[];function bb(){var hm=HTMLVideoElement.prototype;!hm.getVideoPlaybackQuality&&"webkitDroppedFrameCount" in hm&&(hm.getVideoPlaybackQuality=cb);}l("shaka.polyfill.VideoPlaybackQuality.install",bb);function cb(){return {droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0};}function db(hm,im){for(var jm=[],km=0;km<hm.length;++km){for(var lm=false,mm=0;mm<jm.length&&!(lm=im?im(hm[km],jm[mm]):hm[km]===jm[mm]);++mm);lm||jm.push(hm[km]);}return jm;}function eb(){return Date.now()+fb;}var fb=0;function gb(hm){this.b=hm;this.c=0==hb;this.a=0;}var hb=1;function ib(hm){return hm.a<hm.b.byteLength;}function jb(hm){var im=hm.b.getUint8(hm.a);hm.a+=1;return im;}function kb(hm){var im=hm.b.getUint32(hm.a,hm.c);hm.a+=4;return im;}function lb(hm){var im,jm;hm.c?(im=hm.b.getUint32(hm.a,true),jm=hm.b.getUint32(hm.a+4,true)):(jm=hm.b.getUint32(hm.a,false),im=hm.b.getUint32(hm.a+4,false));if(2097151<jm)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");hm.a+=8;return jm*Math.pow(2,32)+im;}function mb(hm){if(hm.a+16>hm.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var im=new Uint8Array(hm.b.buffer,hm.a,16);hm.a+=16;return im;}function nb(hm,im){if(hm.a+im>hm.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");hm.a+=im;}function ob(hm){this.b=hm;this.a=new gb(hm);pb||(pb=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]);}var pb;function qb(hm){var im;im=rb(hm);if(7<im.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var jm=0,km=0;km<im.length;km++)jm=256*jm+im[km];im=jm;jm=rb(hm);hm:{for(km=0;km<pb.length;km++)if(vd(jm,pb[km])){km=true;break hm;}km=false;};if(km){jm=hm.b.byteLength-hm.a.a;}else{if(8==jm.length&&jm[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var km=jm[0]&(1<<8-jm.length)-1,lm=1;lm<jm.length;lm++)km=256*km+jm[lm];jm=km;}jm=hm.a.a+jm<=hm.b.byteLength?jm:hm.b.byteLength-hm.a.a;km=new DataView(hm.b.buffer,hm.b.byteOffset+hm.a.a,jm);nb(hm.a,jm);return new sb(im,km);}function rb(hm){var im=jb(hm.a),jm;for(jm=1;8>=jm&&!(im&1<<8-jm);jm++);if(8<jm)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var km=new Uint8Array(jm);km[0]=im;for(im=1;im<jm;im++)km[im]=jb(hm.a);return km;}function sb(hm,im){this.id=hm;this.a=im;}function tb(hm){if(8<hm.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==hm.a.byteLength&&hm.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var im=0,jm=0;jm<hm.a.byteLength;jm++)var km=hm.a.getUint8(jm),im=256*im+km;return im;}var ub={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."};function vb(hm){this.c=Math.exp(Math.log(.5)/hm);this.a=this.b=0;}vb.prototype.sample=function(hm,im){var jm=Math.pow(this.c,hm);this.b=im*(1-jm)+jm*this.b;this.a+=hm;};function wb(hm){return hm.b/(1-Math.pow(hm.c,hm.a));}function xb(hm){var im=new CustomEvent(hm.type,{detail:hm.detail,bubbles:!!hm.bubbles}),jm;for(jm in hm)jm in im||(im[jm]=hm[jm]);return im;}function yb(hm){return new CustomEvent("error",{detail:hm,bubbles:true});}function zb(hm,im,jm){cc(im);cc(jm);return jm==im||hm>=ac&&jm==im.split("-")[0]||hm>=bc&&jm.split("-")[0]==im.split("-")[0]?true:false;}var ac=1,bc=2;function cc(hm){hm=hm.toLowerCase().split("-");var im=dc[hm[0]];im&&(hm[0]=im);return hm.join("-");}var dc={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function ec(hm){return Object.keys(hm).map(function(im){return hm[im];});}function fc(hm,im){return ic(hm,im,"boolean");}function gc(hm,im,jm){hm=ic(hm,im,"number");if(null==hm)return null;if(isNaN(hm)||hm==Number.NEGATIVE_INFINITY||hm==Number.POSITIVE_INFINITY)throw new RangeError("'"+im+"' must be finite.");if(null!=jm&&hm<jm)throw new RangeError("'"+im+"' must be >= "+jm);return hm;}function hc(hm,im){return ic(hm,im,"string");}function ic(hm,im,jm){hm=hm[im];if(null==hm)return null;if(typeof hm!=jm)throw new TypeError("'"+im+"' must be a "+jm+".");return hm;}function jc(hm,im,jm){hm=hm[im];if(null==hm)return null;if(!(hm instanceof jm))throw new TypeError("'"+im+"' must be an instance of "+jm.name+".");return hm;}function kc(){this.a={};}kc.prototype.push=function(hm,im){this.a.hasOwnProperty(hm)?this.a[hm].push(im):this.a[hm]=[im];};kc.prototype.set=function(hm,im){this.a[hm]=im;};kc.prototype.get=function(hm){return (hm=this.a[hm])?hm.slice():null;};function lc(hm){var im=[],jm;for(jm in hm.a)im.push.apply(im,hm.a[jm]);return im;}function mc(hm,im,jm){if(hm=hm.a[im])for(im=0;im<hm.length;++im)hm[im]==jm&&(hm.splice(im,1),--im);}function nc(hm){var im=[],jm;for(jm in hm.a)im.push(jm);return im;}function oc(){this.a=new kc();}oc.prototype.destroy=function(){qc(this);this.a=null;};function pc(hm,im,jm,km){im=new rc(im,jm,km);hm.a.push(jm,im);}oc.prototype.ua=function(hm,im){for(var jm=this.a.get(im)||[],km=0;km<jm.length;++km){var lm=jm[km];lm.target==hm&&(lm.ua(),mc(this.a,im,lm));}};function qc(hm){for(var im=lc(hm.a),jm=0;jm<im.length;++jm)im[jm].ua();hm.a.a={};}function rc(hm,im,jm){this.target=hm;this.type=im;this.a=jm;this.target.addEventListener(im,jm,false);}rc.prototype.ua=function(){this.target&&(this.target.removeEventListener(this.type,this.a,false),this.a=this.target=null);};function sc(hm){this.za=new kc();this.S=hm;}l("shaka.util.FakeEventTarget",sc);sc.prototype.addEventListener=function(hm,im,jm){jm||this.za.push(hm,im);};sc.prototype.removeEventListener=function(hm,im,jm){jm||mc(this.za,hm,im);};sc.prototype.dispatchEvent=function(hm){hm.hasOwnProperty("srcElement")||(delete hm.srcElement,Object.defineProperty(hm,"srcElement",{get:function(){return null;}}));if(hm.hasOwnProperty("target")){hm.target=this;}else{delete hm.target;var im=this;Object.defineProperty(hm,"target",{get:function(){return im;},set:function(km){im=km;}});}if(hm.hasOwnProperty("currentTarget")){hm.currentTarget=null;}else{delete hm.currentTarget;var jm=null;Object.defineProperty(hm,"currentTarget",{get:function(){return jm;},set:function(km){jm=km;}});}return tc(this,hm);};sc.prototype.Y=function(hm,im){return this.dispatchEvent(xb({type:"debug/shakaEvent",bubbles:true,detail:{type:hm,event:im}}));};function tc(hm,im){im.currentTarget=hm;for(var jm=hm.za.get(im.type)||[],km=0;km<jm.length;++km){var lm=jm[km];try{lm.handleEvent?lm.handleEvent(im):lm.call(hm,im);}catch(mm){}}hm.S&&im.bubbles&&tc(hm.S,im);return im.defaultPrevented;}function uc(hm){sc.call(this,null);this.a=new vb(3);this.g=new vb(10);this.h=hm||500000;this.f=0;}m(uc,sc);l("shaka.util.EWMABandwidthEstimator",uc);uc.prototype.sample=function(hm,im){if(!(65536>im)){hm=Math.max(hm,50);var jm=8000*im/hm,km=hm/1000;this.a.sample(km,jm);this.g.sample(km,jm);this.dispatchEvent(xb({type:"bandwidth"}));this.f=Date.now();}};uc.prototype.getBandwidth=function(){return .5>this.a.a?this.h:Math.min(wb(this.a),wb(this.g));};uc.prototype.getDataAge=function(){return (Date.now()-this.f)/1000;};uc.prototype.supportsCaching=function(){return false;};function vc(hm,im,jm){uc.call(this,jm);this.c=hm||0;this.b=void 0===im?Infinity:im;}m(vc,uc);l("shaka.util.EWMACacheBandwidthEstimator",vc);vc.prototype.sample=function(hm,im){hm<=this.c&&8000*im/hm>this.b||uc.prototype.sample.call(this,hm,im);};vc.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c;};function wc(){uc.call(this);}m(wc,uc);l("shaka.util.EWMASignedURLBandwidthEstimator",wc);wc.prototype.supportsCaching=function(){return true;};function xc(){var hm,im,jm=new Promise(function(km,lm){hm=km;im=lm;});jm.resolve=hm;jm.reject=im;jm.destroy=xc.prototype.destroy;return jm;}xc.prototype.destroy=function(){this.catch(function(){});var hm=Error("Destroyed!");hm.type="destroy";this.reject(hm);};function yc(hm){hm.split("").reduce(function(im,jm,km){return im+(km&&0==km%4?" "+jm:jm);});}function zc(){this.g=new xc();this.f=false;this.a=null;this.b=[];this.c=null;}function ad(hm,im){if(hm.f)throw Error("Cannot append to a running task!");hm.b.push(im);}zc.prototype.start=function(){if(this.f)throw Error("Task already started!");this.f=true;this.b.unshift(function(){});bd(this,void 0);};zc.prototype.end=function(){this.b.splice(1);};function bd(hm,im){var jm=hm.b[0](im),km;jm?(km=jm[0],hm.c=jm[1]):(km=Promise.resolve(),hm.c=null);km.then(dd(hm,function(lm){this.a?(this.b=[],this.c=null,cd(this)):(this.b.shift(),this.b.length?bd(this,lm):(this.g.resolve(lm),this.c=null));})).catch(dd(hm,function(lm){this.b=[];this.c=null;this.a?cd(this):this.g.reject(lm);}));}function cd(hm){var im=Error("Task aborted.");im.type="aborted";hm.g.reject(im);i.setTimeout(function(){this.a.resolve();this.a=null;}.bind(hm),5);}function dd(hm,im){return im.bind(hm);}function ed(hm,im,jm,km){MediaSource.isTypeSupported(im);sc.call(this,km);im=hm.addSourceBuffer(im);this.h=hm;this.c=im;this.l=jm;this.i=new oc();this.v=null;this.b=[];this.s=0;this.f=this.a=null;this.m=0;pc(this.i,this.c,"updateend",this.A.bind(this));}m(ed,sc);var fd=1/60;ed.prototype.destroy=function(){ld(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.i.destroy();this.h=this.c=this.i=null;};function gd(hm,im){for(var jm=hm.c.buffered,km=0;km<jm.length;++km){var lm=jm.start(km)-fd,mm=jm.end(km)+fd;if(im>=lm&&im<=mm)return jm.end(km)-im;}return 0;}function hd(hm,im,jm){im=im.endTime?im.endTime-im.startTime:1;var km=new ch();km.a=3;km.i=1000*im;km.c=1000*hm.m;km.m=hm.v;km.j=jm;return km;}function id(hm,im,jm,km,lm){if(hm.a)return hm=Error("Cannot fetch ("+hm.j+"): previous operation not complete."),hm.type="stream",Promise.reject(hm);hm.a=new zc();jm!=hm.c.timestampOffset&&(hm.c.timestampOffset=jm);jm=hd(hm,im,lm);var mm=nh(im.url,jm,hm.l);hm.Y("SegmentFetching",im);var nm=kh.prototype.f.bind(im.url),om=0;km&&ad(hm.a,function(){return [km.then(function(rm){rm.ia>om&&(om=rm.ia);return pd(this,rm);}.bind(this)),this.g.bind(this)];}.bind(hm));ad(hm.a,dd(hm,function(){return [mm.then(function(rm){this.Y("SegmentFetched",im);rm.ia>om&&(om=rm.ia);this.l.getBandwidth();return pd(this,rm);}.bind(this)),function(){this.Y("SegmentFailed",im);nm();this.g();}.bind(this)];}));var pm=0==hm.c.buffered.length&&0==hm.b.length,qm=null;ad(hm.a,function(){if(0==this.c.buffered.length){var rm=Error("Failed to buffer segment ("+this.j+").");rm.type="stream";return [Promise.reject(rm)];}pm&&(rm=im.startTime,qm=this.c.buffered.start(0)-rm);rm=zh(this.b,im.startTime);0<=rm?this.b.splice(rm+1,0,im):this.b.push(im);}.bind(hm));return od(hm).then(function(){return Promise.resolve({X:qm,ub:om});}.bind(hm));}function jd(hm){if(hm.a)return hm=Error("Cannot clear ("+hm.j+"): previous operation not complete."),hm.type="stream",Promise.reject(hm);hm.a=new zc();ad(hm.a,function(){var im;im:if(0==this.c.buffered.length){im=Promise.resolve();}else{try{this.c.remove(0,this.h.duration);}catch(jm){im=Promise.reject(jm);break im;}this.b=[];im=this.f=new xc();};return [im,this.g.bind(this)];}.bind(hm));return od(hm);}function kd(hm,im){if(hm.a){var jm=Error("Cannot clearAfter ("+hm.j+"): previous operation not complete.");jm.type="stream";return Promise.reject(jm);}hm.a=new zc();ad(hm.a,function(){return [qd(this,im),this.g.bind(this)];}.bind(hm));return od(hm);}function ld(hm){hm.a?(hm=hm.a,hm.a?hm=hm.a:hm.f?(hm.c&&hm.c(),hm.a=new xc(),hm=hm.a):(hm.f=true,hm=Promise.resolve())):hm=Promise.resolve();return hm;}function md(hm){for(var im=hm.currentTime,jm=im,km=0;km<hm.buffered.length;km++)if(im<=hm.buffered.start(km)){jm=hm.buffered.start(km);break;}return jm;}function nd(hm){for(var im=hm.currentTime,jm=0;jm<hm.buffered.length;jm++)if(im>=hm.buffered.start(jm)&&im<=hm.buffered.end(jm)-.05)return false;return true;}function od(hm){hm.a.start();return hm.a.g.then(dd(hm,function(){this.a=null;})).catch(dd(hm,function(im){this.a=null;return Promise.reject(im);}));}function pd(hm,im){try{hm.c.appendBuffer(im);}catch(jm){return Promise.reject(jm);}hm.f=new xc();return hm.f;}function qd(hm,im){if(0==hm.c.buffered.length)return Promise.resolve();var jm=zh(hm.b,im);if(-1==jm||jm==hm.b.length-1)return Promise.resolve();try{hm.c.remove(hm.b[jm+1].startTime,hm.h.duration);}catch(km){return Promise.reject(km);}hm.b=hm.b.slice(0,jm+1);hm.f=new xc();return hm.f;}ed.prototype.g=function(){this.f&&"open"==this.h.readyState&&this.c.abort();};ed.prototype.A=function(){this.f&&(this.f.resolve(),this.f=null);};function rd(hm){return String.fromCharCode.apply(null,hm);}l("shaka.util.Uint8ArrayUtils.toString",rd);function sd(hm){for(var im=new Uint8Array(hm.length),jm=0;jm<hm.length;++jm)im[jm]=hm.charCodeAt(jm);return im;}l("shaka.util.Uint8ArrayUtils.fromString",sd);l("shaka.util.Uint8ArrayUtils.toBase64",function(hm,im){var jm=void 0==im?true:im,km=i.btoa(rd(hm)).replace(/\+/g,"-").replace(/\//g,"_");return jm?km:km.replace(/=*$/,"");});function td(hm){return sd(i.atob(hm.replace(/-/g,"+").replace(/_/g,"/")));}l("shaka.util.Uint8ArrayUtils.fromBase64",td);l("shaka.util.Uint8ArrayUtils.fromHex",function(hm){for(var im=new Uint8Array(hm.length/2),jm=0;jm<hm.length;jm+=2)im[jm/2]=i.parseInt(hm.substr(jm,2),16);return im;});function ud(hm){for(var im="",jm=0;jm<hm.length;++jm){var km=hm[jm].toString(16);1==km.length&&(km="0"+km);im+=km;}return im;}l("shaka.util.Uint8ArrayUtils.toHex",ud);function vd(hm,im){if(!hm&&!im)return true;if(!hm||!im||hm.length!=im.length)return false;for(var jm=0;jm<hm.length;++jm)if(hm[jm]!=im[jm])return false;return true;}function wd(){this.h=this.a="";this.l=false;this.s=this.m=null;this.i=this.g=false;this.j=this.f="";this.c=null;this.b=[];}function xd(hm,im){var jm=new wd();jm.a=hm.a;jm.h=hm.h;jm.l=hm.l;jm.m=hm.m;jm.s=hm.s;jm.g=hm.g;jm.i=hm.i;jm.f=hm.f;jm.j=hm.j;jm.c=hm.c?new Uint8Array(hm.c.buffer):null;yd(jm,hm.b);yd(jm,im.b);return jm;}function yd(hm,im){var jm=hm.b.concat(im.map(function(km){return {initData:new Uint8Array(km.initData.buffer),initDataType:km.initDataType};}));hm.b=db(jm,zd);}function zd(hm,im){return hm.initDataType==im.initDataType&&vd(hm.initData,im.initData);}function ae(hm,im,jm,km){this.a=[];km&&this.a.push(km);}l("shaka.player.DrmSchemeInfo",ae);ae.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:1};ae.PersistentState={OPTIONAL:0,REQUIRED:1};ae.createUnencrypted=function(){return new ae(0,0,0,null);};function be(hm,im){try{var km=new de(hm,im);return Promise.resolve(km);}catch(jm){return Promise.reject(jm);}}function ce(hm){var im=this.mediaKeys;im&&im!=hm&&fe(im,null);delete this.mediaKeys;(this.mediaKeys=hm)&&fe(hm,this);return Promise.resolve();}function de(hm,im){this.a=this.keySystem=hm;var jm=true;"org.w3.clearkey"==hm&&(this.a="webkit-org.w3.clearkey",jm=false);var km=false,lm;lm=document.getElementsByTagName("video");lm=lm.length?lm[0]:document.createElement("video");for(var mm=0;mm<im.length;++mm){var nm=im[mm],om={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:nm.initDataTypes,sessionTypes:["temporary"]},pm=false;if(nm.audioCapabilities)for(var qm=0;qm<nm.audioCapabilities.length;++qm){var rm=nm.audioCapabilities[qm];rm.contentType&&(pm=true,lm.canPlayType(rm.contentType.split(";")[0],this.a)&&(om.audioCapabilities.push(rm),km=true));}if(nm.videoCapabilities)for(qm=0;qm<nm.videoCapabilities.length;++qm)rm=nm.videoCapabilities[qm],rm.contentType&&(pm=true,lm.canPlayType(rm.contentType,this.a)&&(om.videoCapabilities.push(rm),km=true));pm||(km=lm.canPlayType("video/mp4",this.a)||lm.canPlayType("video/webm",this.a));"required"==nm.persistentState&&(jm?(om.persistentState="required",om.sessionTypes=["persistent-license"]):km=false);if(km){this.b=om;return;}}jm="Unsupported keySystem";if("org.w3.clearkey"==hm||"com.widevine.alpha"==hm)jm="None of the requested configurations were supported.";jm=Error(jm);jm.name="NotSupportedError";jm.code=DOMException.NOT_SUPPORTED_ERR;throw jm;}de.prototype.createMediaKeys=function(){var hm=new ee(this.a);return Promise.resolve(hm);};de.prototype.getConfiguration=function(){return this.b;};function ee(hm){this.g=hm;this.b=null;this.a=new oc();this.c=[];this.f={};}function fe(hm,im){hm.b=im;qc(hm.a);im&&(pc(hm.a,im,"webkitneedkey",hm.Ob.bind(hm)),pc(hm.a,im,"webkitkeymessage",hm.Nb.bind(hm)),pc(hm.a,im,"webkitkeyadded",hm.Lb.bind(hm)),pc(hm.a,im,"webkitkeyerror",hm.Mb.bind(hm)));}j=ee.prototype;j.createSession=function(hm){var im=hm||"temporary";if("temporary"!=im&&"persistent-license"!=im)throw new TypeError("Session type "+hm+" is unsupported on this platform.");hm=this.b||document.createElement("video");hm.src||(hm.src="about:blank");im=new he(hm,this.g,im);this.c.push(im);return im;};j.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};j.Ob=function(hm){hm=xb({type:"encrypted",initDataType:"webm",initData:hm.initData});this.b.dispatchEvent(hm);};j.Nb=function(hm){var im=ge(this,hm.sessionId);im&&(hm=xb({type:"message",messageType:void 0==im.keyStatuses.Ha()?"licenserequest":"licenserenewal",message:hm.message}),im.b&&(im.b.resolve(),im.b=null),im.dispatchEvent(hm));};j.Lb=function(hm){if(hm=ge(this,hm.sessionId))je(hm,"usable"),hm.a&&hm.a.resolve(),hm.a=null;};j.Mb=function(hm){var im=ge(this,hm.sessionId);if(im){var jm=Error("EME v0.1b key error");jm.errorCode=hm.errorCode;jm.errorCode.systemCode=hm.systemCode;!hm.sessionId&&im.b?(jm.method="generateRequest",45==hm.systemCode&&(jm.message="Unsupported session type."),im.b.reject(jm),im.b=null):hm.sessionId&&im.a?(jm.method="update",im.a.reject(jm),im.a=null):(jm=hm.systemCode,hm.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?je(im,"output-restricted"):1==jm?je(im,"expired"):je(im,"internal-error"));}};function ge(hm,im){var jm=hm.f[im];return jm?jm:(jm=hm.c.shift())?(jm.sessionId=im,hm.f[im]=jm):null;}function he(hm,im,jm){sc.call(this,null);this.f=hm;this.h=false;this.a=this.b=null;this.c=im;this.g=jm;this.sessionId="";this.expiration=NaN;this.closed=new xc();this.keyStatuses=new ke();}m(he,sc);function ie(hm,im,jm){if(hm.h)return Promise.reject(Error("The session is already initialized."));hm.h=true;var km;try{if("persistent-license"==hm.g){if(jm){km=sd("LOAD_SESSION|"+jm);}else{var mm=new Uint8Array(im);km=sd("PERSISTENT|"+rd(mm));}}else km=new Uint8Array(im);}catch(lm){return Promise.reject(lm);}hm.b=new xc();try{hm.f.webkitGenerateKeyRequest(hm.c,km);}catch(nm){if("InvalidStateError"!=nm.name)return hm.b=null,Promise.reject(nm);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,km);}catch(om){this.b.reject(om),this.b=null;}}.bind(hm),10);}return hm.b;}j=he.prototype;j.Oa=function(hm,im){if(this.a){this.a.then(this.Oa.bind(this,hm,im)).catch(this.Oa.bind(this,hm,im));}else{this.a=hm;var jm,km;"webkit-org.w3.clearkey"==this.c?(jm=rd(new Uint8Array(im)),km=JSON.parse(jm),"oct"!=km.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),jm=td(km.keys[0].k),km=td(km.keys[0].kid)):(jm=new Uint8Array(im),km=null);try{this.f.webkitAddKey(this.c,jm,km,this.sessionId);}catch(lm){this.a.reject(lm),this.a=null;}}};function je(hm,im){hm.keyStatuses.Ma(im);var jm=xb({type:"keystatuseschange"});hm.dispatchEvent(jm);}j.generateRequest=function(hm,im){return ie(this,im,null);};j.load=function(hm){return "persistent-license"==this.g?ie(this,null,hm):Promise.reject(Error("Not a persistent session."));};j.update=function(hm){var im=new xc();this.Oa(im,hm);return im;};j.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId);}this.closed.resolve();return this.closed;};j.remove=function(){return "persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close();};function ke(){this.size=0;this.a=void 0;}var le;j=ke.prototype;j.Ma=function(hm){this.size=void 0==hm?0:1;this.a=hm;};j.Ha=function(){return this.a;};j.forEach=function(hm){this.a&&hm(le,this.a);};j.get=function(hm){if(this.has(hm))return this.a;};j.has=function(hm){var im=le;return this.a&&vd(new Uint8Array(hm),new Uint8Array(im))?true:false;};function me(hm){this.systemIds=[];this.cencKeyIds=[];this.a=[];hm=new gb(new DataView(hm.buffer));try{for(;ib(hm);){var jm=hm.a,km=kb(hm),lm=kb(hm);1==km?km=lb(hm):0==km&&(km=hm.b.byteLength-jm);if(1886614376!=lm){nb(hm,km-(hm.a-jm));}else{var mm=jb(hm);if(1<mm){nb(hm,km-(hm.a-jm));}else{nb(hm,3);var nm=ud(mb(hm)),om=[];if(0<mm)for(var pm=kb(hm),qm=0;qm<pm;++qm){var rm=ud(mb(hm));om.push(rm);}var sm=kb(hm);nb(hm,sm);this.cencKeyIds.push.apply(this.cencKeyIds,om);this.systemIds.push(nm);this.a.push({start:jm,end:hm.a-1});hm.a!=jm+km&&nb(hm,km-(hm.a-jm));}}}}catch(im){}}function ne(hm,im){try{var km=new oe(hm,im);return Promise.resolve(km);}catch(jm){return Promise.reject(jm);}}function oe(hm,im){this.keySystem=hm;for(var jm=false,km=0;km<im.length;++km){var lm=im[km],mm={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:lm.initDataTypes,sessionTypes:["temporary"]},nm=false;if(lm.audioCapabilities)for(var om=0;om<lm.audioCapabilities.length;++om){var pm=lm.audioCapabilities[om];if(pm.contentType){var nm=true,qm=pm.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,qm)&&(mm.audioCapabilities.push(pm),jm=true);}}if(lm.videoCapabilities)for(om=0;om<lm.videoCapabilities.length;++om)pm=lm.videoCapabilities[om],pm.contentType&&(nm=true,qm=pm.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,qm)&&(mm.videoCapabilities.push(pm),jm=true));nm||(jm=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==lm.persistentState&&(mm.persistentState="required",mm.sessionTypes=["persistent-license"]);if(jm){this.a=mm;return;}}jm=Error("Unsupported keySystem");jm.name="NotSupportedError";jm.code=DOMException.NOT_SUPPORTED_ERR;throw jm;}oe.prototype.createMediaKeys=function(){var hm=new qe(this.keySystem);return Promise.resolve(hm);};oe.prototype.getConfiguration=function(){return this.a;};function pe(hm){var im=this.mediaKeys;im&&im!=hm&&re(im,null);delete this.mediaKeys;return (this.mediaKeys=hm)?re(hm,this):Promise.resolve();}function qe(hm){this.a=new MSMediaKeys(hm);this.b=new oc();}qe.prototype.createSession=function(hm){if("temporary"!=(hm||"temporary"))throw new TypeError("Session type "+hm+" is unsupported on this platform.");return new se(this.a);};qe.prototype.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};function re(hm,im){function jm(){im.msSetMediaKeys(km.a);im.removeEventListener("loadedmetadata",jm);}qc(hm.b);if(!im)return Promise.resolve();pc(hm.b,im,"msneedkey",te);var km=hm;try{return 1<=im.readyState?im.msSetMediaKeys(hm.a):im.addEventListener("loadedmetadata",jm),Promise.resolve();}catch(lm){return Promise.reject(lm);}}function se(hm){sc.call(this,null);this.c=null;this.g=hm;this.b=this.a=null;this.f=new oc();this.sessionId="";this.expiration=NaN;this.closed=new xc();this.keyStatuses=new we();}m(se,sc);j=se.prototype;j.generateRequest=function(hm,im){this.a=new xc();try{this.c=this.g.createSession("video/mp4",new Uint8Array(im),null),pc(this.f,this.c,"mskeymessage",this.Db.bind(this)),pc(this.f,this.c,"mskeyadded",this.Bb.bind(this)),pc(this.f,this.c,"mskeyerror",this.Cb.bind(this)),ve(this,"status-pending");}catch(jm){this.a.reject(jm);}return this.a;};j.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"));};j.update=function(hm){this.b=new xc();try{this.c.update(new Uint8Array(hm));}catch(im){this.b.reject(im);}return this.b;};j.close=function(){try{this.c.close(),this.closed.resolve(),qc(this.f);}catch(hm){this.closed.reject(hm);}return this.closed;};j.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"));};function te(hm){var im=hm.initData;if(im){var jm=new me(im);if(1>=jm.a.length){hm=im;}else{var km=[];for(hm=0;hm<jm.a.length;hm++)km.push(im.subarray(jm.a[hm].start,jm.a[hm].end+1));im=db(km,ue);for(hm=jm=0;hm<im.length;hm++)jm+=im[hm].length;jm=new Uint8Array(jm);for(hm=km=0;hm<im.length;hm++)jm.set(im[hm],km),km+=im[hm].length;hm=jm;}}else hm=im;hm=xb({type:"encrypted",initDataType:"cenc",initData:hm});this.dispatchEvent(hm);}function ue(hm,im){return vd(hm,im);}j.Db=function(hm){this.a&&(this.a.resolve(),this.a=null);hm=xb({type:"message",messageType:void 0==this.keyStatuses.Ha()?"licenserequest":"licenserenewal",message:hm.message.buffer});this.dispatchEvent(hm);};j.Bb=function(){this.a?(this.a.resolve(),this.a=null):this.b&&(ve(this,"usable"),this.b.resolve(),this.b=null);};j.Cb=function(){var hm=Error("EME v20140218 key error");hm.errorCode=this.c.error;if(null!=this.a){this.a.reject(hm),this.a=null;}else if(null!=this.b){this.b.reject(hm),this.b=null;}else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:ve(this,"output-not-allowed");default:ve(this,"internal-error");}};function ve(hm,im){hm.keyStatuses.Ma(im);var jm=xb({type:"keystatuseschange"});hm.dispatchEvent(jm);}function we(){this.size=0;this.a=void 0;}var xe;j=we.prototype;j.Ma=function(hm){this.size=void 0==hm?0:1;this.a=hm;};j.Ha=function(){return this.a;};j.forEach=function(hm){this.a&&hm(xe,this.a);};j.get=function(hm){if(this.has(hm))return this.a;};j.has=function(hm){var im=xe;return this.a&&vd(new Uint8Array(hm),new Uint8Array(im))?true:false;};function ye(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(le=(new Uint8Array([0])).buffer,Navigator.prototype.requestMediaKeySystemAccess=be,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ce,i.MediaKeys=ee,i.MediaKeySystemAccess=de):i.MSMediaKeys?(xe=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=pe,i.MediaKeys=qe,i.MediaKeySystemAccess=oe,Navigator.prototype.requestMediaKeySystemAccess=ne):(Navigator.prototype.requestMediaKeySystemAccess=ka,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=la,i.MediaKeys=ma,i.MediaKeySystemAccess=na));}l("shaka.polyfill.MediaKeys.install",ye);l("shaka.polyfill.installAll",function(){ga();ia();bb();qa();ye();});var ze=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function af(hm){var im;hm instanceof af?(bf(this,hm.W),this.ba=hm.ba,this.M=hm.M,cf(this,hm.ha),this.R=hm.R,df(this,hm.a.clone()),this.$=hm.$):hm&&(im=String(hm).match(ze))?(bf(this,im[1]||"",true),this.ba=ef(im[2]||""),this.M=ef(im[3]||"",true),cf(this,im[4]),this.R=ef(im[5]||"",true),df(this,im[6]||"",true),this.$=ef(im[7]||"")):this.a=new nf(null);}j=af.prototype;j.W="";j.ba="";j.M="";j.ha=null;j.R="";j.$="";j.toString=function(){var hm=[],im=this.W;im&&hm.push(ff(im,hf,true),":");if(im=this.M){hm.push("//");var jm=this.ba;jm&&hm.push(ff(jm,hf,true),"@");hm.push(encodeURIComponent(im).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));im=this.ha;null!=im&&hm.push(":",String(im));}if(im=this.R)this.M&&"/"!=im.charAt(0)&&hm.push("/"),hm.push(ff(im,"/"==im.charAt(0)?kf:jf,true));(im=this.a.toString())&&hm.push("?",im);(im=this.$)&&hm.push("#",ff(im,mf));return hm.join("");};j.resolve=function(hm){var im=this.clone();"data"===im.W&&(im=new af());var jm=!!hm.W;jm?bf(im,hm.W):jm=!!hm.ba;jm?im.ba=hm.ba:jm=!!hm.M;jm?im.M=hm.M:jm=null!=hm.ha;var km=hm.R;if(jm){cf(im,hm.ha);}else if(jm=!!hm.R){if("/"!=km.charAt(0))if(this.M&&!this.R){km="/"+km;}else{var lm=im.R.lastIndexOf("/");-1!=lm&&(km=im.R.substr(0,lm+1)+km);}if(".."==km||"."==km){km="";}else if(-1!=km.indexOf("./")||-1!=km.indexOf("/.")){for(var lm=0==km.lastIndexOf("/",0),km=km.split("/"),mm=[],nm=0;nm<km.length;){var om=km[nm++];"."==om?lm&&nm==km.length&&mm.push(""):".."==om?((1<mm.length||1==mm.length&&""!=mm[0])&&mm.pop(),lm&&nm==km.length&&mm.push("")):(mm.push(om),lm=true);}km=mm.join("/");}}jm?im.R=km:jm=""!==hm.a.toString();jm?df(im,hm.a.clone()):jm=!!hm.$;jm&&(im.$=hm.$);return im;};j.clone=function(){return new af(this);};function bf(hm,im,jm){hm.W=jm?ef(im,true):im;hm.W&&(hm.W=hm.W.replace(/:$/,""));}function cf(hm,im){if(im){im=Number(im);if(isNaN(im)||0>im)throw Error("Bad port number "+im);hm.ha=im;}else hm.ha=null;}function df(hm,im,jm){im instanceof nf?hm.a=im:(jm||(im=ff(im,lf)),hm.a=new nf(im));}function ef(hm,im){return hm?im?decodeURI(hm):decodeURIComponent(hm):"";}function ff(hm,im,jm){return "string"==typeof hm?(hm=encodeURI(hm).replace(im,gf),jm&&(hm=hm.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),hm):null;}function gf(hm){hm=hm.charCodeAt(0);return "%"+(hm>>4&15).toString(16)+(hm&15).toString(16);}var hf=/[#\/\?@]/g,jf=/[\#\?:]/g,kf=/[\#\?]/g,lf=/[\#\?@]/g,mf=/#/g;function nf(hm){this.b=hm||null;}nf.prototype.a=null;nf.prototype.c=null;function of(hm,im,jm){if(!hm.a&&(hm.a={},hm.c=0,hm.b))for(var km=hm.b.split("&"),lm=0;lm<km.length;lm++){var mm=km[lm].indexOf("="),nm=null,om=null;0<=mm?(nm=km[lm].substring(0,mm),om=km[lm].substring(mm+1)):nm=km[lm];nm=decodeURIComponent(nm.replace(/\+/g," "));om=om||"";of(hm,nm,decodeURIComponent(om.replace(/\+/g," ")));}hm.b=null;(km=hm.a.hasOwnProperty(im)&&hm.a[im])||(hm.a[im]=km=[]);km.push(jm);hm.c++;}nf.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return "";var hm=[],im;for(im in this.a)for(var jm=encodeURIComponent(im),km=this.a[im],lm=0;lm<km.length;lm++){var mm=jm;""!==km[lm]&&(mm+="="+encodeURIComponent(km[lm]));hm.push(mm);}return this.b=hm.join("&");};nf.prototype.clone=function(){var hm=new nf();hm.b=this.b;if(this.a){var im={},jm;for(jm in this.a)im[jm]=this.a[jm].concat();hm.a=im;hm.c=this.c;}return hm;};function pf(hm,im,jm){hm=(new DOMParser()).parseFromString(hm,"text/xml");if(!hm)return null;im=im||[new af("")];jm=jm||[new af("")];return ng({ob:im,u:jm},hm,qf);}l("shaka.dash.mpd.parseMpd",pf);function qf(){this.id=this.url=null;this.type="static";this.b=this.j=this.u=this.ob=null;this.h=5;this.f=this.c=this.g=null;this.i=1;this.a=[];}function rf(){this.g=this.f=this.c=this.u=this.a=this.start=this.id=null;this.b=[];}function sf(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=false;this.h=this.g=this.f=this.u=null;this.j=[];this.a=[];}function tf(){this.value=null;}function uf(){this.contentType=this.lang=this.id=null;}function vf(){this.a=this.b=this.g=this.u=this.fbQualityClass=this.fbQualityLabel=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[];}function wf(){this.b=this.a=this.c=this.f=null;}function xf(){this.parsedPssh=this.psshBox=null;}function yf(){this.url=null;}function zf(){this.url=null;}function ag(){this.u=null;this.h=1;this.c=this.b=this.f=this.a=this.g=null;}ag.prototype.clone=function(){var hm=new ag();hm.u=rg(this.u);hm.h=this.h;hm.g=this.g;hm.a=sg(this.a);hm.f=sg(this.f);hm.b=sg(this.b);hm.c=sg(this.c);return hm;};function bg(){this.a=this.url=null;}bg.prototype.clone=function(){var hm=new bg();hm.url=rg(this.url);hm.a=sg(this.a);return hm;};function cg(){this.a=this.url=null;}cg.prototype.clone=function(){var hm=new cg();hm.url=rg(this.url);hm.a=sg(this.a);return hm;};function dg(){this.u=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null;}dg.prototype.clone=function(){var hm=new dg();hm.u=rg(this.u);hm.a=this.a;hm.g=this.g;hm.c=this.c;hm.i=this.i;hm.h=sg(this.h);hm.b=rg(this.b)||[];hm.f=sg(this.f);return hm;};function eg(){this.a=this.b=null;}eg.prototype.clone=function(){var hm=new eg();hm.b=rg(this.b);hm.a=sg(this.a);return hm;};function fg(){this.a=1;this.b=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null;}fg.prototype.clone=function(){var hm=new fg();hm.a=this.a;hm.i=this.i;hm.b=this.b;hm.j=this.j;hm.h=this.h;hm.f=this.f;hm.g=this.g;hm.c=sg(this.c);return hm;};function gg(){this.a=[];}gg.prototype.clone=function(){var hm=new gg();hm.a=rg(this.a)||[];return hm;};function hg(){this.b=this.a=this.startTime=null;}hg.prototype.clone=function(){var hm=new hg();hm.startTime=this.startTime;hm.a=this.a;hm.b=this.b;return hm;};function ig(hm,im){this.ga=hm;this.end=im;}ig.prototype.clone=function(){return new ig(this.ga,this.end);};qf.TAG_NAME="MPD";rf.TAG_NAME="Period";sf.TAG_NAME="AdaptationSet";tf.TAG_NAME="Role";uf.TAG_NAME="ContentComponent";vf.TAG_NAME="Representation";wf.TAG_NAME="ContentProtection";xf.TAG_NAME="cenc:pssh";yf.TAG_NAME="BaseURL";zf.TAG_NAME="Location";ag.TAG_NAME="SegmentBase";bg.TAG_NAME="RepresentationIndex";cg.TAG_NAME="Initialization";dg.TAG_NAME="SegmentList";eg.TAG_NAME="SegmentURL";fg.TAG_NAME="SegmentTemplate";gg.TAG_NAME="SegmentTimeline";hg.TAG_NAME="S";qf.prototype.parse=function(hm,im){this.url=hm.ob;this.id=tg(im,"id",ah);this.type=tg(im,"type",ah)||"static";this.b=tg(im,"mediaPresentationDuration",vg);this.h=tg(im,"minBufferTime",vg,this.h);this.g=tg(im,"minimumUpdatePeriod",vg,this.g);this.c=tg(im,"availabilityStartTime",ug,this.c);this.f=tg(im,"timeShiftBufferDepth",vg,this.f);this.f=null;this.i=tg(im,"suggestedPresentationDelay",vg,this.i);var jm=hm.u,km=pg(this,im,yf);this.u=kg(jm,km);if(km=ng(this,im,zf))this.j=lg(jm,km.url);this.a=pg(this,im,rf);};rf.prototype.parse=function(hm,im){this.id=tg(im,"id",ah);this.start=tg(im,"start",vg);this.a=tg(im,"duration",vg);var jm=pg(this,im,yf);this.u=kg(hm.u,jm);this.c=ng(this,im,ag);this.f=ng(this,im,dg);this.g=ng(this,im,fg);this.b=pg(this,im,sf);jg(this);};function jg(hm){for(var im=[],jm=0;jm<hm.b.length;++jm){var km=hm.b[jm];null!=km.group&&(im[km.group]=true);}for(jm=0;jm<hm.b.length;++jm)if(km=hm.b[jm],null==km.group){for(var lm=1;1==im[lm];)++lm;im[lm]=true;km.group=lm;}}sf.prototype.parse=function(hm,im){var jm=ng(this,im,uf)||{},km=ng(this,im,tf);this.id=tg(im,"id",ah);this.group=tg(im,"group",zg);this.lang=tg(im,"lang",ah,jm.lang);this.contentType=tg(im,"contentType",ah,jm.contentType);this.width=tg(im,"width",yg);this.height=tg(im,"height",yg);this.b=tg(im,"mimeType",ah);this.i=tg(im,"codecs",ah);this.c=km&&"main"==km.value;this.lang&&(this.lang=cc(this.lang));jm=pg(this,im,yf);this.u=kg(hm.u,jm);this.j=pg(this,im,wf);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=hm.c?mg(this,im,hm.c):ng(this,im,ag);this.g=hm.f?mg(this,im,hm.f):ng(this,im,dg);this.h=hm.g?mg(this,im,hm.g):ng(this,im,fg);this.a=pg(this,im,vf);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]));};tf.prototype.parse=function(hm,im){this.value=tg(im,"value",ah);};uf.prototype.parse=function(hm,im){this.id=tg(im,"id",ah);this.lang=tg(im,"lang",ah);this.contentType=tg(im,"contentType",ah);this.lang&&(this.lang=cc(this.lang));};vf.prototype.parse=function(hm,im){this.id=tg(im,"id",ah);this.bandwidth=tg(im,"bandwidth",yg);this.width=tg(im,"width",yg,hm.width);this.height=tg(im,"height",yg,hm.height);this.f=tg(im,"mimeType",ah,hm.b);this.h=tg(im,"codecs",ah,hm.i);this.fbQualityLabel=tg(im,"FBQualityLabel",ah);this.fbQualityClass=tg(im,"FBQualityClass",ah);this.lang=hm.lang;var jm=pg(this,im,yf);this.u=kg(hm.u,jm);this.c=pg(this,im,wf);this.g=hm.f?mg(this,im,hm.f):ng(this,im,ag);this.b=hm.g?mg(this,im,hm.g):ng(this,im,dg);this.a=hm.h?mg(this,im,hm.h):ng(this,im,fg);this.c=this.c.concat(hm.j);};wf.prototype.parse=function(hm,im){this.f=im;this.c=tg(im,"schemeIdUri",ah);var jm=tg(im,"cenc:default_KID",ah);jm&&(this.b=jm.replace(/[-]/g,""));this.a=ng(this,im,xf);};xf.prototype.parse=function(hm,im){var jm=qg(im);if(jm){this.psshBox=td(jm);try{this.parsedPssh=new me(this.psshBox);}catch(km){if(!(km instanceof RangeError))throw km;}}};yf.prototype.parse=function(hm,im){this.url=qg(im);};zf.prototype.parse=function(hm,im){this.url=qg(im);};ag.prototype.parse=function(hm,im){this.u=hm.u||this.u;this.h=tg(im,"timescale",yg,this.h);this.g=tg(im,"presentationTimeOffset",zg,this.g);this.a=tg(im,"indexRange",wg,this.a);this.f=tg(im,"FBFirstSegmentRange",wg,this.f);this.b=ng(this,im,bg)||this.b;this.c=ng(this,im,cg)||this.c;};bg.prototype.parse=function(hm,im){var jm=tg(im,"sourceURL",ah);this.url=lg(hm.u,jm);this.a=tg(im,"range",wg,sg(hm.a));};cg.prototype.parse=function(hm,im){var jm=tg(im,"sourceURL",ah);this.url=lg(hm.u,jm);this.a=tg(im,"range",wg);};dg.prototype.parse=function(hm,im){this.u=hm.u||this.u;this.a=tg(im,"timescale",yg,this.a);this.g=tg(im,"presentationTimeOffset",zg,this.g);this.c=tg(im,"duration",yg,this.c);var jm=tg(im,"startNumber",yg);null!=jm&&(this.i=jm);this.h=ng(this,im,cg)||this.h;this.b=(jm=pg(this,im,eg))&&0<jm.length?jm:this.b;this.f=ng(this,im,gg)||this.f;};eg.prototype.parse=function(hm,im){var jm=tg(im,"media",ah);this.b=lg(hm.u,jm);this.a=tg(im,"mediaRange",wg);};fg.prototype.parse=function(hm,im){this.a=tg(im,"timescale",yg,this.a);this.i=tg(im,"presentationTimeOffset",zg,this.i);this.b=tg(im,"duration",yg,this.b);var jm=tg(im,"startNumber",zg);null!=jm&&(this.j=jm);this.h=tg(im,"media",ah,this.h);this.f=tg(im,"index",ah,this.f);this.g=tg(im,"initialization",ah,this.g);this.c=ng(this,im,gg)||this.c;};gg.prototype.parse=function(hm,im){this.a=pg(this,im,hg);};hg.prototype.parse=function(hm,im){this.startTime=tg(im,"t",zg);this.a=tg(im,"d",zg);this.b=tg(im,"r",xg);};function kg(hm,im){if(!im||0===im.length)return hm;for(var jm=[],km=0;km<im.length;km++){var lm=im[km].url;null==hm||0===hm.length?jm.push(new af(lm)):(lm=lg(hm.slice(0,1),lm),jm.push(lm[0]));}return jm;}function lg(hm,im){if(!im)return hm;var jm=new af(im);return hm?hm.map(function(km){return km.resolve(jm);}):[jm];}function mg(hm,im,jm){var km=sg(jm);(im=og(im,jm.constructor.TAG_NAME))&&km.parse(hm,im);return km;}function ng(hm,im,jm){var km=null;if(im=og(im,jm.TAG_NAME))km=new jm(),km.parse(hm,im);return km;}function og(hm,im){for(var jm=null,km=0;km<hm.childNodes.length;km++)if(hm.childNodes[km].tagName==im){if(jm)return null;jm=hm.childNodes[km];}return jm;}function pg(hm,im,jm){for(var km=[],lm=0;lm<im.childNodes.length;lm++)if(im.childNodes[lm].tagName==jm.TAG_NAME){var mm=new jm();mm.parse.call(mm,hm,im.childNodes[lm]);km.push(mm);}return km;}function qg(hm){hm=hm.firstChild;return hm.nodeType!=Node.TEXT_NODE?null:hm.nodeValue;}function rg(hm){return hm?hm.map(function(im){return im.clone();}):null;}function sg(hm){return hm?hm.clone():null;}function tg(hm,im,jm,km){hm=jm(hm.getAttribute(im));return null!=hm?hm:void 0!==km?km:null;}function ug(hm){if(!hm)return null;hm=Date.parse(hm);return isNaN(hm)?null:Math.floor(hm/1000);}function vg(hm){if(!hm)return null;var im=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(hm);if(!im)return null;hm=0;var jm=zg(im[1]);jm&&(hm+=31536000*jm);(jm=zg(im[2]))&&(hm+=2592000*jm);(jm=zg(im[3]))&&(hm+=86400*jm);(jm=zg(im[4]))&&(hm+=3600*jm);(jm=zg(im[5]))&&(hm+=60*jm);im=i.parseFloat(im[6]);(im=isNaN(im)?null:im)&&(hm+=im);return hm;}function wg(hm){var im=/([0-9]+)-([0-9]+)/.exec(hm);if(!im)return null;hm=zg(im[1]);if(null==hm)return null;im=zg(im[2]);return null==im?null:new ig(hm,im);}function xg(hm){hm=i.parseInt(hm,10);return isNaN(hm)?null:hm;}function yg(hm){hm=i.parseInt(hm,10);return 0<hm?hm:null;}function zg(hm){hm=i.parseInt(hm,10);return 0<=hm?hm:null;}function ah(hm){return hm;}function bh(hm,im){this.url=hm;this.b=im||new ch();this.g=this.j=this.h=0;this.a=null;this.c=new xc();this.f=null;}l("shaka.util.AjaxRequest",bh);function ch(){this.body=null;this.a=1;this.i=1000;this.c=0;this.method="GET";this.g="arraybuffer";this.b={};this.h=this.l=false;this.f=this.m=null;this.j=false;}var dh=true;function eh(hm){fh(hm);hm.b.body=null;hm.c.destroy();hm.c=null;hm.f=null;}function fh(hm){hm.a&&(hm.a.onload=null,hm.a.onreadystatechange=null,hm.a.onerror=null,hm.a.ontimeout=null);hm.a=null;}var gh=/(.*)\.(xx|fna)\.fbcdn\.net/,hh=/livestream-lookaside\.facebook\.com$/;bh.prototype.i=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var hm=this.url.split(":")[1].split(";").pop().split(","),im=hm.pop(),im="base64"==hm.pop()?i.atob(im.replace(/-/g,"+").replace(/_/g,"/")):i.decodeURIComponent(im);"arraybuffer"==this.b.g&&(im=sd(im).buffer);hm=JSON.parse(JSON.stringify(new XMLHttpRequest()));hm.response=im;hm.responseText=im.toString();im=this.c;im.resolve(hm);eh(this);return im;}if(0==this.url.lastIndexOf("idb:",0))return this.A();this.h++;this.j=Date.now();this.g||(this.g=this.b.i);this.a=new XMLHttpRequest();var jm=this.url,hm=new af(jm);dh&&(this.f&&!this.f.supportsCaching()||this.b.h)&&of(hm.a,"_",Date.now());jm=gh.test(jm);if(null!=this.b.f&&jm){var km=this.b.f,lm=hm.a;of(lm,"_nc_p_n",km.f);null!=km.c?of(lm,"_nc_p_ts",km.c):null!=km.b&&of(lm,"_nc_p_o",km.b);null!=km.a&&of(lm,"_nc_p_rid",km.a);}1==this.b.j&&jm&&of(hm.a,"_nc_playing",1);jm=hm.toString();hm=hh.test(hm.M);this.a.open(this.b.method,jm,true);this.a.responseType=this.b.g;this.a.timeout=this.b.c;this.a.withCredentials=this.b.l||hm;this.a.onload=this.l.bind(this);this.a.onreadystatechange=this.m.bind(this);this.a.onerror=this.v.bind(this);this.a.ontimeout=this.s.bind(this);for(im in this.b.b)this.a.setRequestHeader(im,this.b.b[im]);this.a.send(this.b.body);return this.c;};bh.prototype.send=bh.prototype.i;function ih(hm,im,jm){im=Error(im);im.type=jm;im.status=hm.a.status;im.url=hm.url;im.method=hm.b.method;im.body=hm.b.body;im.$b=hm.a;return im;}bh.prototype.l=function(hm){this.f&&this.f.sample(Date.now()-this.j,hm.loaded);hm=[403];200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),eh(this)):this.h<this.b.a&&-1===hm.indexOf(this.a.status)?jh(this):(hm=ih(this,"HTTP error.","net"),this.c.reject(hm),eh(this));};bh.prototype.m=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.ia=Date.now()-this.j,this.b.h)){var hm=Date.parse(this.a.getResponseHeader("Date"));hm&&(fb=hm-Date.now());}};bh.prototype.v=function(){var hm=ih(this,"Network failure.","net");this.c.reject(hm);eh(this);};bh.prototype.s=function(){if(this.h<this.b.a){jh(this);}else{var hm=ih(this,"Request timed out.","net");this.c.reject(hm);eh(this);}};function jh(hm){fh(hm);i.setTimeout(hm.i.bind(hm),hm.g*(1+.5*(2*Math.random()-1)));hm.g*=2;}function kh(hm,im,jm,km){this.b=im;this.h=jm||0;this.g=null!=km?km:null;this.c=this.a=null;this.j=hm;this.i=null;}var lh;l("shaka.util.FailoverUri",kh);function mh(hm,im){return hm&&0!==hm.length?hm.map(function(jm){return jm.resolve(im);}):[im];}kh.setPrefetchCacheValueGetter=function(hm){lh=hm;};function nh(hm,im,jm){if(hm.a)return hm.a;hm.a=oh(hm,0,im||new ch(),jm);return hm.a;}kh.prototype.f=function(){if(this.c){this.a=null;var hm=this.c;if(hm.a&&hm.a.readyState!=XMLHttpRequest.DONE){hm.a.abort();var im=ih(hm,"Request aborted.","aborted");hm.c.reject(im);eh(hm);}this.i=this.c=null;}};function oh(hm,im,jm,km){var lm=hm.b[im].toString();if(hm.h||hm.g){var mm=hm.b[im].M;!mm.endsWith("fbcdn.net")||mm.startsWith("interncache")||mm.endsWith("ak.fbcdn.net")?jm.b.Range="bytes="+(hm.h+"-"+(null!=hm.g?hm.g:"")):lm+="&bytestart="+hm.h+"&byteend="+hm.g;}hm.j&&(lm=hm.j(lm,jm.b)||lm);mm=null;lh&&(mm=lh(lm));mm||(hm.c=new bh(lm,jm),km&&(hm.c.f=km),mm=hm.c.i());lm=mm.then(dd(hm,function(nm){this.i=this.c=this.a=null;this.i=nm.a?new af(nm.a):this.b[im];nm.response.ia=nm.ia;return Promise.resolve(nm.response);}));return lm=lm.catch(dd(hm,function(nm){if(this.a&&im+1<this.b.length)return this.a=oh(this,im+1,jm,km);this.a=this.c=null;return Promise.reject(nm);}));}kh.prototype.clone=function(){return new kh(this.j,this.b.map(function(hm){return hm.clone();}),this.h,this.g);};kh.prototype.toString=function(){return this.b[0].toString();};function ph(hm,im,jm){this.a=new ch();this.a.g="text";this.a.a=3;this.a.c=1000*(null!=im?im:0);jm&&(this.a.f=jm);this.a.h=true;this.b=hm;}function qh(hm){var im=hm.b;return nh(im,hm.a).then(function(jm){jm instanceof ArrayBuffer&&(jm=String.fromCharCode.apply(null,new Uint8Array(jm)));if(jm=pf(jm,im.b,[im.i]))return Promise.resolve(jm);jm=Error("MPD parse failure.");jm.type="dash";return Promise.reject(jm);});}function rh(hm){this.f=hm;this.a=this.b=this.c=null;}function sh(hm,im,jm,km){for(var lm=im.a,mm=[],nm=0;nm<km;++nm){var om=nm+jm,pm=(om-1)*lm.b,qm=pm/lm.a,rm=(pm+lm.b)/lm.a,om=th(hm,im,lm.j+om-1,pm);if(!om)return null;mm.push(new xh(qm,rm,om,pm));}return mm;}function th(hm,im,jm,km){if(!im.a)return null;var lm=im.a.h;if(!lm)return im.u?new kh(hm,im.u,0,null):null;jm=uh(lm,im.id,jm,im.bandwidth,km);if(!jm)return null;im=mh(im.u,jm);return new kh(hm,im,0,null);}function uh(hm,im,jm,km,lm){var mm={RepresentationID:im,Number:jm,Bandwidth:km,Time:lm};hm=hm.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(om,pm,qm){if("$$"==om)return "$";var rm=mm[pm];if(null==rm)return om;"RepresentationID"==pm&&qm&&(qm=void 0);om=rm.toString();qm=i.parseInt(qm,10)||1;qm=Math.max(0,qm-om.length);return Array(qm+1).join("0")+om;});try{return new af(hm);}catch(nm){if(nm instanceof URIError)return null;throw nm;}}function vh(hm,im,jm){var km=0;im*=jm;hm=hm.a;jm=[];for(var lm=0;lm<hm.length&&hm[lm].a;++lm){var mm=hm[lm].startTime,mm=null!=mm?mm:km,nm=hm[lm].b||0;0>nm&&(nm=hm[lm].a,nm=lm+1===hm.length?Math.ceil((hm[0].startTime+im-mm)/nm)-1:Math.ceil((hm[lm+1].startTime-mm)/nm)-1);0<jm.length&&mm!=km&&(jm[jm.length-1].end=mm);for(var om=0;om<=nm;++om)km=mm+hm[lm].a,jm.push({start:mm,end:km}),mm=km;}return jm;}function wh(hm,im){this.a=hm;this.b=im||null;}wh.prototype.destroy=function(){this.a&&(this.a.f(),this.a=null);this.b=null;};wh.prototype.create=function(){return this.a?nh(this.a):Promise.resolve(this.b);};function xh(hm,im,jm,km){this.startTime=hm;this.endTime=im;this.url=jm;this.a=null!=km?km:null;}function yh(hm,im,jm){return new xh(im,jm,hm.url,null!=hm.a?hm.a:void 0);}function zh(hm,im){for(var jm=hm.length-1;0<=jm;--jm){var km=hm[jm];if(im>=km.startTime&&(null==km.endTime||im<km.endTime))return jm;}return -1;}function ai(hm,im){return hm.map(function(jm){return yh(jm,jm.startTime+im,null!=jm.endTime?jm.endTime+im:null);});}function bi(){}bi.prototype.parse=function(hm,im,jm,km,lm){var mm=null;try{hm:{var om=[],pm=new gb(hm),qm=kb(pm);if(1936286840!=kb(pm)){mm=null;}else{1==qm&&(qm=lb(pm));var rm=jb(pm);nb(pm,3);nb(pm,4);var sm=kb(pm);if(0==sm){mm=null;}else{var tm,um;0==rm?(tm=kb(pm),um=kb(pm)):(tm=lb(pm),um=lb(pm));nb(pm,2);var vm=pm.b.getUint16(pm.a,pm.c);pm.a+=2;hm=tm;im=im+qm+um;for(um=qm=0;um<vm;um++){var wm=kb(pm);tm=(wm&2147483648)>>>31;var rm=wm&2147483647,xm=kb(pm);kb(pm);if(1==tm){mm=null;break hm;}var ym;ym=0==um&&lm?lm:new kh(km,jm,im,im+rm-1);tm=hm/sm;var zm=(hm+xm)/sm;0===um&&(qm=tm);om.push(new xh(tm-qm,zm-qm,ym));hm+=xm;im+=rm;}mm=om;}}};}catch(nm){if(!(nm instanceof RangeError))throw nm;}return mm;};function ci(hm){this.a=hm;this.X=0;this.g=[];this.Pa=false;}ci.prototype.ib=function(){return !!this.g[this.g.length-1];};ci.prototype.lastPollHadChanges=ci.prototype.ib;ci.prototype.F=function(){var hm=this.g,im=hm.lastIndexOf(true);if(1>im)return 0;hm=hm.lastIndexOf(true,im-1);return 0>hm?0:im-hm-1;};ci.prototype.getFetchesBetweenRecentChanges=ci.prototype.F;ci.prototype.D=function(){return Math.floor((this.g.length-1-this.g.lastIndexOf(true))/2);};ci.prototype.getConsecutiveUpdatesWithoutChanges=ci.prototype.D;ci.prototype.B=function(){return this.g.length-1-this.g.lastIndexOf(false);};ci.prototype.getConsecutiveUpdatesWithChanges=ci.prototype.B;ci.prototype.destroy=function(){this.a=null;};ci.prototype.length=function(){return this.a.length;};ci.prototype.G=function(){return (this.a||[]).slice();};ci.prototype.getSegments=ci.prototype.G;function di(hm){if(0==hm.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return hm.a[0];}ci.prototype.w=function(){if(0==this.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return this.a[this.a.length-1];};ci.prototype.last=ci.prototype.w;j=ci.prototype;j.get=function(hm){if(0>hm||hm>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[hm];};j.la=function(hm){hm=zh(this.a,hm);return 0<=hm?this.a[hm]:null;};j.Ja=function(hm){ei(this,hm);return true;};function ei(hm,im){hm.X!=im.X&&(im=new ci(ai(im.a,hm.X-im.X)));if(0==hm.length()){hm.a=im.a.slice(0);}else if(0!=im.length()&&null!=hm.w().endTime)if(null!=im.w().endTime&&im.w().endTime<hm.w().endTime){hm.Pa=true;}else{hm.Pa=false;if(hm.w().endTime<=di(im).startTime){var jm=yh(hm.w(),hm.w().startTime,di(im).startTime),jm=hm.a.slice(0,-1).concat([jm]);}else{var km;for(km=0;km<hm.a.length&&!(hm.a[km].endTime>=di(im).startTime);++km);hm.a[km].startTime<di(im).startTime?(jm=yh(hm.a[km],hm.a[km].startTime,di(im).startTime),jm=hm.a.slice(0,km).concat([jm])):(di(hm).startTime>di(im).startTime||di(im),jm=hm.a.slice(0,km));}hm.a=jm.concat(im.a);}}j.ka=function(hm){var im=hm-this.X;if(0==im)return 0;this.a=ai(this.a,im);this.X=hm;return im;};j.Fa=function(){return 0<this.length()?{start:di(this).startTime,end:this.w().endTime}:{start:0,end:0};};function fi(hm,im,jm,km){ci.call(this,hm);this.i=im;this.A=jm;this.h=km;this.j=this.i.b||this.i.a.reduce(function(lm,mm){return null==mm.a?NaN:lm+mm.a;},0)||0;this.b=this.s=this.f=null;gi(this);}m(fi,ci);fi.prototype.destroy=function(){this.A=this.i=null;ci.prototype.destroy.call(this);};fi.prototype.la=function(hm){ii(this,eb()/1000);return ci.prototype.la.call(this,hm);};fi.prototype.Ja=function(hm){if(!(hm instanceof fi))return false;ei(this,hm);this.j=Math.max(this.j,hm.j);null==this.f?(this.h=hm.h,gi(this)):ji(this);return true;};function gi(hm){ji(hm);if(0!=hm.length()){hm.length();var im=null!=hm.w().endTime?hm.w().endTime:hm.w().startTime;if(hm.i.c>hm.h){hm.f=im;}else{var jm=hm.h-(hm.i.c+hm.A.start);0>jm?hm.f=im:jm<Math.max(hm.w().startTime,hm.w().endTime||0)?(hm.w(),hm.f=im):hm.f=jm;}hm.s=hm.w().startTime;hm.b=di(hm).startTime;}}fi.prototype.ka=function(hm){hm=ci.prototype.ka.call(this,hm);Math.min.apply(null,this.a.filter(function(im){return null!=im.endTime;}).map(function(im){return im.endTime-im.startTime;}));null!=this.f&&(this.s+=hm,this.b+=hm,this.f+=hm);return hm;};fi.prototype.Fa=function(){return hi(this,eb()/1000);};function hi(hm,im){ii(hm,im);if(null==hm.f||null==hm.s||null==hm.b)return {start:0,end:0};var jm=Number.POSITIVE_INFINITY;hm.j&&(jm=hm.j);var km=im-hm.h,lm=hm.f+km;null!=hm.i.f&&(lm=lm-hm.b-hm.i.f,0<lm&&(hm.b+=lm));hm.b=Math.min(hm.b,jm);km=hm.s+km;if(km<hm.b)return {start:hm.b,end:hm.b};km=0<hm.length()?null!=hm.w().endTime?Math.min(km,hm.w().endTime):km:hm.b;km=Math.max(km,hm.b);km=Math.min(km,jm);return {start:hm.b,end:km};}function ii(hm,im){ji(hm);if(null!=hm.i.f)if(null==hm.f){hm.length();}else{for(var jm=hm.f+(im-hm.h),km=0,lm=0;lm<hm.a.length;++lm){var mm=null;lm<hm.a.length-1?mm=hm.a[lm+1].endTime:(mm=hm.a[lm],mm=null!=mm.endTime?mm.endTime+(mm.endTime-mm.startTime):null);if(null!=mm&&mm<jm-hm.i.f){++km;}else break;}0<km&&hm.a.splice(0,km);}}function ji(hm){if(hm.j){for(var im=0,jm=hm.a.length-1;0<=jm;--jm)if(hm.a[jm].startTime>hm.j){++im;}else break;0<im&&hm.a.splice(-im);}}function ki(hm,im,jm,km,lm){var mm=1,nm=0,om;if(hm.c>km){om=null;}else{var pm=hm.i||0,qm=hm.f||0;om=jm.a;om=om.b/om.a;var rm=km-(hm.c+im.start);0>rm?om=null:(qm=rm-2*om-qm,0>qm&&(qm=0),qm=Math.ceil(qm/om)*om,rm-=om,0>rm?om=null:(pm=Math.floor(rm/om)*om-pm,0>pm&&(pm=0),pm=Math.floor(pm/om)*om,om={Za:qm/om+1,current:(pm>=qm?pm:qm)/om+1}));}om&&(mm=om.Za,nm=om.current-om.Za+1);mm=sh(lm,jm,mm,nm);if(null==mm)throw hm=Error("Failed to generate SegmentReferences."),hm.type="stream",hm;fi.call(this,mm,hm,im,km);this.v=jm;this.m=this.c=0<this.length()?hm.c+im.start+this.w().endTime:null;this.l=om?om.current+1:null;this.S=lm;}m(ki,fi);ki.prototype.destroy=function(){this.S=this.v=null;fi.prototype.destroy.call(this);};ki.prototype.la=function(hm){var im=eb()/1000;li(this,im);ii(this,im);return ci.prototype.la.call(this,hm);};ki.prototype.Ja=function(hm){if(null!=this.c||!(hm instanceof ki)||null==hm.c)return false;this.c=hm.c;this.m=hm.m;this.l=hm.l;this.h=hm.h;this.j=hm.j;ei(this,hm);li(this,eb()/1000);gi(this);return true;};ki.prototype.ka=function(hm){hm=fi.prototype.ka.call(this,hm);null!=this.c&&(this.c+=hm,this.m+=hm);return hm;};ki.prototype.Fa=function(){var hm=eb()/1000;li(this,hm);return hi(this,hm);};function li(hm,im){if(null!=hm.c&&null!=hm.m&&null!=hm.l){var jm=hm.v.a,jm=jm.b/jm.a,km=Math.floor((hm.m+(im-hm.h)-hm.c)/jm);if(0!=km){var lm=sh(hm.S,hm.v,hm.l,km);Array.prototype.push.apply(hm.a,ai(lm,hm.X));hm.c+=km*jm;hm.l+=km;}}}function mi(hm,im,jm,km,lm){this.f=hm;this.b=im;this.c=jm;this.h=km;this.a=null;this.g=lm;}mi.prototype.destroy=function(){this.g=this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null);};mi.prototype.create=function(){if(this.a)return Promise.resolve(this.a);if("dynamic"==this.f.type){try{this.a=new ki(this.f,this.b,this.c,this.h,this.g);}catch(hm){return Promise.reject(hm);}}else{var im;im=this.c.a;if(im=sh(this.g,this.c,1,Math.ceil(this.b.a/(im.b/im.a)))){if(0<im.length){var jm=im[im.length-1];im[im.length-1]=yh(jm,jm.startTime,this.b.a);}im=new ci(im);}else im=null;this.a=im;if(!this.a)return im=Error("Failed to generate SegmentReferences"),im.type="stream",Promise.reject(im);}return Promise.resolve(this.a);};function ni(hm,im,jm,km,lm){this.c=hm;this.b=im;this.g=jm;this.a=null;this.h=km;this.f=lm;}ni.prototype.destroy=function(){this.f=this.g=this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null);};ni.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var hm=this.g.b,im=[];hm.f&&(im=vh(hm.f,hm.a||1,this.b.a||0));var jm=0;hm.c&&hm.i?jm=(hm.i-1)*hm.c:0<im.length&&(jm=im[0].start-(hm.g||0));var km=jm,lm=hm.b.length;0<im.length&&im.length!=hm.b.length&&(lm=Math.min(im.length,hm.b.length));for(var mm=[],nm=0;nm<lm;++nm){var om=hm.b[nm],pm=jm/hm.a,qm=null,rm=null;hm.c?(qm=jm+hm.c,rm=qm/hm.a):0<im.length?(qm=im[nm].end-(hm.g||0),rm=qm/hm.a):(rm=pm+this.b.a,qm=rm*hm.a);var jm=qm,qm=0,sm=null;om.a&&(qm=om.a.ga,sm=om.a.end);rm=Math.min(this.b.a+km/hm.a,rm);mm.push(new xh(pm,rm,new kh(this.f,om.b,qm,sm)));}"dynamic"==this.c.type?this.a=new fi(mm,this.c,this.b,this.h):this.a=new ci(mm);return Promise.resolve(this.a);};function oi(hm,im,jm,km,lm){this.b=hm;this.c=im;this.f=jm;this.h=km;this.a=null;this.g=lm;}oi.prototype.destroy=function(){this.g=this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);};oi.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var hm=this.f.a,im=vh(hm.c,hm.a||1,this.c.a||0),jm=[],km=0;km<im.length;++km){var lm=im[km].start,mm=lm/hm.a,nm=im[km].end/hm.a,om=th(this.g,this.f,km+hm.j,lm);if(!om)return hm=Error("Failed to generate media URL."),hm.type="dash",Promise.reject(hm);var pm=(hm.i||0)/hm.a;jm.push(new xh(mm-pm,nm-pm,om,lm));}"dynamic"==this.b.type?this.a=new fi(jm,this.b,this.c,this.h):this.a=new ci(jm);return Promise.resolve(this.a);};function pi(){this.C=qi++;this.id=this.L=this.J=null;this.b=0;this.height=this.width=this.bandwidth=null;this.c=this.a="";this.switchReason=this.fbQualityClass=this.fbQualityLabel=null;this.f=[];this.P=false;this.I=true;}var qi=0;pi.prototype.destroy=function(){this.J&&(this.J.destroy(),this.J=null);this.L&&(this.L.destroy(),this.L=null);};function ri(hm){var im=hm.a||"";hm.c&&(im+='; codecs="'+hm.c+'"');return im;}function si(){this.C=ti++;this.id=null;this.contentType=this.lang="";this.b=false;this.o=[];this.a=[];}var ti=0;si.prototype.destroy=function(){for(var hm=0;hm<this.o.length;++hm)this.o[hm].destroy();this.a=this.o=null;};function ui(hm){for(var im=[],jm=0;jm<hm.a.length;++jm){var km=new xi();km.id=hm.C;km.a=hm.a[jm];km.contentType=hm.contentType;km.b=hm.o.length?ri(hm.o[0]):"";im.push(km);}return im;}function vi(){this.id=null;this.start=0;this.b=null;this.a=[];}vi.prototype.destroy=function(){for(var hm=0;hm<this.a.length;++hm)this.a[hm].destroy();this.a=null;};function wi(){this.b=false;this.h=this.g=this.f=null;this.c=0;this.a=[];this.i=false;}wi.prototype.destroy=function(){for(var hm=0;hm<this.a.length;++hm)this.a[hm].destroy();this.a=null;};function xi(){this.id=0;this.a=null;this.b=this.contentType="";}function yi(hm,im,jm,km,lm,mm){sc.call(this,hm);this.b=im;this.a=new ed(jm,km,lm,this);this.T=0;this.B=this.G=this.c=null;this.H=false;this.g=this.v=null;this.A=this.m=false;this.j=null;this.i=false;this.h=new xc();this.l=this.f=false;this.s=0;this.N=15;this.V=this.K=false;this.U=mm;this.D=this.O=false;}m(yi,sc);yi.prototype.F=function(hm){null!=hm.initialStreamBufferSize&&(this.s=Number(hm.initialStreamBufferSize));null!=hm.streamBufferSize&&(this.N=Number(hm.streamBufferSize));null!=hm.addCdnDebugQueryParameters&&(this.K=Boolean(hm.addCdnDebugQueryParameters));null!=hm.useInitialBufferSizeWhenPaused&&(this.V=Boolean(hm.useInitialBufferSizeWhenPaused));null!=hm.segmentRequestTimeout&&(this.a.m=Number(hm.segmentRequestTimeout));null!=hm.resolveVideoTimeUpdateOnFragmentedTimeRanges&&(this.O=Boolean(hm.resolveVideoTimeUpdateOnFragmentedTimeRanges));};yi.prototype.destroy=function(){gj(this);this.h.destroy();this.c=this.h=null;this.a.destroy();this.S=this.b=this.a=null;};j=yi.prototype;j.sa=function(){return this.c;};j.Ga=function(){return this.G;};j.tb=function(hm){this.f||hm.then(function(){this.f=true;this.g||fj(this,0);}.bind(this)).catch(function(){});return this.h;};j.Ia=function(){return this.l;};j.ta=function(hm,im,jm,km){hm!=this.c&&(this.B=hm.L.create(),hm.J.create().then(dd(this,function(lm){if(this.b){var mm=this.c;this.c=hm;this.G=lm;this.H=true;this.v=km?km:null;this.m||(mm?im&&zi(this,true,jm):fj(this,0));}})).catch(dd(this,function(lm){"aborted"!=lm.type&&(this.f?(lm=yb(lm),this.dispatchEvent(lm)):this.h.reject(lm));})));};j.pb=function(){return zi(this,false);};j.qb=function(){this.A=true;};function zi(hm,im,jm){hm.c&&!hm.m&&(hm.m=true,gj(hm),ld(hm.a).then(dd(hm,function(){var km=this.b.currentTime;if(!im&&0<gd(this.a,km)&&0<=zh(this.a.b,km))return Promise.resolve();if(jm)return kd(this.a,this.b.currentTime+jm);this.D=true;return jd(this.a);})).then(dd(hm,function(){this.m=false;fj(this,0);})).catch(dd(hm,function(km){this.m=false;this.f?(km=yb(km),this.dispatchEvent(km)):this.h.reject(km);})));}j.rb=function(hm){return 0<gd(this.a,hm)&&0<=zh(this.a.b,hm);};j.wa=function(){};j.Da=function(){return true;};function aj(hm){var im=hm.V&&hm.b.paused?hm.s:hm.N;return hm.i?Math.max(hm.s,im):hm.s;}j.Kb=function(){if(this.i&&!this.f){this.g=null;}else{var hm;if(hm=this.f&&!this.l)hm=1<this.a.c.buffered.length?true:false;if(hm&&(this.A||nd(this.b))){this.O&&(this.b.currentTime=md(this.b)),this.A=false,zi(this,true);}else{this.g=null;hm=this.c;var im=this.G,jm=this.b.currentTime;if(gd(this.a,this.i?jm:jm+(this.j||0))>=aj(this)){cj(this),fj(this,1000/(5*(Math.abs(this.b.playbackRate)||1)));}else{var km=bj(this,jm,im);km?(im=id(this.a,km,hm.b,this.B,this.K&&!this.b.paused),this.U&&"video"===hm.a.split("/")[0]&&this.U(km.startTime,km.endTime,{id:hm.id,reason:this.v}),this.B=null,this.H&&(this.H=false,km=this.v,this.v=null,dj(this,hm,km)),this.l=false,im.then(dd(this,function(lm){var mm=lm.X;lm=lm.ub;this.i||(this.T=lm);null==this.j&&(this.j=mm);this.D&&0<gd(this.a,jm)&&(this.D=false,this.b.currentTime+=.001);fj(this,0);})).catch(dd(this,function(lm){if("aborted"!=lm.type){var mm=[0,404,410,502,503,504];"net"==lm.type&&-1!=mm.indexOf(lm.$b.status)&&this.c&&fj(this,1000);lm=yb(lm);this.dispatchEvent(lm);}}))):(cj(this),this.f&&!this.l&&(this.l=true,ej(this)),fj(this,200));}}}};function bj(hm,im,jm){hm=hm.a;var km=hm.b.length;hm=0<km?hm.b[km-1]:null;return null!=hm?null!=hm.endTime?jm.la(hm.endTime):null:jm.la(im)||(jm.length()?jm.w():null);}function cj(hm){if(!hm.i&&null!=hm.j){hm.i=true;var im=hm.a,jm=hm.j,km=jm-im.s;0!=km&&(im.b=ai(im.b,km),im.s=jm);hm.h.resolve(hm.j);}}function dj(hm,im,jm){var km=im.a.split("/")[0];im=xb({type:"adaptation",bubbles:true,contentType:km,size:"video"!=km?null:{width:im.width,height:im.height},bandwidth:im.bandwidth,reason:jm});hm.dispatchEvent(im);}function ej(hm){var im=xb({type:"ended"});hm.dispatchEvent(im);}function fj(hm,im){hm.g=i.setTimeout(hm.Kb.bind(hm),im);}function gj(hm){null!=hm.g&&(i.clearTimeout(hm.g),hm.g=null);}j.Ea=function(){return this.T;};function hj(hm){this.b=hm;this.a=null;}hj.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null);};hj.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var hm=new xh(0,null,this.b);this.a=new ci([hm]);return Promise.resolve(this.a);};function ij(hm,im){sc.call(this,hm);this.b=im;this.g=true;this.h=this.f=null;this.c=new xc();this.a=null;}m(ij,sc);ij.prototype.F=function(){};ij.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.S=this.b=this.f=this.h=this.a=this.c=null;};j=ij.prototype;j.sa=function(){return this.f;};j.Ga=function(){return this.h;};j.tb=function(){return this.c;};j.Ia=function(){return true;};j.ta=function(hm){hm.J.create().then(dd(this,function(im){if(this.b){if(0==im.length())return Promise.reject(Error("No subtitles URL available."));var jm=this.f;this.f=hm;this.h=im;im=di(im).url.b[0].toString();var km=this.Da();this.a&&(this.wa(false),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=im;this.wa(km);im=xb({type:"adaptation",bubbles:true,contentType:"text",size:null,bandwidth:hm.bandwidth});this.dispatchEvent(im);jm||this.c.resolve(0);}}));};j.pb=function(){};j.qb=function(){};j.rb=function(){return true;};j.wa=function(hm){this.g=hm;this.a&&(this.a.track.mode=hm?"showing":"disabled");};j.Da=function(){this.a&&(this.g="showing"==this.a.track.mode);return this.g;};function jj(){}jj.prototype.parse=function(hm,im,jm,km){var lm=null;try{var nm,om=new ob(im);if(440786851!=qb(om).id){nm=null;}else{var pm=qb(om);if(408125543!=pm.id){nm=null;}else{var qm=pm.a.byteOffset,rm,sm=new ob(pm.a);for(im=null;ib(sm.a);){var tm=qb(sm);if(357149030==tm.id){im=tm;break;}}if(im){for(var um=new ob(im.a),sm=1e+06;ib(um.a);){var vm=qb(um);if(2807729==vm.id){sm=tb(vm);break;}}rm=sm/1e+09;}else rm=null;nm=rm?{Ub:qm,Yb:rm}:null;}}if(nm){var wm=qb(new ob(hm));if(475249515!=wm.id){lm=null;}else{var xm=nm.Ub,ym=nm.Yb;hm=[];var zm=new ob(wm.a);for(nm=wm=-1;ib(zm.a);){var an=qb(zm);if(187==an.id){var bn,cn=new ob(an.a),dn=qb(cn);if(179!=dn.id){bn=null;}else{var en=tb(dn),fn=qb(cn);if(183!=fn.id){bn=null;}else{for(var gn=new ob(fn.a),qm=0;ib(gn.a);){var hn=qb(gn);if(241==hn.id){qm=tb(hn);break;}}bn={Zb:en,Sb:qm};}}if(bn){var jn=ym*bn.Zb,kn=xm+bn.Sb;if(0<=wm){var ln=new kh(km,jm,nm,kn-1);hm.push(new xh(wm,jn,ln));}wm=jn;nm=kn;}}}0<=wm&&(ln=new kh(km,jm,nm,null),hm.push(new xh(wm,null,ln)));lm=hm;}}else lm=null;}catch(mm){if(!(mm instanceof RangeError))throw mm;}return lm;};function kj(hm,im,jm,km,lm,mm,nm,om){this.g=hm;this.i=im;this.c=jm;this.a=km;this.f=lm;this.b=mm;this.j=nm;this.ja=null;this.h=om;}kj.prototype.destroy=function(){this.h=this.i=this.g=null;this.a.f();this.a=null;this.b&&(this.b.f(),this.b=null);this.f&&(this.f.f(),this.f=null);this.ja=null;};kj.prototype.create=function(){if("webm"==this.c){var hm=Error("WebM is not supported in this build configuration.");hm.type="app";return Promise.reject(hm);}if(this.ja)return this.ja;hm=[nh(this.a)];"webm"==this.c&&hm.push(nh(this.f));this.b&&nh(this.b);return this.ja=Promise.all(hm).then(dd(this,function(im){var jm=im[0];im=im[1]||null;var km=null;"mp4"==this.c?(km=new bi(),km=km.parse(new DataView(jm),this.a.h,this.a.b,this.h,this.b)):"webm"==this.c&&(km=new jj(),km=km.parse(new DataView(jm),new DataView(im),this.a.b,this.h));if(!km)return jm=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),jm.type="stream",Promise.reject(jm);var lm;"dynamic"==this.g.type?lm=new fi(km,this.g,this.i,this.j):lm=new ci(km);return Promise.resolve(lm);}));};function lj(hm){this.a=hm;}function mj(hm,im,jm){for(var km=eb()/1000,lm=0;lm<im.a.length;++lm)for(var mm=im.a[lm],nm=0;nm<mm.b.length;++nm){var om=mm.b[nm];if("text"!=om.contentType)for(var pm=0;pm<om.a.length;++pm){var qm=om.a[pm],rm=0,rm=rm+(qm.g?1:0),rm=rm+(qm.b?1:0),rm=rm+(qm.a?1:0);0==rm?(om.a.splice(pm,1),--pm):1!=rm&&(qm.g?(qm.b=null,qm.a=null):qm.b&&(qm.a=null));}}nj(im);for(lm=0;lm<im.a.length;++lm)for(mm=im.a[lm],nm=0;nm<mm.b.length;++nm){pm=om=mm.b[nm];qm=null;for(rm=0;rm<pm.a.length;++rm){var sm=pm.a[rm].f||"";qm?sm!=qm&&(pm.a.splice(rm,1),--rm):qm=sm;}0==om.a.length&&(mm.b.splice(nm,1),--nm);}"dynamic"==im.type&&null==im.c&&(im.c=km);lm=new wi();"dynamic"==im.type&&(lm.b=true,lm.f=im.g,lm.g=new kh(jm,im.j||im.url),lm.h=im.c);lm.c=im.h||5;for(mm=0;mm<im.a.length;++mm){nm=im.a[mm];if(null==nm.start)break;nm=oj(hm,im,nm,km,jm);lm.a.push(nm);}return lm;}function nj(hm){if(hm.a.length){null==hm.a[0].start&&(hm.a[0].start=0);var im=function(pm){return 0==pm||!!pm;};"dynamic"==hm.type&&(hm.b=null);im(hm.b)&&1==hm.a.length&&!im(hm.a[0].a)&&(hm.a[0].a=hm.b);for(var jm=0,km=true,lm=0;lm<hm.a.length;++lm){var mm=hm.a[lm-1],nm=hm.a[lm],om=hm.a[lm+1]||{start:hm.b};!im(nm.start)&&mm&&im(mm.start)&&im(mm.a)&&(nm.start=mm.start+mm.a);!im(nm.a)&&im(om.start)&&(nm.a=om.start-nm.start);null!=nm.start&&null!=nm.a?jm+=nm.a:km=false;}im(hm.b)||(lm=hm.a[hm.a.length-1],km?hm.b=jm:im(lm.start)&&im(lm.a)?hm.b=lm.start+lm.a:"dynamic"!=hm.type&&(hm.b=jm));}}function oj(hm,im,jm,km,lm){var mm=new vi();mm.id=jm.id;mm.start=jm.start;mm.b=jm.a;var nm=new kc();jm.b.forEach(function(xm){nm.push(xm.contentType||"",xm);});for(var om=nc(nm),pm=0;pm<om.length;++pm){var qm=new kc();nm.get(om[pm]).forEach(function(xm){qm.push(xm.group,xm);});for(var rm=nc(qm),sm=0;sm<rm.length;++sm){var tm=new kc();qm.get(rm[sm]).forEach(function(xm){tm.push(xm.lang,xm);});for(var um=nc(tm),vm=0;vm<um.length;++vm){var wm=tm.get(um[vm]),wm=pj(hm,im,jm,wm,km,lm);mm.a.push(wm);}}}return mm;}function pj(hm,im,jm,km,lm,mm){n(km.every(function(vm){return vm.group==km[0].group&&(vm.lang||"")==(km[0].lang||"")&&(vm.contentType||"")==(km[0].contentType||"");}));var nm=new si(),om=km.filter(function(vm){return null!=vm.id;});om.length==km.length&&(nm.id=om.map(function(vm){return vm.id;}).sort().reduce(function(vm,wm){return vm+","+wm;}));nm.lang=km[0].lang||"";nm.contentType=km[0].contentType||"";nm.b=km.some(function(vm){return vm.c;});for(var om={},pm=0;pm<km.length;++pm)for(var qm=km[pm],rm=0;rm<qm.a.length;++rm){var sm=qm.a[rm],tm=sj(hm,sm),um=nm.a.slice(0);rj(tm,um);0==um.length&&0<nm.a.length||!(sm=uj(im,jm,sm,lm,mm))||(nm.o.push(sm),nm.a=um,om[sm.C]=qm);}if(nm.a.some(function(vm){return ""==vm.a;}))return nm.o.forEach(function(vm){vm.P=true;}),nm;hm=qj(km);for(pm=0;pm<nm.o.length;++pm)sm=nm.o[pm],qm=om[sm.C],qm==hm&&(sm.P=true);return nm;}function qj(hm){for(var im=null,jm=null,km=0;km<hm.length;++km)for(var lm=hm[km],mm=0;mm<lm.a.length;++mm){var nm=lm.a[mm],nm=(nm.width||1)*(nm.height||1)*(nm.bandwidth||1);if(null==im||nm<im)im=nm,jm=lm;}return jm;}function rj(hm,im){if(0==im.length){Array.prototype.push.apply(im,hm);}else for(var jm=0;jm<im.length;++jm){for(var km=false,lm=0;lm<hm.length;++lm){var mm=im[jm],nm=hm[lm];if(mm.a==nm.a&&mm.h==nm.h&&mm.l==nm.l&&mm.g==nm.g&&mm.i==nm.i&&mm.f==nm.f&&mm.j==nm.j&&vd(mm.c,nm.c)){km=true;yd(im[jm],hm[lm].b);break;}}km||(im.splice(jm,1),--jm);}}function sj(hm,im){var jm=[];if(0==im.c.length){jm.push(new wd());}else if(hm.a)for(var km=0;km<im.c.length;++km)jm.push.apply(jm,tj(hm,im.c[km]));return jm;}function tj(hm,im){var jm=[];if(2!=hm.a.length)return [];var km=hm.a(im.c||"",im.f);if(!(km&&km instanceof Array))return [];for(var lm=0;lm<km.length;++lm){var mm,nm=km[lm];mm=new wd();if(nm){var om=hc(nm,"keySystem");if(null!=om){mm.a=om;}else throw Error("'keySystem' cannot be null.");var pm=hc(nm,"licenseServerUrl");if(null!=pm){mm.h=pm;}else if(om)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");om=fc(nm,"withCredentials");null!=om&&(mm.l=om);om=jc(nm,"licensePostProcessor",Function);null!=om&&(mm.m=om);om=jc(nm,"licensePreProcessor",Function);null!=om&&(mm.s=om);om=fc(nm,"distinctiveIdentifierRequired");null!=om&&(mm.g=om);om=fc(nm,"persistentStateRequired");null!=om&&(mm.i=om);om=hc(nm,"audioRobustness");null!=om&&(mm.f=om);om=hc(nm,"videoRobustness");null!=om&&(mm.j=om);om=jc(nm,"serverCertificate",Uint8Array);null!=om&&(mm.c=om);if(om=jc(nm,"initData",Object)){nm=jc(om,"initData",Uint8Array);if(null==nm)throw Error("'initData.initData' cannot be null.");om=hc(om,"initDataType");if(null==om)throw Error("'initData.initDataType' cannot be null.");mm.b.push({initData:new Uint8Array(nm.buffer),initDataType:om});}}0==mm.b.length&&im.a&&im.a.psshBox&&yd(mm,[{initData:im.a.psshBox,initDataType:"cenc"}]);jm.push(mm);}return jm;}function uj(hm,im,jm,km,lm){if(!jm.u||0===jm.u.length)return null;var mm=null,nm=1,om=0;if(jm.g){mm=jm.f.split("/")[1];if("mp4"!=mm&&"webm"!=mm){mm=null;}else{var pm=jm.g;"webm"!=mm||pm.c?pm.a||pm.b&&pm.b.a?(nm=pm.b,nm||(nm=new bg(),nm.url=jm.u,nm.a=pm.a?pm.a.clone():null),om=wj(nm,lm),nm=pm.c?wj(pm.c,lm):null,pm.f?(pm=pm.f,pm=new kh(lm,jm.u,pm.ga,pm.end)):pm=null,hm=new kj(hm,im,mm,om,nm,pm,km,lm),im=new wh(nm),km=new pi(),km.J=hm,km.L=im,mm=km):mm=null:mm=null;}nm=jm.g.h;om=jm.g.g;}else if(jm.b){mm=jm.b,!mm.c&&!mm.f&&1<mm.b.length?mm=null:mm.c||im.a||mm.f||1!=mm.b.length?mm.f&&0===mm.f.a.length?mm=null:(mm=mm.h?wj(mm.h,lm):null,hm=new ni(hm,im,jm,km,lm),im=new wh(mm),km=new pi(),km.J=hm,km.L=im,mm=km):mm=null,nm=jm.b.a,om=jm.b.g;}else if(jm.a){hm:if(mm=jm.a,nm=0+(mm.f?1:0),nm+=mm.c?1:0,nm+=mm.b?1:0,0==nm?nm=false:(1!=nm&&(mm.f?(mm.c=null,mm.b=null):mm.c&&(mm.b=null)),nm=true),nm){nm=null;if(mm.g&&(nm=(mm=jm.a.g)?vj(jm,mm,cg):null,!nm)){mm=null;break hm;}mm=nm?wj(nm,lm):null;nm=jm.a;nm.f?(nm=jm.f.split("/")[1],"mp4"!=nm&&"webm"!=nm?hm=null:"webm"!=nm||mm?th(lm,jm,1,0)?(om=(om=jm.a.f)?vj(jm,om,bg):null)?(om=wj(om,lm),hm=new kj(hm,im,nm,om,mm,null,km,lm)):hm=null:hm=null:hm=null):hm=nm.h?nm.c?new oi(hm,im,jm,km,lm):nm.b?"dynamic"!=hm.type&&null==im.a?null:new mi(hm,im,jm,km,lm):null:null;hm?(im=new wh(mm),km=new pi(),km.J=hm,km.L=im,mm=km):mm=null;}else mm=null;;nm=jm.a.a;om=jm.a.i;}else "text"==jm.f.split("/")[0]&&(mm=new pi(),mm.J=new hj(new kh(lm,jm.u)));if(!mm)return null;mm.id=jm.id;om&&(mm.b=-1*om/nm);mm.bandwidth=jm.bandwidth;mm.width=jm.width;mm.height=jm.height;mm.a=jm.f||"";mm.c=jm.h||"";mm.fbQualityLabel=jm.fbQualityLabel||null;mm.fbQualityClass=jm.fbQualityClass||null;for(hm=0;hm<jm.c.length;++hm)im=jm.c[hm],im.b&&mm.f.push(im.b);return mm;}function vj(hm,im,jm){im=uh(im,hm.id,null,hm.bandwidth,null);if(!im)return null;jm=new jm();jm.url=mh(hm.u,im);return jm;}function wj(hm,im){var jm=hm.url,km=0,lm=null;hm.a&&(km=hm.a.ga,lm=hm.a.end);return new kh(im,jm,km,lm);}function xj(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[];}function yj(hm,im){var jm=new zj(im);hm.streamHistory.push(new ak(jm));if(jm.videoHeight||!hm.streamStats)hm.streamStats=jm;}function zj(hm){this.videoWidth=hm.width;this.videoHeight=hm.height;this.videoMimeType=hm.a;this.videoBandwidth=hm.bandwidth;}function ak(hm){this.timestamp=eb()/1000;this.value=hm;}function bk(hm,im,jm,km,lm){this.b=new kh(null,[new af(hm)]);this.a=new ch();this.a.body=im;this.a.method=jm;this.a.a=3;this.a.l=km;this.a.c=0;hm=lm||{};for(var mm in hm)this.a.b[mm]=hm[mm];}function ck(hm){return nh(hm.b,hm.a).then(function(im){return Promise.resolve(new Uint8Array(im));});}function dk(hm,im,jm){sc.call(this,hm);this.c=im;this.j=jm;this.a=this.h=null;this.i=new oc();this.b=[];this.f=[];this.m=0;this.g=new xc();this.l=null;}m(dk,sc);dk.prototype.destroy=function(){this.S=null;for(var hm=0;hm<this.f.length;++hm)this.f[hm].close().catch(function(){});this.f=[];this.b=this.a=this.h=null;this.g.destroy();this.g=null;this.i.destroy();this.i=null;this.l&&(i.clearTimeout(this.l),this.l=null);this.c=this.j=null;};dk.prototype.initialize=function(){var hm=new kc(),im;im=this.j;if(im.D){im=im.a.a[0];for(var jm=[],km=0;km<im.a.length;++km)jm.push.apply(jm,ui(im.a[km]));im=jm;}else im=[];for(jm=0;jm<im.length;++jm)km=im[jm],km.a.a||km.b&&!lk(km.b)||hm.push(km.contentType,km);for(var jm={},km=false,lm=0;lm<im.length;++lm){var mm=im[lm];if(mm.a.a&&!hm.a.hasOwnProperty(mm.contentType)){var nm=mm.a.a,om=jm[nm];om||(om=mm.a,om={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:om.g?"required":"optional",persistentState:om.i?"required":"optional",sessionTypes:["temporary"]},jm[nm]=om);if(mm.b&&(nm=mm.contentType+"Capabilities",nm in om)){km=true;om[nm]||(om[nm]=[]);var pm;"audio"==mm.contentType?pm=mm.a.f:"video"==mm.contentType&&(pm=mm.a.j);om[nm].push({contentType:mm.b,robustness:pm});}}}if(!km)if(im.length){this.a=im[0].a;}else throw hm=Error("No DrmInfo exists!"),hm.type="drm",hm;if(0==Object.keys(jm).length)return kl(this.j,hm),this.g.resolve(),Promise.resolve();pm=new xc();jm=ek(jm,pm);jm=jm.then(this.v.bind(this,im,hm));pm.reject(null);return jm;};function ek(hm,im){for(var jm in hm)im=im.catch(function(km,lm){return navigator.requestMediaKeySystemAccess(km,[lm]);}.bind(null,jm,hm[jm]));return im;}dk.prototype.v=function(hm,im,jm){if(!this.c)return gk();for(var km=jm.keySystem,lm=jm.getConfiguration(),mm=["audio","video"],nm=0;nm<mm.length;++nm){var om=mm[nm];if(!im.a.hasOwnProperty(om)){var pm=lm[om+"Capabilities"];if(pm){for(var pm=pm[0],qm=[],rm={},sm=0;sm<hm.length;++sm){var tm=hm[sm],um=pm?tm.b==pm.contentType:tm.contentType==om;tm.a.a!=km||!um||tm.id in rm||(qm.push(tm),rm[tm.id]=true,this.a=this.a?xd(this.a,tm.a):tm.a);}im.set(om,qm);}}}kl(this.j,im);return jm.createMediaKeys().then(function(vm){this.h=vm;}.bind(this));};function fk(hm){return hm.c?hm.h?hm.c.setMediaKeys(hm.h).then(dd(hm,function(){return this.c?this.a.c?this.h.setServerCertificate(this.a.c):Promise.resolve():gk();})).then(dd(hm,function(){if(!this.c)return gk();for(var im=0;im<this.a.b.length;++im){var jm=this.a.b[im];this.s({type:"encrypted",initDataType:jm.initDataType,initData:jm.initData});}0==this.a.b.length&&pc(this.i,this.c,"encrypted",this.s.bind(this));})):Promise.resolve():gk();}function gk(){var hm=Error("EmeManager destroyed");hm.type="destroy";return Promise.reject(hm);}dk.prototype.s=function(hm){for(var im=new Uint8Array(hm.initData),jm=0;jm<this.b.length;++jm)if(vd(im,this.b[jm].data))return;try{var lm=hk(this);}catch(km){im=yb(km);this.dispatchEvent(im);this.g.reject(km);return;}hm=lm.generateRequest(hm.initDataType,hm.initData);this.b.push({data:im,La:lm});hm.catch(dd(this,function(mm){if(this.c){for(var nm=0;nm<this.b.length;++nm)if(this.b[nm].La==lm){this.b.splice(nm,1);break;}nm=yb(mm);this.dispatchEvent(nm);this.g.reject(mm);}}));this.f.push(lm);};function hk(hm){var im=null,im=hm.h.createSession();pc(hm.i,im,"message",hm.B.bind(hm));pc(hm.i,im,"keystatuseschange",hm.A.bind(hm));return im;}dk.prototype.B=function(hm){ik(this,hm.target,this.a,hm.message);};dk.prototype.A=function(hm){hm=hm.target;var im={};hm.keyStatuses.forEach(function(km,lm){if("string"==typeof km){var mm=km;km=lm;lm=mm;}if("com.microsoft.playready"==this.a.a&&16==km.byteLength){var mm=new DataView(km),nm=mm.getUint32(0,true),om=mm.getUint16(4,true),pm=mm.getUint16(6,true);mm.setUint32(0,nm,false);mm.setUint16(4,om,false);mm.setUint16(6,pm,false);}mm=ud(new Uint8Array(km));im[mm]=lm;}.bind(this));if(hm.expiration<Date.now()){for(var jm=0;jm<this.b.length;++jm)if(this.b[jm].La==hm){this.b.splice(jm,1);break;}hm.close();this.f.splice(this.f.indexOf(hm),1);}nl(this.j,im);};function ik(hm,im,jm,km){km=jk(jm,km);ck(new bk(km.url,km.body,km.method,jm.l,km.headers)).then(dd(hm,function(lm){jm.m&&(lm=jm.m(lm));return im.update(lm);})).then(dd(hm,function(){var lm=xb({type:"sessionReady",detail:im});this.dispatchEvent(lm);this.m++;this.m>=this.f.length&&this.g.resolve();})).catch(dd(hm,function(lm){lm.La=im;lm=yb(lm);this.dispatchEvent(lm);}));}function jk(hm,im){var jm={url:hm.h,body:im.slice(0),method:"POST",headers:{}};if("com.microsoft.playready"===hm.a){for(var km=String.fromCharCode.apply(null,new Uint16Array(jm.body)),km=(new DOMParser()).parseFromString(km,"application/xml"),lm=km.getElementsByTagName("name"),mm=km.getElementsByTagName("value"),nm=0;nm<lm.length;nm++)jm.headers[lm[nm].childNodes[0].nodeValue]=mm[nm].childNodes[0].nodeValue;jm.body=i.atob(km.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue);}if(!hm.s)return jm;hm.s(jm);jm.url=hc(jm,"url");if(null==jm.url)throw Error("'url' cannot be null.");if(!(jm.body instanceof ArrayBuffer||"string"==typeof jm.body||null==jm.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");jm.method=hc(jm,"method");if("GET"!=jm.method&&"POST"!=jm.method)throw Error("'method' must be either 'GET' or 'POST'.");jm.headers=jc(jm,"headers",Object);if(null==jm.headers)throw Error("'headers' cannot be null.");return jm;}function kk(hm){sc.call(this,null);this.a=hm;this.b=null;this.f=new oc();this.i=this.h=null;this.B=0;this.v=null;this.j=false;this.H=true;this.F=false;this.G=true;this.g=new xj();this.c={enableAdaptation:true,streamBufferSize:15,liveStreamEndTimeout:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new v()};this.l=1;this.D=null;this.s=false;}m(kk,sc);l("shaka.player.Player",kk);kk.version="v1.6.4-fb";kk.isBrowserSupported=function(){return !!i.MediaSource&&!!i.Promise&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement" in document&&!!i.Uint8Array;};kk.prototype.V=function(hm){this.H=hm;};kk.prototype.setResumeAfterBuffering=kk.prototype.V;function lk(hm){return "text/vtt"==hm?!!i.VTTCue:MediaSource.isTypeSupported(hm);}kk.isTypeSupported=lk;kk.setTextStyle=function(hm){var im=document.getElementById("ShakaPlayerTextStyle");im||(im=document.createElement("style"),im.id="ShakaPlayerTextStyle",document.head.appendChild(im));for(im=im.sheet;im.cssRules.length;)im.deleteRule(0);im.insertRule("::cue { "+x(hm)+" }",0);};kk.prototype.destroy=function(){return this.m().then(dd(this,function(){this.f.destroy();this.a=this.f=null;})).catch(function(){});};kk.prototype.destroy=kk.prototype.destroy;kk.prototype.m=function(){if(!this.b)return Promise.resolve();this.j&&rk(this);this.a.pause();qc(this.f);qk(this);ok(this);this.h&&(this.h.destroy(),this.h=null);this.a.src="";var hm=this.a.setMediaKeys(null);this.b&&(this.b.destroy(),this.b=null);this.j=false;this.g=new xj();return hm;};kk.prototype.unload=kk.prototype.m;kk.prototype.oa=function(hm){return mk(this,hm,false);};kk.prototype.load=kk.prototype.oa;kk.prototype.O=function(hm){return mk(this,hm,true);};kk.prototype.loadWithSilencedErrors=kk.prototype.O;function mk(hm,im,jm){el(im,hm.a);var km=null;if(hm.b||!hm.F)km=hm.m().then(dd(hm,function(){return im.xa();}));hm.a.autoplay&&(p("load"),pc(hm.f,hm.a,"timeupdate",hm.zb.bind(hm)));im.fb(hm.c);im.O=hm.D;hm.D=null;km||(km=im.xa());km.catch(dd(hm,function(lm){im.destroy();return Promise.reject(lm);}));return km.then(dd(hm,function(){if(!this.a)return nk();this.b=im;pc(this.f,this.b,"seekrangechanged",this.Gb.bind(this));this.h=new dk(this,this.a,this.b);return this.h.initialize();})).then(dd(hm,function(){if(!this.a)return nk();pc(this.f,this.a,"error",this.Wb.bind(this));pc(this.f,this.a,"playing",this.Fb.bind(this));pc(this.f,this.a,"pause",this.Eb.bind(this));return fl(this.b,this,this.a);})).then(dd(hm,function(){return this.a?fk(this.h):nk();})).then(dd(hm,function(){if(!this.a)return nk();pk(this);})).catch(dd(hm,function(lm){if(!this.a)return nk();if(true!==jm&&"destroy"!=lm.type){var mm=yb(lm);this.dispatchEvent(mm);}return this.m().then(function(){return Promise.reject(lm);});}));}function nk(){var hm=Error("Player destroyed");hm.type="destroy";return Promise.reject(hm);}j=kk.prototype;j.zb=function(){q("load");this.g.playbackLatency=r("load")/1000;this.f.ua(this.a,"timeupdate");};j.Wb=function(){if(this.a.error){var hm=this.a.error.code;hm!=MediaError.MEDIA_ERR_ABORTED&&(hm=Error(sk[hm]||"Unknown playback error."),hm.type="playback",hm=yb(hm),this.dispatchEvent(hm));}};j.Fb=function(){p("playing");!this.i&&0>this.l&&(this.a.playbackRate=0,this.A(this.a.currentTime,Date.now(),this.l));this.j&&!this.G&&rk(this);};j.Eb=function(){q("playing");var hm=r("playing");if(!isNaN(hm)){var im=this.g;im.playTime+=hm/1000;}ok(this);};j.Gb=function(hm){this.B=hm.start;};j.sb=function(){if(!this.a.paused){q("playing");var hm=r("playing");if(!isNaN(hm)){var im=this.g;im.playTime+=hm/1000;p("playing");}}hm=this.g;im=this.a;im.getVideoPlaybackQuality&&(im=im.getVideoPlaybackQuality(),hm.decodedFrames=im.totalVideoFrames,hm.droppedFrames=im.droppedVideoFrames);return this.g;};kk.prototype.getStats=kk.prototype.sb;kk.prototype.na=function(){return this.b?this.b.G():[];};kk.prototype.getVideoTracks=kk.prototype.na;kk.prototype.ea=function(){return this.b?this.b.ca():[];};kk.prototype.getAudioTracks=kk.prototype.ea;kk.prototype.ma=function(){return this.b?this.b.gb():[];};kk.prototype.getTextTracks=kk.prototype.ma;kk.prototype.selectVideoTrack=function(hm,im){return this.b?this.b.selectVideoTrack(hm,void 0==im?true:im):false;};kk.prototype.selectVideoTrack=kk.prototype.selectVideoTrack;kk.prototype.pa=function(hm,im,jm){return this.b?pl(this.b,"audio",hm,void 0==im?true:im,jm):false;};kk.prototype.selectAudioTrack=kk.prototype.pa;kk.prototype.qa=function(hm){return this.b?pl(this.b,"text",hm,false):false;};kk.prototype.selectTextTrack=kk.prototype.qa;kk.prototype.da=function(hm){this.b&&ll(this.b,hm);};kk.prototype.enableTextTrack=kk.prototype.da;kk.prototype.U=function(hm){ok(this);0<=hm?this.a.playbackRate=hm:this.a.paused||(this.a.playbackRate=0,this.A(this.a.currentTime,Date.now(),hm));this.l=hm;};kk.prototype.setPlaybackRate=kk.prototype.U;kk.prototype.N=function(){return this.l;};kk.prototype.getPlaybackRate=kk.prototype.N;kk.prototype.ra=function(hm){this.D=hm;};kk.prototype.setPlaybackStartTime=kk.prototype.ra;kk.prototype.K=function(){return this.b?this.b.hb():false;};kk.prototype.isLive=kk.prototype.K;kk.prototype.ca=function(hm){if(hm){var im=fc(hm,"enableAdaptation");null!=im&&(this.c.enableAdaptation=im);im=fc(hm,"allowSkipUnloading");null!=im&&(this.F=im);im=fc(hm,"endBufferingOnPlaying");null!=im&&(this.G=im);im=fc(hm,"usePlaybackRateForBuffering");null!=im&&(this.s=im);im=gc(hm,"streamBufferSize",0);null!=im&&(this.c.streamBufferSize=im);im=fc(hm,"addCdnDebugQueryParameters");null!=im&&(this.c.addCdnDebugQueryParameters=im);im=gc(hm,"initialStreamBufferSize",0);null!=im&&(this.c.initialStreamBufferSize=im);im=fc(hm,"includeStreamBufferSizeInStartOffset");null!=im&&(this.c.includeStreamBufferSizeInStartOffset=im);im=gc(hm,"liveStreamEndTimeout",0);null!=im&&(this.c.liveStreamEndTimeout=im);im=gc(hm,"licenseRequestTimeout",0);null!=im&&(this.c.licenseRequestTimeout=im);im=gc(hm,"mpdRequestTimeout",0);null!=im&&(this.c.mpdRequestTimeout=im);im=gc(hm,"minMpdRefreshInterval",0);null!=im&&(this.c.minMpdRefreshInterval=im);im=fc(hm,"enableLiveInterruptionDetection");null!=im&&(this.c.enableLiveInterruptionDetection=im);im=fc(hm,"enableManifestDebug");null!=im&&(this.c.enableManifestDebug=im,im||(sc.prototype.Y=function(){}));im=fc(hm,"resolveVideoTimeUpdateOnFragmentedTimeRanges");null!=im&&(this.c.resolveVideoTimeUpdateOnFragmentedTimeRanges=im);im=gc(hm,"liveInterruptionConsecutiveUpdatesWithoutChange");null!=im&&(this.c.liveInterruptionConsecutiveUpdatesWithoutChange=im);im=gc(hm,"liveInterruptionConsecutiveUpdatesWithChange");null!=im&&(this.c.liveInterruptionConsecutiveUpdatesWithChange=im);im=fc(hm,"liveSendPushHeaders");null!=im&&(this.c.liveSendPushHeaders=im);im=gc(hm,"liveMaxManifestFetchesWithPush");null!=im&&(this.c.liveMaxManifestFetchesWithPush=im);im=gc(hm,"liveMaxSegmentsToPush");null!=im&&(this.c.liveMaxSegmentsToPush=im);im=gc(hm,"segmentRequestTimeout",0);null!=im&&(this.c.segmentRequestTimeout=im);im=hc(hm,"preferredLanguage");null!=im&&(this.c.preferredLanguage=im);im=jc(hm,"restrictions",v);null!=im&&(this.c.restrictions=im.clone());hm=fc(hm,"disableCacheBustingEvenThoughItMayAffectBandwidthEstimation");null!=hm&&(dh=!hm);this.b&&this.b.fb(this.c);}};kk.prototype.configure=kk.prototype.ca;kk.prototype.fa=function(){return this.c;};kk.prototype.getConfiguration=kk.prototype.fa;function ok(hm){hm.i&&(i.clearTimeout(hm.i),hm.i=null);}function pk(hm){qk(hm);hm.v=i.setTimeout(hm.T.bind(hm),100);}function qk(hm){hm.v&&(i.clearTimeout(hm.v),hm.v=null);}kk.prototype.A=function(hm,im,jm){this.i=null;var km=(Date.now()-im)/1000*jm;this.a.currentTime<this.B+(this.K()?1:.05)?this.a.pause():(km=Math.max(this.B,hm+km),this.a.currentTime=km,this.i=i.setTimeout(this.A.bind(this,hm,im,jm),250));};function rk(hm){q("buffering");var im=hm.g;im.bufferingTime+=r("buffering")/1000;hm.s&&(hm.a.playbackRate=hm.l);hm.j=false;hm.dispatchEvent(xb({type:"bufferingEnd"}));}kk.prototype.T=function(){pk(this);if(!this.a.ended&&!this.a.seeking){var hm=this.a.buffered,im=hm.length?hm.end(hm.length-1):0,hm=Math.max(im-this.a.currentTime,0),jm=this.a.currentTime,km=this.a.duration,km=isNaN(km)?0:Math.max(km-.05,0),im=im>=km||jm>=km;if(this.j){if(im=this.b,hm>(im.Xa?Number(im.g.streamBufferSize):Number(im.g.initialStreamBufferSize))||am(this.b))rk(this),this.H&&!this.s&&this.a.play();}else !this.a.paused&&!im&&.5>hm&&(this.j=true,this.s?this.a.playbackRate=0:this.a.pause(),this.g.bufferingHistory.push(eb()/1000),p("buffering"),this.dispatchEvent(xb({type:"bufferingStart"}))),am(this.b)&&rk(this);}};var sk={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function tk(hm){for(var im=0;im<hm.length;++im)for(var jm=hm[im],km=0;km<jm.a.length;++km){for(var lm=jm.a[km],mm=lm,nm=0;nm<mm.o.length;++nm)lk(ri(mm.o[nm]))||(mm.o.splice(nm,1),--nm);0==lm.o.length&&(jm.a.splice(km,1),--km);}for(im=0;im<hm.length;++im)for(jm=hm[im],km=0;km<jm.a.length;++km)jm.a[km].o.sort(uk);}function uk(hm,im){var jm=hm.bandwidth||Number.MAX_VALUE,km=im.bandwidth||Number.MAX_VALUE;return jm<km?-1:jm>km?1:0;}function vk(hm){this.a=hm;}vk.prototype.destroy=function(){this.a.destroy();this.a=null;};vk.prototype.update=function(hm){var im=wk(hm),jm=wk(this.a);return Promise.all([im,jm]).then(dd(this,function(km){var lm=km[0];km=km[1];tk(this.a.a);hm.b&&!this.a.b&&(hm.i=true);hm.f=this.a.f;hm.g=this.a.g?this.a.g.clone():null;hm.c=this.a.c;var mm=[];xk(hm,this.a,lm,km,mm);tk(hm.a);return Promise.resolve(mm);}));};function wk(hm){function im(km,lm){return km.concat(lm);}var jm=hm.a.map(function(km){return km.a;}).reduce(im,[]).map(function(km){return km.o;}).reduce(im,[]);hm=jm.map(function(km){return km.J.create();});return Promise.all(hm).then(function(km){for(var lm={},mm=0;mm<jm.length;++mm)lm[jm[mm].C]=km[mm];return Promise.resolve(lm);});}function xk(hm,im,jm,km,lm){var mm=new kc();hm.a.forEach(function(qm,rm){mm.push(qm.id||""+rm,qm);});var nm=new kc();im.a.forEach(function(qm,rm){nm.push(qm.id||""+rm,qm);});hm=nc(mm);for(im=0;im<hm.length;++im){var om=hm[im],pm=mm.get(om);1<pm.length||(om=nm.get(om))&&0!=om.length&&1==om.length&&(yk(pm[0],om[0],jm,km,lm),pm[0].b=om[0].b);}}function yk(hm,im,jm,km,lm){var mm=new kc();hm.a.forEach(function(qm,rm){mm.push(qm.id||""+rm,qm);});var nm=new kc();im.a.forEach(function(qm,rm){nm.push(qm.id||""+rm,qm);});hm=nc(mm);for(im=0;im<hm.length;++im){var om=hm[im],pm=mm.get(om);1<pm.length||(om=nm.get(om))&&0!=om.length&&1==om.length&&zk(pm[0],om[0],jm,km,lm);}}function zk(hm,im,jm,km,lm){var mm=new kc();hm.o.forEach(function(sm,tm){mm.push(sm.id||""+tm,sm);});var nm=new kc();im.o.forEach(function(sm,tm){nm.push(sm.id||""+tm,sm);});im={};for(var om=nc(mm),pm=0;pm<om.length;++pm){var qm=om[pm];im[qm]=qm;var rm=mm.get(qm);1<rm.length||((qm=nm.get(qm))&&0!=qm.length?1==qm.length&&(al(rm[0],qm[0],jm,km),rm[0].L=qm[0].L,qm[0].L=null,rm[0].b=qm[0].b):(lm.push(rm[0]),hm.o.splice(hm.o.indexOf(rm[0]),1)));}om=nc(nm);for(pm=0;pm<om.length;++pm)qm=om[pm],im[qm]||(im[qm]=qm,qm=nm.get(qm),hm.o.push(qm[0]));}function al(hm,im,jm,km){hm=jm[hm.C];km=km[im.C];im=hm.length();hm.Ja(km)&&(km=hm.length(),hm.g.push(im!==km),50<hm.g.length&&hm.g.shift());}function bl(){this.a=this.b=null;this.f=new oc();this.c=Number.POSITIVE_INFINITY;this.i=true;this.g=false;}l("shaka.media.SimpleAbrManager",bl);bl.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null;};bl.prototype.initialize=function(hm,im){this.b||this.a||(this.b=hm,this.a=im);};bl.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4000,pc(this.f,this.b,"bandwidth",this.l.bind(this)),pc(this.f,this.a,"adaptation",this.j.bind(this)),pc(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=true);};bl.prototype.enable=function(hm){this.i=hm;};bl.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var hm=cl(this);return hm?hm.id:null;};bl.prototype.getInitialSwitchReason=function(){return null;};bl.prototype.getInitialAudioTrackId=function(){return null;};bl.prototype.selectVideoTrack=function(hm,im,jm){this.g&&this.a.selectVideoTrack(hm.id,im,jm);};bl.prototype.l=function(){Date.now()<this.c||this.h();};bl.prototype.h=function(){if(this.i){var hm=cl(this);if(hm){if(hm.active){this.c=Date.now()+3000;return;}this.selectVideoTrack(hm,false);}this.c=Number.POSITIVE_INFINITY;}};bl.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+30000);};function cl(hm){var im=hm.a.G();if(0==im.length)return null;im.sort(fa);var jm;hm:{jm=hm.a.ca();for(var km=0;km<jm.length;++km)if(jm[km].active){jm=jm[km];break hm;}jm=null;};jm=jm?jm.bandwidth:0;hm=hm.b.getBandwidth();for(var km=im[0],lm=0;lm<im.length;++lm){var mm=im[lm],nm=lm+1<im.length?im[lm+1]:{bandwidth:Number.POSITIVE_INFINITY};if(mm.bandwidth&&(nm=(nm.bandwidth+jm)/.85,hm>=(mm.bandwidth+jm)/.95&&hm<=nm&&(km=mm,km.active)))break;}return km;}function dl(hm,im,jm){sc.call(this,null);this.a=hm;this.ea=im;this.j=new oc();this.h=new MediaSource();this.f=null;this.Ba=0;this.Ua=false;this.Aa=0;this.ra=3;this.qa=this.Xa=false;this.oa=0;this.bb=1;this.pa=Infinity;this.Ta=false;this.b=new kc();this.l=jm;this.l.initialize(im,this);this.D=false;this.B="en";this.fa=false;this.H=null;this.v=new xc();this.kb=new xc();this.i=new v();this.A=null;this.cb=1;this.c={};this.U=new xc();this.na=0;this.$a=15;this.s=null;this.Ra=this.Ya=false;this.m={};this.O=this.N=this.K=null;this.g={};this.da=false;this.jb=null;}m(dl,sc);l("shaka.player.StreamVideoSource",dl);dl.prototype.fb=function(hm){null!=hm.streamBufferSize&&(this.g.streamBufferSize=hm.streamBufferSize);null!=hm.initialStreamBufferSize&&(this.g.initialStreamBufferSize=hm.initialStreamBufferSize);null!=hm.addCdnDebugQueryParameters&&(this.g.addCdnDebugQueryParameters=hm.addCdnDebugQueryParameters);null!=hm.segmentRequestTimeout&&(this.g.segmentRequestTimeout=hm.segmentRequestTimeout);null!=hm.resolveVideoTimeUpdateOnFragmentedTimeRanges&&(this.g.resolveVideoTimeUpdateOnFragmentedTimeRanges=hm.resolveVideoTimeUpdateOnFragmentedTimeRanges);fm(this);null!=hm.includeStreamBufferSizeInStartOffset&&(this.Ua=Boolean(hm.includeStreamBufferSizeInStartOffset));null!=hm.enableAdaptation&&this.l.enable(Boolean(hm.enableAdaptation));null!=hm.mpdRequestTimeout&&(this.Aa=Number(hm.mpdRequestTimeout));null!=hm.minMpdRefreshInterval&&(this.ra=Number(hm.minMpdRefreshInterval)/1000);null!=hm.enableManifestDebug&&(this.Ta=!!hm.enableManifestDebug);null!=hm.liveStreamEndTimeout&&(this.$a=Number(hm.liveStreamEndTimeout));null!=hm.preferredLanguage&&(this.B=cc(String(hm.preferredLanguage)));null!=hm.liveSendPushHeaders&&(this.qa=Boolean(hm.liveSendPushHeaders));null!=hm.liveMaxManifestFetchesWithPush&&(this.oa=Number(hm.liveMaxManifestFetchesWithPush));null!=hm.liveMaxSegmentsToPush&&(this.pa=Number(hm.liveMaxSegmentsToPush));null!=hm.restrictions&&(this.i=hm.restrictions,this.D&&ml(this));};dl.prototype.destroy=function(){this.v.destroy();this.U.destroy();this.U=this.v=null;this.N&&(i.clearTimeout(this.N),this.N=null);this.K&&(i.clearTimeout(this.K),this.K=null);this.m=null;this.j.destroy();this.j=null;ec(this.c).forEach(function(hm){hm.destroy();});this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null);this.l.destroy();this.S=this.i=this.H=this.f=this.h=this.ea=this.l=null;};function el(hm,im){pc(hm.j,hm.h,"sourceopen",hm.Ab.bind(hm));im.src=i.URL.createObjectURL(hm.h);}j=dl.prototype;j.ab=function(){};function fl(hm,im,jm){if(!hm.D)return hm=Error("Cannot call attach() right now."),hm.type="app",Promise.reject(hm);hm.S=im;hm.f=jm;hm.H=im.sb();pc(hm.j,hm.ea,"bandwidth",hm.Xb.bind(hm));hm.a.b&&(pc(hm.j,im,"bufferingStart",hm.yb.bind(hm)),pc(hm.j,im,"bufferingEnd",hm.xb.bind(hm)));im=hm.f.setMediaKeys(hm.f.mediaKeys);hm.kb.then(dd(hm,function(){rl(this).then(dd(this,function(){this.v&&this.v.resolve();this.ab();})).catch(dd(this,function(km){this.v&&this.v.reject(km);}));}));return Promise.all([hm.v,im]);}j.xa=function(){if(this.D){var hm=Error("Cannot call load() right now.");hm.type="app";return Promise.reject(hm);}if(!this.a||0==this.a.a.length)return hm=Error("The manifest does not specify any content."),hm.type="stream",Promise.reject(hm);tk(this.a.a);if(0==this.a.a.length||0==this.a.a[0].a.length||!this.a.a[0].a.some(function(im){return "video"===im.contentType;}))return hm=Error("The manifest specifies content that cannot be displayed on this browser/platform."),hm.type="stream",Promise.reject(hm);this.D=true;this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c);fm(this);ml(this);return Promise.resolve();};function gl(hm){var im=xb({type:"manifestwrapped",bubbles:true});hm.dispatchEvent(im);}j.nb=function(hm){var im=Date.now(),jm=this.K=null,km,lm;if(this.qa&&(!this.oa||this.oa>this.bb)){km=Math.floor(cm(this))+1;km=Math.min(km,this.pa);var mm=this.c.video;if(mm=mm?mm.Ga():null)mm=mm.w(),null!=mm.a&&(lm=mm.a);if(this.f.paused||this.da)km=0;}km&&this.bb++;mm=this.a.g;(hm?this.lb():this.mb(mm,km,lm)).then(dd(this,function(nm){jm=new vk(nm);return jm.update(this.a);})).then(dd(this,function(nm){jm.destroy();jm=null;var om=bm(this);om.some(function(pm){return pm.ib();})&&this.Y("SegmentIndexChanges",om);om.some(function(pm){return pm.Pa;})&&gl(this);(om=dm(this,om))&&this.f.paused&&om.end>this.f.currentTime+10&&(this.f.currentTime=om.end);if(am(this))return this.va();for(om=0;om<nm.length;++om)il(this,nm[om]);this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c);this.g.useInitialBufferSizeWhenPaused=this.a.b;fm(this);ml(this);0==Object.keys(this.c).length?rl(this):hl(this,(Date.now()-im)/1000);})).catch(dd(this,function(nm){jm&&(jm.destroy(),jm=null);"aborted"!=nm.type&&(nm=yb(nm),this.dispatchEvent(nm),this.a&&hl(this,0));}));};j.mb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.");};j.lb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.");};function hl(hm,im){if(null!=hm.a.f){var jm=Math.max(hm.a.f,hm.ra),jm=Math.max(jm-im,0);hm.K=i.setTimeout(hm.nb.bind(hm,false),1000*jm);}}function il(hm,im){var jm=im.a.split("/")[0],km=hm.c[jm];if(km&&km.sa()==im){var lm=hm.b.get(im.a.split("/")[0]).map(function(mm){return mm.o;}).reduce(function(mm,nm){return mm.concat(nm);},[]).filter(function(mm){return mm.P&&mm.I;});if(0==lm.length){jm=Error("All usable streams have been removed from the manifest.");jm.type="app";jm=yb(jm);hm.dispatchEvent(jm);return;}hm.m[jm].Na==im&&delete hm.m[jm];km.ta(lm[0],true);im.destroy();}im.destroy();}j.Vb=function(hm){this.jb=hm;};dl.prototype.setTaggedTimeRangesEntryAdder=dl.prototype.Vb;dl.prototype.G=function(){if(!this.b||!this.b.a.hasOwnProperty("video"))return [];for(var hm=this.c.video,hm=(hm=hm?hm.sa():null)?hm.C:0,im=[],jm=this.b.get("video"),km=0;km<jm.length;++km)for(var lm=jm[km],mm=0;mm<lm.o.length;++mm){var nm=lm.o[mm];if(nm.P&&nm.I){var om=nm.C,nm=new ea(om,nm.bandwidth,nm.width,nm.height,nm.id,nm.fbQualityLabel,nm.fbQualityClass);om==hm&&(nm.active=true);im.push(nm);}}return im;};dl.prototype.getVideoTracks=dl.prototype.G;function jl(hm){hm=hm.G();for(var im=0;im<hm.length;im++)if(hm[im].active)return hm[im];}dl.prototype.ca=function(){if(!this.b||!this.b.a.hasOwnProperty("audio"))return [];for(var hm=this.c.audio,hm=(hm=hm?hm.sa():null)?hm.C:0,im=[],jm=this.b.get("audio"),km=0;km<jm.length;++km)for(var lm=jm[km],mm=lm.lang,nm=0;nm<lm.o.length;++nm){var om=lm.o[nm];if(om.P&&om.I){var pm=om.C,om=new u(pm,om.bandwidth,mm,om.id);pm==hm&&(om.active=true);im.push(om);}}return im;};dl.prototype.getAudioTracks=dl.prototype.ca;dl.prototype.gb=function(){if(!this.b||!this.b.a.hasOwnProperty("text"))return [];for(var hm=this.c.text,im=hm?hm.sa():null,im=im?im.C:0,jm=[],km=this.b.get("text"),lm=0;lm<km.length;++lm)for(var mm=km[lm],nm=mm.lang,om=0;om<mm.o.length;++om){var pm=mm.o[om].C,qm=new da(pm,nm);pm==im&&(qm.active=true,qm.enabled=hm.Da());jm.push(qm);}return jm;};dl.prototype.getTextTracks=dl.prototype.gb;function kl(hm,im){if(hm.D){for(var jm={},km=hm.a.a[0],lm=0;lm<km.a.length;++lm){var mm=km.a[lm];jm[mm.C]=mm;}hm.b.a={};km=nc(im);for(lm=0;lm<km.length;++lm){var mm=km[lm],nm=im.get(mm);if("video"==mm){var om=nm[0].id;hm.b.push(mm,jm[om]);}else if("audio"==mm){for(var om=nm[0].b.split(";")[0],pm=0;pm<nm.length;++pm){var qm=nm[pm];qm.b.split(";")[0]==om&&hm.b.push(mm,jm[qm.id]);}}else for(pm=0;pm<nm.length;++pm)om=nm[pm].id,hm.b.push(mm,jm[om]);}hm.fa=true;if(jm=hm.b.get("audio"))ql(hm,jm),hm.b.set("audio",jm),jm=jm[0].lang||hm.B,zb(2,hm.B,jm)&&(hm.fa=false);if(jm=hm.b.get("text"))ql(hm,jm),hm.b.set("text",jm),jm=jm[0].lang||hm.B,zb(2,hm.B,jm)||(hm.fa=false);}}dl.prototype.selectVideoTrack=function(hm,im,jm,km){return pl(this,"video",hm,im,jm,km);};function ll(hm,im){var jm=hm.c.text;jm&&jm.wa(im);}function ml(hm){if(hm.i){for(var im=false,jm=0;jm<hm.a.a.length;++jm)for(var km=hm.a.a[jm],lm=0;lm<km.a.length;++lm){var mm=km.a[lm];if("video"==mm.contentType)for(var nm=0;nm<mm.o.length;++nm){var om=mm.o[nm],pm=om.I;om.I=true;hm.i.maxWidth&&om.width>hm.i.maxWidth&&(om.I=false);hm.i.maxHeight&&om.height>hm.i.maxHeight&&(om.I=false);hm.i.minHeight&&om.height<hm.i.minHeight&&(om.I=false);hm.i.maxBandwidth&&om.bandwidth>hm.i.maxBandwidth&&(om.I=false);hm.i.minBandwidth&&om.bandwidth<hm.i.minBandwidth&&(om.I=false);pm!=om.I&&(im=true);}}0!=lc(hm.b).length&&im&&(ol(hm),0<hm.G().length||(im=Error("The application has restricted all video tracks!"),im.type="app",im=yb(im),hm.dispatchEvent(im)));}}dl.prototype.hb=function(){return this.a?this.a.b:false;};dl.prototype.isLive=dl.prototype.hb;dl.prototype.Pb=function(hm){this.Xa=hm;};dl.prototype.setIsLiveInterrupted=dl.prototype.Pb;dl.prototype.Tb=function(){for(var hm in this.c)this.c[hm].qb();};dl.prototype.forceResyncVideoBuffer=dl.prototype.Tb;function nl(hm,im){for(var jm,km=false,lm=new kc(),mm=lc(hm.b),nm=0;nm<mm.length;++nm)for(var om=mm[nm],pm=0;pm<om.o.length;++pm){var qm=om.o[pm];qm.f.forEach(function(rm){lm.push(rm,qm);});}for(jm in im)if(mm=ub[im[jm]]||null,om=lm.get(jm)){for(nm=0;nm<om.length;++nm)qm=om[nm],pm=qm.P,qm.P=!mm,pm!=qm.P&&(km=true);}else yc(jm);km&&(ol(hm),km=hm.ca(),jm=hm.G(),km=hm.b.a.hasOwnProperty("audio")&&0==km.length,jm=hm.b.a.hasOwnProperty("video")&&0==jm.length,km||jm)&&(jm=Error("The key system has restricted all "+(km&&jm?"audio and video tracks.":km?"audio tracks.":"video tracks.")),jm.type="drm",jm=yb(jm),hm.dispatchEvent(jm));}function ol(hm){var im=xb({type:"trackschanged",bubbles:true});hm.dispatchEvent(im);}function pl(hm,im,jm,km,lm,mm){if(!hm.b.a.hasOwnProperty(im)||!hm.c[im])return false;for(var nm=hm.b.get(im),om=0;om<nm.length;++om)for(var pm=nm[om],qm=0;qm<pm.o.length;++qm){var rm=pm.o[qm];if(rm.C==jm){if(!rm.P||!rm.I)return false;if("text"!=im&&!hm.Ra)return jm=hm.m[im],hm.m[im]={Na:rm,Va:null!=jm&&jm.Va||km,Wa:null!=jm&&jm.Wa||lm,switchReason:mm},true;yj(hm.H,rm);hm.c[im].ta(rm,km,lm,mm);return true;}}return false;}function ql(hm,im){for(var jm=0;2>=jm;++jm)for(var km=0;km<im.length;++km){var lm=im[km];if(zb(jm,hm.B,lm.lang)){im.splice(km,1);im.splice(0,0,lm);return;}}for(km=0;km<im.length;++km)if(lm=im[km],lm.b){im.splice(km,1);im.splice(0,0,lm);break;}}j=dl.prototype;j.Ab=function(){this.j.ua(this.h,"sourceopen");this.kb.resolve();};function rl(hm){for(var im=[],jm=["audio","video","text"],km=0;km<jm.length;++km){var lm=jm[km];hm.b.a.hasOwnProperty(lm)&&im.push(hm.b.get(lm)[0]);}for(var mm=sl(hm,im),km=0;km<jm.length;++km)if(lm=jm[km],hm.b.a.hasOwnProperty(lm)&&!mm[lm])return hm=Error("Unable to select an initial "+lm+" stream: all "+lm+" streams have been restricted (by the application or by the key system)."),hm.type="stream",Promise.reject(hm);im=ec(mm).map(function(nm){return nm.J.create();});return Promise.all(im).then(dd(hm,function(nm){if(!nm.every(function(om){return om.length();}))return nm=Error("Some streams are not available."),nm.type="stream",Promise.reject(nm);nm=dm(this,nm);if(!nm)return nm=Error("Some streams are not available."),nm.type="stream",Promise.reject(nm);if(!tl(this,mm))return nm=Error("Failed to create Stream objects."),nm.type="stream",Promise.reject(nm);this.l.start();vl(this,mm,nm);return Promise.resolve();})).catch(dd(hm,function(nm){if("aborted"!=nm.type)return Object.keys(this.c),this.a.b?(eb()<this.a.h?(nm=Math.max(this.a.h-Date.now()/1000,this.ra),this.K=i.setTimeout(this.nb.bind(this,true),1000*nm)):hl(this,0),Promise.resolve()):Promise.reject(nm);}));}function sl(hm,im){for(var jm={},km=0;km<im.length;++km){var lm=im[km],mm=null;if("video"==lm.contentType){var nm=hm.l.getInitialVideoTrackId();if(null==nm)continue;mm=lm.o.filter(function(om){return om.C==nm;});if(0==mm.length)continue;mm=mm[0];}else if("audio"==lm.contentType){if(nm=hm.l.getInitialAudioTrackId(),mm=lm.o.filter(function(om){return om.C==nm;}),0==mm.length){mm=lm.o.filter(function(om){return om.P&&om.I;});if(0==mm.length)continue;mm=lm.o[Math.floor(mm.length/2)];}else mm=mm[0];}else 0<lm.o.length&&(mm=lm.o[0]);jm[lm.contentType]=mm;}return jm;}function tl(hm,im){var jm={},km;for(km in im){var lm=im[km],lm="text"==km?new ij(hm,hm.f):ul(hm,lm);if(!lm)return ec(jm).forEach(function(mm){mm.destroy();}),false;jm[km]=lm;}hm.c=jm;return true;}function ul(hm,im){var jm=new yi(hm,hm.f,hm.h,ri(im),hm.ea,hm.jb);jm.F(hm.g);return jm;}function vl(hm,im,jm){hm.cb=hm.f.playbackRate;hm.f.playbackRate=0;xl(hm,jm);var km;hm.O&&hm.O<=jm.end&&hm.O>=jm.start?km=hm.O:hm.a.b?(km=jm.end,hm.Ya=true):km=jm.start;pc(hm.j,hm.f,"seeking",hm.Hb.bind(hm));hm.f.currentTime!=km&&(hm.f.currentTime=km,hm.A=km);yl(hm,jm.start,jm.end);var lm=[],mm;for(mm in hm.c){jm=hm.c[mm];dd(hm,function(om){lm.push(om.tb(this.U).then(dd(this,function(pm){var qm=om.Ea();qm>this.Ba&&(this.Ba=qm);return pm;})));})(jm);pc(hm.j,jm,"ended",hm.Ib.bind(hm));km=im[mm];yj(hm.H,km);var nm=hm.l.getInitialSwitchReason()||void 0;jm.ta(km,false,void 0,nm);}Promise.all(lm).then(hm.wb.bind(hm)).catch(dd(hm,function(om){"destroy"!=om.type&&(om=yb(om),this.dispatchEvent(om));}));ll(hm,hm.fa);}j.wb=function(hm){n(hm&&hm.length==Object.keys(this.c).length);for(var im=Number.POSITIVE_INFINITY,jm=Number.NEGATIVE_INFINITY,km=0;km<hm.length;++km)var lm=hm[km],im=Math.min(im,lm),jm=Math.max(jm,lm);hm=bm(this);for(km=0;km<hm.length;++km)hm[km].ka(jm);wl(this,hm,jm);km=lc(this.b).map(function(mm){return mm.o;}).reduce(function(mm,nm){return mm.concat(nm);},[]).map(function(mm){var nm=[mm.J.create()];mm.L&&nm.push(mm.L.create());return Promise.all(nm);});Promise.all(km).then(dd(this,function(mm){for(var nm=0;nm<mm.length;++nm)mm[nm][0].ka(jm);this.Ra=true;for(var om in this.m)mm=this.m[om],nm=this.c[om],yj(this.H,mm.Na),nm.ta(mm.Na,mm.Va,mm.Wa,mm.switchReason);this.m={};})).catch(dd(this,function(mm){"aborted"!=mm.type&&(mm=yb(mm),this.dispatchEvent(mm));}));};function wl(hm,im,jm){if(im=dm(hm,im))xl(hm,im),yl(hm,im.start,im.end);0!=jm?(jm=hm.f.currentTime+jm,hm.f.currentTime=jm,hm.A=jm):hm.Ya&&im&&(hm.f.currentTime=im.end);hm.f.playbackRate=hm.cb;hm.a.b&&null!=hm.a.f&&hl(hm,0);em(hm);hm.U.resolve();}function xl(hm,im){if(hm.a.b){isNaN(hm.h.duration)&&(hm.h.duration=im.end+2592000);}else if(isNaN(hm.h.duration)||im.end>hm.h.duration){hm.h.duration=im.end;for(var jm=0;jm<hm.h.sourceBuffers.length;++jm)hm.h.sourceBuffers[jm].appendWindowEnd=im.end;}}j.Jb=function(){this.N=null;em(this);var hm=dm(this,bm(this));hm&&(this.a.b&&this.na!=hm.w&&(this.na=hm.w,null!=this.s&&(i.clearTimeout(this.s),this.s=null)),yl(this,hm.start,hm.end),this.f.paused||zl(this,this.f.currentTime,hm.start,hm.end));};function yl(hm,im,jm){im=xb({type:"seekrangechanged",bubbles:true,start:im,end:jm});hm.dispatchEvent(im);}j.Hb=function(){var hm=this.f.currentTime;if(null!=this.A){if(hm>=this.A-.01&&hm<=this.A+.01){this.A=null;return;}this.A=null;}var im=dm(this,bm(this));if(im){var jm=im.end;(im=zl(this,hm,im.start,jm))||(hm<=jm+.01?im=false:(this.f.currentTime=jm,im=true));if(!im)for(var km in this.c)this.c[km].pb();}};function zl(hm,im,jm,km){if(im>=jm-.01)return false;im=0;if(hm.a.b){im=.5;for(var lm in hm.c)if(!hm.c[lm].rb(jm+im)){im=hm.a.c;break;}}hm.f.currentTime=Math.min(jm+im,km);return true;}j.Ib=function(){if(!this.a.b){for(var hm in this.c)if(!this.c[hm].Ia())return;this.va();}};function am(hm){return hm.a.i&&hm.f.currentTime+.5>hm.na?true:false;}j.yb=function(){this.da=true;if(am(this))return this.va();ec(this.c).every(function(hm){return hm.Ia();})&&(this.s=i.setTimeout(this.va.bind(this),1000*this.$a));};j.xb=function(){this.da=false;null!=this.s&&(i.clearTimeout(this.s),this.s=null);};j.Xb=function(){var hm=this.H,im=this.ea.getBandwidth();hm.estimatedBandwidth=im;hm.bandwidthHistory.push(new ak(im));};j.va=function(){this.da=false;this.s=null;this.h.endOfStream();};function bm(hm){return ec(hm.c).map(function(im){return im.Ga();}).filter(function(im){return null!=im;});}function cm(hm){return Math.max(hm.a?hm.a.c:1,hm.Ua?hm.g.streamBufferSize||0:0);}function dm(hm,im){for(var jm=0,km=Number.POSITIVE_INFINITY,lm=Number.POSITIVE_INFINITY,mm=0;mm<im.length;++mm){var nm=im[mm].Fa(),jm=Math.max(jm,nm.start);null!=nm.end&&(km=Math.min(km,nm.end));im[mm].length()&&(lm=Math.min(lm,im[mm].w().endTime));}if(km==Number.POSITIVE_INFINITY)if(km=hm.a.a[0],km.b){km=(km.start||0)+km.b;}else return null;hm.a.b&&(mm=cm(hm),km=Math.max(km-mm,jm));if(jm>km)return null;km=Math.floor(100000*km)/100000;return {start:jm,end:km,w:lm};}function em(hm){hm.a.b&&(hm.N=i.setTimeout(hm.Jb.bind(hm),1000));}function fm(hm){for(var im in hm.c)hm.c[im].F(hm.g);}j.Ea=function(){return this.Ba;};dl.prototype.getLongestInitResponseTime=dl.prototype.Ea;function gm(hm,im,jm,km){jm||(jm=new uc());km||(km=new bl());dl.call(this,null,jm,km);"string"===typeof hm?this.vb=hm:this.eb=hm;this.T=null;this.V=im;this.ma=[];this.Qa=[];this.Sa=[];this.F=null;}m(gm,dl);l("shaka.player.DashVideoSource",gm);gm.prototype.Qb=function(hm,im,jm){this.ma.push(hm);this.Qa.push(im||"");this.Sa.push(jm||"");};gm.prototype.addExternalCaptions=gm.prototype.Qb;gm.prototype.Rb=function(hm){this.F=hm;};gm.prototype.setNetworkCallback=gm.prototype.Rb;gm.prototype.destroy=function(){this.T=this.F=this.V=null;dl.prototype.destroy.call(this);};gm.prototype.xa=function(){var hm,im=dd(this,function(mm){this.Y("MPDFetchDuration",(Date.now()-hm)/1000);this.T=mm;for(var nm=0;nm<this.ma.length;nm++){var om=mm,pm=this.ma[nm],qm=this.Qa[nm],rm=this.Sa[nm];if(0!==om.a.length){var sm=new sf();sm.contentType="text";sm.lang=qm||"en";sm.c=true;qm=new vf();qm.bandwidth=0;qm.f=rm||"text/vtt";qm.u=[new af(pm)];sm.a.push(qm);om.a[0].b.push(sm);jg(om.a[0]);}}this.a=mj(new lj(this.V),mm,this.F);return dl.prototype.xa.call(this);});if(this.eb)return hm=Date.now(),im(this.eb);var jm=[new af(this.vb)],km;if(this.qa){km=Math.floor(cm(this))+1;var lm=jl(this);km=Math.min(km,this.pa);km=new rh(km);km.b=Math.floor(cm(this)+1);null!=lm&&(km.a=lm.streamInfoID);}jm=new kh(this.F,jm);jm=new ph(jm,this.Aa,km);hm=Date.now();return qh(jm).then(im);};gm.prototype.ab=function(){if(this.Ta){var hm=this.a;if(hm=(hm=hm&&hm.a)&&hm[0])hm=hm.a.reduce(function(im,jm){return im.concat(jm.o);},[]),Promise.all(hm.map(function(im){return im.J.ja;})).then(function(im){im=im.filter(function(jm){return null!=jm;});this.Y("SegmentIndexChanges",im);}.bind(this));}};gm.prototype.mb=function(hm,im,jm){var km;im&&void 0!=jm&&(km=new rh(im),km.c=jm,im=jl(this),null!=im&&(km.a=im.streamInfoID));hm=new ph(hm,this.Aa,km);var lm=Date.now();return qh(hm).then(dd(this,function(mm){this.Y("MPDFetchDuration",(Date.now()-lm)/1000);this.T=mm;mm=mj(new lj(this.V),mm,this.F);return Promise.resolve(mm);}));};gm.prototype.lb=function(){var hm=mj(new lj(this.V),this.T,this.F);return Promise.resolve(hm);};}.bind(h,b))();f.exports=h.shaka;}),null);